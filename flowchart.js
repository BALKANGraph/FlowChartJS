var FlowChart=class{_;options;element;svgElement;contentElement;uiShapeBar;uiMenuBar;uiStatusBar;uiShapeContextMenu;editor;nodes;labels;links;ports;selectedShapes;get selectedPortShape(){return this._.selectedPortShape}set selectedPortShape(t){null==t?(this._.selectedPortShape=null,null!=this.selectedPort&&(this.selectedPort=null),this._.hidePortsUI()):t!=this._.selectedPortShape&&(this._.selectedPortShape=t,this._.showPortsUI())}get selectedPort(){return this._.selectedPort}set selectedPort(t){null==t?(this._.selectedPort=null,this._.hidePortShapeBarUI(),FlowChart.events.publish("selected-port-changed",[this._.chart])):this._.selectedPort!=t&&(this.selectedPortShape!=t.shape&&(this.selectedPortShape=t.shape),this._.selectedPort=t,this._.showPortShapeBar(),FlowChart.events.publish("selected-port-changed",[this._.chart]))}get scale(){return this._.scale}set scale(t){if(this.scale!=t){t>this.options.scaleMax&&(t=this.options.scaleMax),t<this.options.scaleMin&&(t=this.options.scaleMin);var e=[50,50],r=FlowChart.private.getViewBox(this.svgElement),i=this.svgElement.getBoundingClientRect(),o=i.width,a=i.height,h=o/r[2],s=a/r[3],l=h>s?s:h,n=r,c=r[2],p=r[3];r[2]=r[2]/(t/l),r[3]=r[3]/(t/l),r[0]=n[0]-(r[2]-c)/(100/e[0]),r[1]=n[1]-(r[3]-p)/(100/e[1]),this._.setViewBox(r)}}static get VERSION(){return"1.00.08"}static MAGNET_MOVE_PIXELS=15;static MAGNET_RESIZE_PIXELS=10;static MAGNET_WIN_PIXELS=20;static MAGNET_PORT=20;static LINK_DITSNANCE=20;static LINK_ROUNDED_CORENERS=7;static MOVE_NODE_STEP=3;static SCALE_FACTOR=1.44;static DEFAULT_LINK_SHAPE_ID="base";static DEFAULT_LABEL_SHAPE_ID="label";static CHANGED_TIMEOUT=700;static PADDING=70;static shortcuts={undo:{keysPressed:["control","keyz"]},redo:{keysPressed:["control","keyy"]},select_all_nodes:{keysPressed:["control","keya"]},select_multiple_nodes:{keysPressed:["control|shift"]},resize_node:{mouseActions:["resize-shape"]},centered_resize_shape:{keysPressed:["control"],mouseActions:["resize-shape"]},maintain_aspect_ratio_resize_shape:{keysPressed:["shift"],mouseActions:["resize-shape"],activeComponentType:"shape"},remove_selected_nodes:{keysPressed:["delete|backspace"],activeComponentType:"node"},zoom:{keysPressed:["control"],mouseActions:["wheel"]},move_selected_nodes_left:{keysPressed:["arrowleft","control","shift"]},move_selected_nodes_right:{keysPressed:["arrowright","control","shift"]},move_selected_nodes_up:{keysPressed:["arrowup","control","shift"]},move_selected_nodes_down:{keysPressed:["arrowdown","control","shift"]},select_node_left:{keysPressed:["arrowleft","!control","!shift"],activeComponentType:"node"},select_node_right:{keysPressed:["arrowright","!control","!shift"],activeComponentType:"node"},select_node_above:{keysPressed:["arrowup","!control","!shift"],activeComponentType:"node"},select_node_below:{keysPressed:["arrowdown","!control","!shift"],activeComponentType:"node"},select_nodes_left:{keysPressed:["arrowleft","!control","shift"],activeComponentType:"node"},select_nodes_right:{keysPressed:["arrowright","!control","shift"],activeComponentType:"node"},select_nodes_above:{keysPressed:["arrowup","!control","shift"],activeComponentType:"node"},select_nodes_below:{keysPressed:["arrowdown","!control","shift"],activeComponentType:"node"},open_up_port:{keysPressed:["control","!shift","arrowup"],activeComponentType:"node|port-shape-bar|field"},open_down_port:{keysPressed:["control","!shift","arrowdown"],activeComponentType:"node|port-shape-bar|field"},open_left_port:{keysPressed:["control","!shift","arrowleft"],activeComponentType:"node|port-shape-bar|field"},open_right_port:{keysPressed:["control","!shift","arrowright"],activeComponentType:"node|port-shape-bar|field"},navigate_port_down:{keysPressed:["!control","!shift","arrowdown"],activeComponentType:"port-shape-bar"},navigate_port_left:{keysPressed:["!control","!shift","arrowleft"],activeComponentType:"port-shape-bar"},navigate_port_right:{keysPressed:["!control","!shift","arrowright"],activeComponentType:"port-shape-bar"},navigate_port_up:{keysPressed:["!control","!shift","arrowup"],activeComponentType:"port-shape-bar"},align_tofirst_selected_nodes_top:{keysPressed:["keyt","!shift"],activeComponentType:"shape"},align_tofirst_selected_nodes_bottom:{keysPressed:["keyb","!shift"],activeComponentType:"shape"},align_tofirst_selected_nodes_left:{keysPressed:["keyl","!shift"],activeComponentType:"shape"},align_tofirst_selected_nodes_right:{keysPressed:["keyr","!shift"],activeComponentType:"shape"},align_tofirst_selected_nodes_horizontally:{keysPressed:["keye","!shift"],activeComponentType:"shape"},align_tofirst_selected_nodes_vertically:{keysPressed:["keyc","!shift"],activeComponentType:"shape"},align_tolast_selected_nodes_top:{keysPressed:["keyt","shift"],activeComponentType:"shape"},align_tolast_selected_nodes_bottom:{keysPressed:["keyb","shift"],activeComponentType:"shape"},align_tolast_selected_nodes_left:{keysPressed:["keyl","shift"],activeComponentType:"shape"},align_tolast_selected_nodes_right:{keysPressed:["keyr","shift"],activeComponentType:"shape"},align_tolast_selected_nodes_horizontally:{keysPressed:["keye","shift"],activeComponentType:"shape"},align_tolast_selected_nodes_vertically:{keysPressed:["keyc","shift"],activeComponentType:"shape"},paint_node:{keysPressed:["digit1|digit2|digit3|digit4|digit5|digit6|digit7|digit8|digit9|numpad1|numpad2|numpad3|numpad4|numpad5|numpad6|numpad7|numpad8|numpad9"],activeComponentType:"node"},add_shape:{keysPressed:["enter"],activeComponentType:"port-shape-bar"},edit_next_field:{keysPressed:["tab"],activeComponentType:"field"},exit_edit_field:{keysPressed:["escape"],activeComponentType:"field"},close_port_shape_bar:{keysPressed:["escape"],activeComponentType:"port-shape-bar"},deleselect_shapes:{keysPressed:["escape"],activeComponentType:"shape"},edit_shape:{keysPressed:["enter|numpadenter|space"],activeComponentType:"shape"},remove_field:{keysPressed:["control","numpadsubtract|minus"],activeComponentType:"field"}};static position=Object.freeze({top:"top",bottom:"bottom",left:"left",right:"right",topLeft:"topLeft",topRight:"topRight",bottomLeft:"bottomLeft",bottomRight:"bottomRight"});static align=Object.freeze({top:"top",bottom:"bottom",left:"left",right:"right",horizontally:"horizontally",vertically:"vertically"});static move=Object.freeze({up:"up",down:"down",left:"left",right:"right"});static direction=Object.freeze({vertical:"vertical",horizontal:"horizontal"});static startPosition=Object.freeze({none:"none",meetHeight:"meetHeight",meetWidth:"meetWidth",meetBoundary:"meetBoundary",centerTop:"centerTop",centerBottom:"centerBottom",centerLeft:"centerLeft",centerRight:"centerRight",center:"center"});static isNEU(t){return null==t||""===t}static isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)};static animate=function(t,e,r,i,o,a,h){return FlowChart.private.animate(t,e,r,i,o,a,h)};constructor(t,e){("string"==typeof t||t instanceof String)&&(t=document.querySelector(t)),this.options=FlowChart.private.mergeDeep(FlowChart.private.defaultOptions(),e),this.element=t,this.svgElement=null,this.contentElement=null,this.uiShapeBar=new FlowChart.UIShapeBar(this),this.uiMenuBar=new FlowChart.UIMenuBar(this),this.uiStatusBar=new FlowChart.UIStatusBar(this),this.selectedShapes=new FlowChart.SelectedShapeCollection(this),this.editor=new FlowChart.Editor(this),this.uiShapeContextMenu=new FlowChart.UIMenu(this),this.ports=new FlowChart.PortCollection(this),this.nodes=new FlowChart.ShapeCollection(this),this.links=new FlowChart.LinkCollection(this),this.labels=new FlowChart.ShapeCollection(this),this._=new FlowChart.private(this),this.uiMenuBar._.init(),FlowChart.events.publish("init",[this])}load(t){this._.load(t)}json(){return this._.json()}text(){return this._.text()}getShape(t){return this._.getShape(t)}generateId(){return this._.generateId()}undo(){this._.undo()}redo(){this._.redo()}undoStepsCount(){return this._.undoStepsCount()}redoStepsCount(){return this._.redoStepsCount()}clearRedo(){this._.clearRedo()}clearUndo(){this._.clearUndo()}alignShapes(t,e,r){this._.alignShapes(t,e,r)}onSelectedShapeChanged(t){return this._.on("selected-shapes-changed",(function(e,r){t.call(e,r)}))}onInit(t){return this._.on("init",(function(e,r){t.call(e,r)}))}onChanged(t){return this._.on("changed",(function(e,r){t.call(e,r)}))}onUndoRedoChanged(t){return this._.on("undo-redo-changed",(function(e,r){t.call(e,r)}))}};"undefined"!=typeof module&&(module.exports=FlowChart),FlowChart.private=class{chart;mouseActions;keysPressed;mouseOverShape;mouseOverShapeType;touchendEnabledDevice;scale;uid;loading;initialized;changedTimeout;selectedPortShape;selectedPort;lastAddedTemplateIdFormPortShapeBar;static defaultOptions(){return{mode:"light",startPosition:FlowChart.startPosition.centerTop,startScale:1,readOnly:!1,shapeBar:!0,menuBar:!1,statusBar:!1,colors:["#039BE5","#F57C00","#FFCA28","#aeaeae"],scaleMax:4,scaleMin:.5,nodeSeparation:100,zoom:{speed:120,smooth:12}}}constructor(t){this.chart=t,this.mouseActions=[],this.keysPressed=[],this.matchedShortcuts=[],this.mouseOverShape=null,this.mouseOverShapeType=null,this.touchendEnabledDevice=!1,this.scale=1,this.loading=!1,this.initialized=!1,this.changedTimeout=null,this.selectedPortShape=null,this.selectedPort=null,this.uid=FlowChart.private.uid(this.chart.element),this.init()}load(t){if(this.loading=!0,this.chart.nodes.clear(),t&&(Array.isArray(t.nodes)&&this.chart.nodes.addRange(t.nodes),Array.isArray(t.links)&&this.chart.links.addRange(t.links),Array.isArray(t.labels)&&this.chart.labels.addRange(t.labels)),!this.initialized){this.chart.scale=this.chart.options.startScale;var e=this.chart.contentElement.offsetWidth,r=this.chart.contentElement.offsetHeight,i=e/2,o=r/2,a=FlowChart.private.getViewBox(this.chart.svgElement);switch(this.chart.options.startPosition){case FlowChart.startPosition.centerTop:var h=this.chart.nodes._.minShapeY;a[0]=h.x-i/this.chart.scale,a[1]=h.top-FlowChart.PADDING,this.setViewBox(a);break;case FlowChart.startPosition.centerBottom:h=this.chart.nodes._.maxShapeY;a[0]=h.x-i/this.chart.scale,a[1]=h.bottom+FlowChart.PADDING-r/this.chart.scale,this.setViewBox(a);break;case FlowChart.startPosition.centerRight:h=this.chart.nodes._.minShapeX;a[0]=h.left-FlowChart.PADDING,a[1]=h.y-o/this.chart.scale,this.setViewBox(a);break;case FlowChart.startPosition.centerLeft:h=this.chart.nodes._.maxShapeX;a[0]=h.right+FlowChart.PADDING-e/this.chart.scale,a[1]=h.y-o/this.chart.scale,this.setViewBox(a);break;case FlowChart.startPosition.meetHeight:console.error("meetHeight not implemented");break;case FlowChart.startPosition.meetWidth:console.error("meetWidth not implemented");break;case FlowChart.startPosition.meetBoundary:console.error("meetBoundary not implemented");break;case FlowChart.startPosition.center:console.error("center not implemented")}this.initialized=!0}this.loading=!1}json(){var t={nodes:[],links:[],labels:[]};for(var e of this.chart.nodes)t.nodes.push(Object.assign({},e));for(var r of this.chart.labels)t.labels.push(Object.assign({},r));for(var i of this.chart.links)t.links.push(Object.assign({},i));return t}alignShapes(t,e,r){if(t.length){var i=0,o=(t.length,t[t.length-1]);r&&(i=1,t.length,o=t[0]);var a=0;for(var h of t)i>=a&&(e==FlowChart.position.top?h.y=o.y-o.height/2+h.height/2:e==FlowChart.align.bottom?h.y=o.y+o.height/2-h.height/2:e==FlowChart.align.left?h.x=o.x-o.width/2+h.width/2:e==FlowChart.align.right?h.x=o.x+o.width/2-h.width/2:e==FlowChart.align.horizontally?h.x=o.x:e==FlowChart.align.vertically&&(h.y=o.y)),a++}}text(){return JSON.stringify({nodes:this.chart.nodes,links:this.chart.links,labels:this.chart.labels})}getShape(t){var e=this.chart.nodes.get(t);return e||(e=this.chart.labels.get(t)),e}generateId(){for(;;){var t="_"+("0000"+(Math.random()*Math.pow(36,4)|0).toString(36)).slice(-4);if(!this.chart.nodes.contains(t)&&!this.chart.labels.contains(t))return t}}init(){this.chart.element.classList.add("bfc-"+this.chart.options.mode),this.chart.element.innerHTML=` ${FlowChart.css()}\n                                <table border="0" cellspacing="0" cellpadding="0" style="width: 100%;height: 100%;">                                   \n                                  ${this.chart.uiMenuBar.html()}                            \n                                  ${this.chart.uiShapeBar.html()}\n                                  <tr><td class="bfc-content">\n                                    <svg class="bfc-svg">                                     \n                                        <g data-shapes-and-links></g>\n                                        <foreignObject class="bfc-html" x="90000" y="90000" width="10000" height="10000"><div data-test-elastic-size style="height: initial; display: inline-block;" class="bfc-flex-center"></div></foreignObject>\n                                    </svg>    \n                                  </td></tr>\n                                  ${this.chart.uiStatusBar.html()}\n                                  </table>`,this.chart.svgElement=this.chart.element.querySelector(".bfc-svg");var t=[0,0,this.chart.svgElement.parentNode.offsetWidth,this.chart.svgElement.parentNode.offsetHeight];this.chart.svgElement.setAttribute("viewBox",t.join(",")),this.chart.svgElement.setAttribute("width",this.chart.svgElement.parentNode.offsetWidth),this.chart.svgElement.setAttribute("height",this.chart.svgElement.parentNode.offsetHeight),this.chart.contentElement=this.chart.element.querySelector(".bfc-content"),this.chart.uiMenuBar.init(),this.chart.uiShapeBar.init(),this.chart.uiStatusBar.init(),this.addListeners()}setViewBox(t){this.chart.svgElement.setAttribute("viewBox",t.toString());var e=this.chart.svgElement.getBoundingClientRect(),r=FlowChart.private.getScale(t,e.width,e.height);this.scale=r}on(t,e){return FlowChart.events.on(t,e,this.uid),this}getSizeOfHTML(t){t&&(t=t.replaceAll("contenteditable"," "));var e=this.chart.svgElement.querySelector("[data-test-elastic-size]");e.innerHTML=t;var r=e.getBoundingClientRect();return{width:r.width/this.chart.scale+6,height:r.height/this.chart.scale+6}}getActiveComponentTypes(){if(null!=this.chart.selectedPort)return["port-shape-bar"];if(this.chart.editor._.hasActiveField())return["field"];var t=[];return this.chart.selectedShapes.nodes().length&&t.push("node"),this.chart.selectedShapes.labels().length&&t.push("label"),t.length?(t.push("shape"),t):"canvas"}zoom(t,e){var r=FlowChart.private.getViewBox(this.chart.svgElement),i=r,o=r[2],a=r[3];!0===t?(r[2]=r[2]/FlowChart.SCALE_FACTOR,r[3]=r[3]/FlowChart.SCALE_FACTOR):!1===t?(r[2]=r[2]*FlowChart.SCALE_FACTOR,r[3]=r[3]*FlowChart.SCALE_FACTOR):(r[2]=r[2]/t,r[3]=r[3]/t),e||(e=[50,50]),r[0]=i[0]-(r[2]-o)/(100/e[0]),r[1]=i[1]-(r[3]-a)/(100/e[1]);var h=this.chart.svgElement.getBoundingClientRect(),s=FlowChart.private.getScale(r,h.width,h.height);r[2]=h.width/s,r[3]=h.height/s;var l=this.chart.options;(!0===t&&s<l.scaleMax||!1===t&&s>l.scaleMin||0!=t&&1!=t&&s<l.scaleMax&&s>l.scaleMin)&&(this.setViewBox(r),this.chart.selectedShapes._.update(s),this.updatePortsElements(s))}updatePortsElements(t){for(var e=this.chart.svgElement.querySelectorAll("[data-ports-n-id]"),r=0;r<e.length;r++){var i=e[r],o=i.getAttribute("data-ports-n-id"),a=this.chart.nodes.get(o);i.innerHTML=this.portHTMLUI(a,t)}}changed(){var t=this;this.loading||(this.changedTimeout&&(clearTimeout(this.changedTimeout),this.changedTimeout=null),this.changedTimeout=setTimeout((function(){FlowChart.events.publish("changed",[t.chart])}),FlowChart.CHANGED_TIMEOUT))}updateMatchedShortcuts(t,e,r){this.matchedShortcuts=[];var i=this.getActiveComponentTypes();for(var o in FlowChart.shortcuts)if(!this.matchedShortcuts.includes(o)){var a=!0,h=!0,s=!0,l=FlowChart.shortcuts[o];if(l.keysPressed)for(var n=0;n<l.keysPressed.length;n++){var c,p=l.keysPressed[n];c=-1!=p.indexOf("|")?p.split("|"):[p];var d=!1;for(var u of c)0==u.indexOf("!")?(u=u.substring(1),this.keysPressed.includes(u)||(d=!0)):this.keysPressed.includes(u)&&(d=!0);if(!d){a=!1;break}var f=!1;if(l.activeComponentType){var y=l.activeComponentType.split("|");for(var w of y)i.includes(w)&&(f=!0)}else f=!0;if(!f){s=!1;break}}else e&&l.keyDown?l.keyDown!=e&&(a=!1):r&&l.keyUp&&l.keyUp!=r&&(a=!1);if(l.mouseActions)for(n=0;n<l.mouseActions.length;n++)if(!this.mouseActions.includes(l.mouseActions[n])){h=!1;break}if(h&&a&&s){this.matchedShortcuts.includes(o)||this.matchedShortcuts.push(o);var C=this.chart.selectedShapes,v=this.chart.selectedShapes.nodes();if("move_selected_nodes_left"==o)this.chart.nodes._.move(v,FlowChart.move.left);else if("move_selected_nodes_right"==o)this.chart.nodes._.move(v,FlowChart.move.right);else if("move_selected_nodes_up"==o)this.chart.nodes._.move(v,FlowChart.move.up);else if("move_selected_nodes_down"==o)this.chart.nodes._.move(v,FlowChart.move.down);else if("align_tofirst_selected_nodes_bottom"==o)t.preventDefault(),this.chart.alignShapes(C,FlowChart.align.bottom,!0);else if("align_tofirst_selected_nodes_top"==o)t.preventDefault(),this.chart.alignShapes(C,FlowChart.align.top,!0);else if("align_tofirst_selected_nodes_left"==o)t.preventDefault(),this.chart.alignShapes(C,FlowChart.align.left,!0);else if("align_tofirst_selected_nodes_right"==o)t.preventDefault(),this.chart.alignShapes(C,FlowChart.align.right,!0);else if("align_tofirst_selected_nodes_horizontally"==o)t.preventDefault(),this.chart.alignShapes(C,FlowChart.align.horizontally,!0);else if("align_tofirst_selected_nodes_vertically"==o)t.preventDefault(),this.chart.alignShapes(C,FlowChart.align.vertically,!0);else if("align_tolast_selected_nodes_bottom"==o)t.preventDefault(),this.chart.alignShapes(C,FlowChart.align.bottom,!1);else if("align_tolast_selected_nodes_top"==o)t.preventDefault(),this.chart.alignShapes(C,FlowChart.align.top,!1);else if("align_tolast_selected_nodes_left"==o)t.preventDefault(),this.chart.alignShapes(C,FlowChart.align.left,!1);else if("align_tolast_selected_nodes_right"==o)t.preventDefault(),this.chart.alignShapes(C,FlowChart.align.right,!1);else if("align_tolast_selected_nodes_horizontally"==o)t.preventDefault(),this.chart.alignShapes(C,FlowChart.align.horizontally,!1);else if("align_tolast_selected_nodes_vertically"==o)t.preventDefault(),this.chart.alignShapes(C,FlowChart.align.vertically,!1);else if("remove_selected_nodes"==o)this.chart.nodes.removeRange(this.chart.selectedShapes.nodes());else if("select_all_nodes"==o)for(var g of this.chart.nodes)"label"!=g.type&&this.chart.selectedShapes.add(g);else if("undo"==o)this.chart._.undo(),this.chart.uiMenuBar._.simulateMouseClickOnKeydown("undo");else if("redo"==o)this.chart._.redo(),this.chart.uiMenuBar._.simulateMouseClickOnKeydown("redo");else if("open_up_port"==o)this.showPortShapeBarUI(FlowChart.position.top);else if("open_down_port"==o)this.showPortShapeBarUI(FlowChart.position.bottom);else if("open_left_port"==o)this.showPortShapeBarUI(FlowChart.position.left);else if("open_right_port"==o)this.showPortShapeBarUI(FlowChart.position.right);else if("navigate_port_down"==o)t.preventDefault(),this.navigatePortShapeBarItems(FlowChart.position.bottom);else if("navigate_port_left"==o)t.preventDefault(),this.navigatePortShapeBarItems(FlowChart.position.left);else if("navigate_port_right"==o)t.preventDefault(),this.navigatePortShapeBarItems(FlowChart.position.right);else if("navigate_port_up"==o)t.preventDefault(),this.navigatePortShapeBarItems(FlowChart.position.top);else if("add_shape"==o)this.chart.editor.exit(),this.chart._.snapshot(),t.preventDefault(),this.chart._.createNodeFromPorsShapeBarItem();else if("edit_next_field"==o)t.preventDefault(),this.chart.editor.editNextField();else if("exit_edit_field"==o)this.chart.editor.exit();else if("close_port_shape_bar"==o)this.chart.selectedPort=null;else if("deleselect_shapes"==o)this.chart.selectedShapes.clear();else if("edit_shape"==o){var m=this.chart.selectedShapes.last();t.preventDefault(),this.chart.editor.edit(m.id)}else if("select_node_above"==o)this.chart.editor.exit(),this.chart.selectedShapes.selectNodeAbove(!0);else if("select_node_below"==o)this.chart.editor.exit(),this.chart.selectedShapes.selectNodeBelow(!0);else if("select_node_left"==o)this.chart.editor.exit(),this.chart.selectedShapes.selectNodeLeft(!0);else if("select_node_right"==o)this.chart.editor.exit(),this.chart.selectedShapes.selectNodeRight(!0);else if("select_nodes_above"==o)this.chart.editor.exit(),this.chart.selectedShapes.selectNodeAbove(!1);else if("select_nodes_below"==o)this.chart.editor.exit(),this.chart.selectedShapes.selectNodeBelow(!1);else if("select_nodes_left"==o)this.chart.editor.exit(),this.chart.selectedShapes.selectNodeLeft(!1);else if("select_nodes_right"==o)this.chart.editor.exit(),this.chart.selectedShapes.selectNodeRight(!1);else if("paint_node"==o){var N=parseInt(e)-1;this.changeFill(this.chart.options.colors[N]),this.chart.uiMenuBar._.simulateMouseClickOnKeydown(`color-${N}`)}else"remove_field"==o&&t.preventDefault()}}}changeFill(t){var e;for(var r of this.chart.selectedShapes)r.fill!=t&&(e||(e=this.chart.text()),r.fill=t);e&&this.chart._.snapshot(e)}},FlowChart.private.animate=function(t,e,r,i,o,a,h){var s,l=10,n=1,c=i/l+1;document.getElementsByTagName("g");return Array.isArray(t)||(t=[t]),Array.isArray(e)||(e=[e]),Array.isArray(r)||(r=[r]),s=setInterval((function(){for(var p=0;p<t.length;p++)for(var d in r[p]){var u=["top","left","right","bottom","width","height"].includes(d.toLowerCase())?"px":"";switch(d.toLowerCase()){case"d":var f=o((n*l-l)/i)*(r[p][d][0]-e[p][d][0])+e[p][d][0],y=o((n*l-l)/i)*(r[p][d][1]-e[p][d][1])+e[p][d][1];t[p].setAttribute("d",t[p].getAttribute("d")+" L"+f+" "+y);break;case"r":var w=o((n*l-l)/i)*(r[p][d]-e[p][d])+e[p][d];t[p].setAttribute("r",w);break;case"x1":w=o((n*l-l)/i)*(r[p][d]-e[p][d])+e[p][d];t[p].setAttribute("x1",w);break;case"x2":w=o((n*l-l)/i)*(r[p][d]-e[p][d])+e[p][d];t[p].setAttribute("x2",w);break;case"y1":w=o((n*l-l)/i)*(r[p][d]-e[p][d])+e[p][d];t[p].setAttribute("y1",w);break;case"y2":w=o((n*l-l)/i)*(r[p][d]-e[p][d])+e[p][d];t[p].setAttribute("y2",w);break;case"rotate3d":if(r[p][d]){var C=e[p][d],v=r[p][d],g=[0,0,0,0];for(var m in C)g[m]=o((n*l-l)/i)*(v[m]-C[m])+C[m];t[p].style.transform="rotate3d("+g.toString()+"deg)"}break;case"transform":if(r[p][d]){C=e[p][d],v=r[p][d],g=[0,0,0,0,0,0];for(var m in C)g[m]=o((n*l-l)/i)*(v[m]-C[m])+C[m];t[p].hasAttribute("transform")?t[p].setAttribute("transform","matrix("+g.toString()+")"):t[p].style.transform="matrix("+g.toString()+")"}break;case"viewbox":if(r[p][d]){C=e[p][d],v=r[p][d],g=[0,0,0,0];for(var m in C)g[m]=o((n*l-l)/i)*(v[m]-C[m])+C[m];t[p].setAttribute("viewBox",g.toString())}break;case"margin":if(r[p][d]){C=e[p][d],v=r[p][d],g=[0,0,0,0];for(var m in C)g[m]=o((n*l-l)/i)*(v[m]-C[m])+C[m];var N="";for(m=0;m<g.length;m++)N+=parseInt(g[m])+"px ";t[p]&&t[p].style&&(t[p].style[d]=N)}break;case"scrolly":w=o((n*l-l)/i)*(r[p][d]-e[p][d])+e[p][d];t[p].scrollTo(0,w);break;default:w=o((n*l-l)/i)*(r[p][d]-e[p][d])+e[p][d];t[p]&&t[p].style&&(t[p].style[d]=w+u)}}h&&h(),(n+=1)>c+1&&(clearInterval(s),a&&a(t))}),l)},FlowChart.private.linkFromTo=function(t,e,r,i){var o=[];if(r.position==FlowChart.position.right&&i.position==FlowChart.position.left)if(t.left+t.width+FlowChart.LINK_DITSNANCE<e.left-FlowChart.LINK_DITSNANCE){var a=t.left+t.width+(e.left-(t.left+t.width))/2;o.push({x:r.x,y:r.y}),o.push({x:a,y:r.y}),o.push({x:a,y:i.y}),o.push({x:i.x,y:i.y})}else if(t.top-FlowChart.LINK_DITSNANCE>e.top+e.height+FlowChart.LINK_DITSNANCE){var h=t.top+t.height+(e.top-(t.top+t.height))/2;o.push({x:r.x,y:r.y}),o.push({x:t.left+t.width+FlowChart.LINK_DITSNANCE,y:r.y}),o.push({x:t.left+t.width+FlowChart.LINK_DITSNANCE,y:h}),o.push({x:e.left-FlowChart.LINK_DITSNANCE,y:h}),o.push({x:e.left-FlowChart.LINK_DITSNANCE,y:i.y}),o.push({x:i.x,y:i.y})}else if(t.top+t.height+FlowChart.LINK_DITSNANCE<e.top-FlowChart.LINK_DITSNANCE){h=e.top+e.height+(t.top-(e.top+e.height))/2;o.push({x:r.x,y:r.y}),o.push({x:t.left+t.width+FlowChart.LINK_DITSNANCE,y:r.y}),o.push({x:t.left+t.width+FlowChart.LINK_DITSNANCE,y:h}),o.push({x:e.left-FlowChart.LINK_DITSNANCE,y:h}),o.push({x:e.left-FlowChart.LINK_DITSNANCE,y:i.y}),o.push({x:i.x,y:i.y})}else if(r.y<i.y&&t.left-FlowChart.LINK_DITSNANCE>e.left+e.width+FlowChart.LINK_DITSNANCE){var s=Math.min(t.top,e.top);o.push({x:r.x,y:r.y}),o.push({x:t.left+t.width+FlowChart.LINK_DITSNANCE,y:r.y}),o.push({x:t.left+t.width+FlowChart.LINK_DITSNANCE,y:s-FlowChart.LINK_DITSNANCE}),o.push({x:e.left-FlowChart.LINK_DITSNANCE,y:s-FlowChart.LINK_DITSNANCE}),o.push({x:e.left-FlowChart.LINK_DITSNANCE,y:i.y}),o.push({x:i.x,y:i.y})}else if(r.y>i.y&&t.left+FlowChart.LINK_DITSNANCE>e.left+e.width+FlowChart.LINK_DITSNANCE){var l=Math.max(t.top+t.height,e.top+e.height);o.push({x:r.x,y:r.y}),o.push({x:t.left+t.width+FlowChart.LINK_DITSNANCE,y:r.y}),o.push({x:t.left+t.width+FlowChart.LINK_DITSNANCE,y:l+FlowChart.LINK_DITSNANCE}),o.push({x:e.left-FlowChart.LINK_DITSNANCE,y:l+FlowChart.LINK_DITSNANCE}),o.push({x:e.left-FlowChart.LINK_DITSNANCE,y:i.y}),o.push({x:i.x,y:i.y})}else o.push({x:r.x,y:r.y}),o.push({x:i.x,y:i.y});else if(r.position==FlowChart.position.left&&i.position==FlowChart.position.right)if(t.left-FlowChart.LINK_DITSNANCE>e.left+e.width+FlowChart.LINK_DITSNANCE){a=e.left+e.width+(t.left-(e.left+e.width))/2;o.push({x:r.x,y:r.y}),o.push({x:a,y:r.y}),o.push({x:a,y:i.y}),o.push({x:i.x,y:i.y})}else if(t.top-FlowChart.LINK_DITSNANCE>e.top+e.height+FlowChart.LINK_DITSNANCE){h=e.top+e.height+(t.top-(e.top+e.height))/2;o.push({x:r.x,y:r.y}),o.push({x:t.left-FlowChart.LINK_DITSNANCE,y:r.y}),o.push({x:t.left-FlowChart.LINK_DITSNANCE,y:h}),o.push({x:e.left+e.width+FlowChart.LINK_DITSNANCE,y:h}),o.push({x:e.left+e.width+FlowChart.LINK_DITSNANCE,y:i.y}),o.push({x:i.x,y:i.y})}else if(t.top+t.height+FlowChart.LINK_DITSNANCE<e.top-FlowChart.LINK_DITSNANCE){h=t.top+t.height+(e.top-(t.top+t.height))/2;o.push({x:r.x,y:r.y}),o.push({x:t.left-FlowChart.LINK_DITSNANCE,y:r.y}),o.push({x:t.left-FlowChart.LINK_DITSNANCE,y:h}),o.push({x:e.left+e.width+FlowChart.LINK_DITSNANCE,y:h}),o.push({x:e.left+e.width+FlowChart.LINK_DITSNANCE,y:i.y}),o.push({x:i.x,y:i.y})}else if(r.y<i.y&&t.left+t.width+FlowChart.LINK_DITSNANCE<e.left-FlowChart.LINK_DITSNANCE){s=Math.min(t.top,e.top);o.push({x:r.x,y:r.y}),o.push({x:t.left-FlowChart.LINK_DITSNANCE,y:r.y}),o.push({x:t.left-FlowChart.LINK_DITSNANCE,y:s-FlowChart.LINK_DITSNANCE}),o.push({x:e.left+e.width+FlowChart.LINK_DITSNANCE,y:s-FlowChart.LINK_DITSNANCE}),o.push({x:e.left+e.width+FlowChart.LINK_DITSNANCE,y:i.y}),o.push({x:i.x,y:i.y})}else if(r.y>i.y&&t.left+t.width+FlowChart.LINK_DITSNANCE<e.left-FlowChart.LINK_DITSNANCE){l=Math.max(t.top+t.height,e.top+e.height);o.push({x:r.x,y:r.y}),o.push({x:t.left-FlowChart.LINK_DITSNANCE,y:r.y}),o.push({x:t.left-FlowChart.LINK_DITSNANCE,y:l+FlowChart.LINK_DITSNANCE}),o.push({x:e.left+e.width+FlowChart.LINK_DITSNANCE,y:l+FlowChart.LINK_DITSNANCE}),o.push({x:e.left+e.width+FlowChart.LINK_DITSNANCE,y:i.y}),o.push({x:i.x,y:i.y})}else o.push({x:r.x,y:r.y}),o.push({x:i.x,y:i.y});else if(r.position==FlowChart.position.bottom&&i.position==FlowChart.position.top)if(t.top+t.height+FlowChart.LINK_DITSNANCE<e.top-FlowChart.LINK_DITSNANCE){h=t.top+t.height+(e.top-(t.top+t.height))/2;o.push({x:r.x,y:r.y}),o.push({x:r.x,y:h}),o.push({x:i.x,y:h}),o.push({x:i.x,y:i.y})}else if(t.left+t.width+FlowChart.LINK_DITSNANCE<e.left-FlowChart.LINK_DITSNANCE){a=t.left+t.width+(e.left-(t.left+t.width))/2;o.push({x:r.x,y:r.y}),o.push({x:r.x,y:t.top+t.height+FlowChart.LINK_DITSNANCE}),o.push({x:a,y:t.top+t.height+FlowChart.LINK_DITSNANCE}),o.push({x:a,y:e.top-FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:e.top-FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:i.y})}else if(t.left-FlowChart.LINK_DITSNANCE>e.left+e.width+FlowChart.LINK_DITSNANCE){a=e.left+e.width+(t.left-(e.left+e.width))/2;o.push({x:r.x,y:r.y}),o.push({x:r.x,y:t.top+t.height+FlowChart.LINK_DITSNANCE}),o.push({x:a,y:t.top+t.height+FlowChart.LINK_DITSNANCE}),o.push({x:a,y:e.top-FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:e.top-FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:i.y})}else if(r.x<i.x&&t.top-FlowChart.LINK_DITSNANCE>e.top+e.height+FlowChart.LINK_DITSNANCE){var n=Math.min(t.left,e.left);o.push({x:r.x,y:r.y}),o.push({x:r.x,y:t.top+t.height+FlowChart.LINK_DITSNANCE}),o.push({x:n-FlowChart.LINK_DITSNANCE,y:t.top+t.height+FlowChart.LINK_DITSNANCE}),o.push({x:n-FlowChart.LINK_DITSNANCE,y:e.top-FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:e.top-FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:i.y})}else if(r.x>i.x&&t.top-FlowChart.LINK_DITSNANCE>e.top+e.height+FlowChart.LINK_DITSNANCE){var c=Math.max(t.left+t.width,e.left+e.width);o.push({x:r.x,y:r.y}),o.push({x:r.x,y:t.top+t.height+FlowChart.LINK_DITSNANCE}),o.push({x:c+FlowChart.LINK_DITSNANCE,y:t.top+t.height+FlowChart.LINK_DITSNANCE}),o.push({x:c+FlowChart.LINK_DITSNANCE,y:e.top-FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:e.top-FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:i.y})}else o.push({x:r.x,y:r.y}),o.push({x:i.x,y:i.y});else if(r.position==FlowChart.position.top&&i.position==FlowChart.position.bottom)if(t.top-FlowChart.LINK_DITSNANCE>e.top+e.height+FlowChart.LINK_DITSNANCE){h=e.top+e.height+(t.top-(e.top+e.height))/2;o.push({x:r.x,y:r.y}),o.push({x:r.x,y:h}),o.push({x:i.x,y:h}),o.push({x:i.x,y:i.y})}else if(t.left+t.width+FlowChart.LINK_DITSNANCE<e.left-FlowChart.LINK_DITSNANCE){a=t.left+t.width+(e.left-(t.left+t.width))/2;o.push({x:r.x,y:r.y}),o.push({x:r.x,y:t.top-FlowChart.LINK_DITSNANCE}),o.push({x:a,y:t.top-FlowChart.LINK_DITSNANCE}),o.push({x:a,y:e.top+e.height+FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:e.top+e.height+FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:i.y})}else if(t.left-FlowChart.LINK_DITSNANCE>e.left+e.width+FlowChart.LINK_DITSNANCE){a=e.left+e.width+(t.left-(e.left+e.width))/2;o.push({x:r.x,y:r.y}),o.push({x:r.x,y:t.top-FlowChart.LINK_DITSNANCE}),o.push({x:a,y:t.top-FlowChart.LINK_DITSNANCE}),o.push({x:a,y:e.top+e.height+FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:e.top+e.height+FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:i.y})}else if(r.x<i.x&&t.top+t.height+FlowChart.LINK_DITSNANCE<e.top-FlowChart.LINK_DITSNANCE){n=Math.min(t.left,e.left);o.push({x:r.x,y:r.y}),o.push({x:r.x,y:t.top-FlowChart.LINK_DITSNANCE}),o.push({x:n-FlowChart.LINK_DITSNANCE,y:t.top-FlowChart.LINK_DITSNANCE}),o.push({x:n-FlowChart.LINK_DITSNANCE,y:e.top+e.height+FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:e.top+e.height+FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:i.y})}else if(r.x>i.x&&t.top+t.height+FlowChart.LINK_DITSNANCE<e.top-FlowChart.LINK_DITSNANCE){c=Math.max(t.left+t.width,e.left+e.width);o.push({x:r.x,y:r.y}),o.push({x:r.x,y:t.top-FlowChart.LINK_DITSNANCE}),o.push({x:c+FlowChart.LINK_DITSNANCE,y:t.top-FlowChart.LINK_DITSNANCE}),o.push({x:c+FlowChart.LINK_DITSNANCE,y:e.top+e.height+FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:e.top+e.height+FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:i.y})}else o.push({x:r.x,y:r.y}),o.push({x:i.x,y:i.y});else if(r.position==FlowChart.position.bottom&&i.position==FlowChart.position.left)if(t.left+t.width+FlowChart.LINK_DITSNANCE>e.left-FlowChart.LINK_DITSNANCE&&t.left-FlowChart.LINK_DITSNANCE<e.left+e.width+FlowChart.LINK_DITSNANCE&&t.top+t.height+FlowChart.LINK_DITSNANCE>e.top-FlowChart.LINK_DITSNANCE&&t.top-FlowChart.LINK_DITSNANCE<e.top+e.height+FlowChart.LINK_DITSNANCE)o.push({x:r.x,y:r.y}),o.push({x:i.x,y:i.y});else if(r.y+FlowChart.LINK_DITSNANCE<i.y&&r.x<e.left-FlowChart.LINK_DITSNANCE)o.push({x:r.x,y:r.y}),o.push({x:r.x,y:i.y}),o.push({x:i.x,y:i.y});else if(t.top+t.height+FlowChart.LINK_DITSNANCE<e.top-FlowChart.LINK_DITSNANCE){h=t.top+t.height+(e.top-(t.top+t.height))/2;o.push({x:r.x,y:r.y}),o.push({x:r.x,y:h}),o.push({x:e.left-FlowChart.LINK_DITSNANCE,y:h}),o.push({x:e.left-FlowChart.LINK_DITSNANCE,y:i.y}),o.push({x:i.x,y:i.y})}else if(t.top+t.height+FlowChart.LINK_DITSNANCE>e.top-FlowChart.LINK_DITSNANCE&&t.left+t.width+FlowChart.LINK_DITSNANCE>e.left-FlowChart.LINK_DITSNANCE){l=Math.max(t.top+t.height,e.top+e.height),n=Math.min(t.left,e.left);o.push({x:r.x,y:r.y}),o.push({x:r.x,y:l+FlowChart.LINK_DITSNANCE}),o.push({x:n-FlowChart.LINK_DITSNANCE,y:l+FlowChart.LINK_DITSNANCE}),o.push({x:n-FlowChart.LINK_DITSNANCE,y:i.y}),o.push({x:i.x,y:i.y})}else if(t.top+t.height+FlowChart.LINK_DITSNANCE>e.top){a=t.left+t.width+(e.left-(t.left+t.width))/2;o.push({x:r.x,y:r.y}),o.push({x:r.x,y:t.top+t.height+FlowChart.LINK_DITSNANCE}),o.push({x:a,y:t.top+t.height+FlowChart.LINK_DITSNANCE}),o.push({x:a,y:i.y}),o.push({x:i.x,y:i.y})}else o.push({x:r.x,y:r.y}),o.push({x:i.x,y:i.y});else if(r.position==FlowChart.position.bottom&&i.position==FlowChart.position.right)if(t.left+t.width+FlowChart.LINK_DITSNANCE>e.left-FlowChart.LINK_DITSNANCE&&t.left-FlowChart.LINK_DITSNANCE<e.left+e.width+FlowChart.LINK_DITSNANCE&&t.top+t.height+FlowChart.LINK_DITSNANCE>e.top-FlowChart.LINK_DITSNANCE&&t.top-FlowChart.LINK_DITSNANCE<e.top+e.height+FlowChart.LINK_DITSNANCE)o.push({x:r.x,y:r.y}),o.push({x:i.x,y:i.y});else if(r.y<i.y&&r.x>e.left+e.width+FlowChart.LINK_DITSNANCE)o.push({x:r.x,y:r.y}),o.push({x:r.x,y:i.y}),o.push({x:i.x,y:i.y});else if(t.top+t.height+FlowChart.LINK_DITSNANCE<=e.top-FlowChart.LINK_DITSNANCE){h=t.top+t.height+(e.top-(t.top+t.height))/2;o.push({x:r.x,y:r.y}),o.push({x:r.x,y:h}),o.push({x:e.left+e.width+FlowChart.LINK_DITSNANCE,y:h}),o.push({x:e.left+e.width+FlowChart.LINK_DITSNANCE,y:i.y}),o.push({x:i.x,y:i.y})}else if(t.top+t.height+FlowChart.LINK_DITSNANCE>e.top-FlowChart.LINK_DITSNANCE&&t.left-FlowChart.LINK_DITSNANCE<e.left+e.width+FlowChart.LINK_DITSNANCE){l=Math.max(t.top+t.height,e.top+e.height),c=Math.max(t.left+t.width,e.left+e.width);o.push({x:r.x,y:r.y}),o.push({x:r.x,y:l+FlowChart.LINK_DITSNANCE}),o.push({x:c+FlowChart.LINK_DITSNANCE,y:l+FlowChart.LINK_DITSNANCE}),o.push({x:c+FlowChart.LINK_DITSNANCE,y:i.y}),o.push({x:i.x,y:i.y})}else if(t.top+t.height+FlowChart.LINK_DITSNANCE>e.top){a=e.left+e.width+(t.left-(e.left+e.width))/2;o.push({x:r.x,y:r.y}),o.push({x:r.x,y:t.top+t.height+FlowChart.LINK_DITSNANCE}),o.push({x:a,y:t.top+t.height+FlowChart.LINK_DITSNANCE}),o.push({x:a,y:i.y}),o.push({x:i.x,y:i.y})}else o.push({x:r.x,y:r.y}),o.push({x:i.x,y:i.y});else if(r.position==FlowChart.position.top&&i.position==FlowChart.position.left)if(t.left+t.width+FlowChart.LINK_DITSNANCE>e.left-FlowChart.LINK_DITSNANCE&&t.left-FlowChart.LINK_DITSNANCE<e.left+e.width+FlowChart.LINK_DITSNANCE&&t.top+t.height+FlowChart.LINK_DITSNANCE>e.top-FlowChart.LINK_DITSNANCE&&t.top-FlowChart.LINK_DITSNANCE<e.top+e.height+FlowChart.LINK_DITSNANCE)o.push({x:r.x,y:r.y}),o.push({x:i.x,y:i.y});else if(r.y>i.y&&r.x<e.left-FlowChart.LINK_DITSNANCE)o.push({x:r.x,y:r.y}),o.push({x:r.x,y:i.y}),o.push({x:i.x,y:i.y});else if(t.top-FlowChart.LINK_DITSNANCE>=e.top+e.height+FlowChart.LINK_DITSNANCE){h=t.top+t.height+(e.top-(t.top+t.height))/2;o.push({x:r.x,y:r.y}),o.push({x:r.x,y:h}),o.push({x:e.left-FlowChart.LINK_DITSNANCE,y:h}),o.push({x:e.left-FlowChart.LINK_DITSNANCE,y:i.y}),o.push({x:i.x,y:i.y})}else if(t.top-FlowChart.LINK_DITSNANCE<e.top+e.height+FlowChart.LINK_DITSNANCE&&t.left+t.width+FlowChart.LINK_DITSNANCE>e.left-FlowChart.LINK_DITSNANCE){s=Math.min(t.top,e.top),n=Math.min(t.left,e.left);o.push({x:r.x,y:r.y}),o.push({x:r.x,y:s-FlowChart.LINK_DITSNANCE}),o.push({x:n-FlowChart.LINK_DITSNANCE,y:s-FlowChart.LINK_DITSNANCE}),o.push({x:n-FlowChart.LINK_DITSNANCE,y:i.y}),o.push({x:i.x,y:i.y})}else if(t.top+FlowChart.LINK_DITSNANCE<e.top+e.height){a=t.left+t.width+(e.left-(t.left+t.width))/2;o.push({x:r.x,y:r.y}),o.push({x:r.x,y:t.top-FlowChart.LINK_DITSNANCE}),o.push({x:a,y:t.top-FlowChart.LINK_DITSNANCE}),o.push({x:a,y:i.y}),o.push({x:i.x,y:i.y})}else o.push({x:r.x,y:r.y}),o.push({x:i.x,y:i.y});else if(r.position==FlowChart.position.top&&i.position==FlowChart.position.right)if(t.left+t.width+FlowChart.LINK_DITSNANCE>e.left-FlowChart.LINK_DITSNANCE&&t.left-FlowChart.LINK_DITSNANCE<e.left+e.width+FlowChart.LINK_DITSNANCE&&t.top+t.height+FlowChart.LINK_DITSNANCE>e.top-FlowChart.LINK_DITSNANCE&&t.top-FlowChart.LINK_DITSNANCE<e.top+e.height+FlowChart.LINK_DITSNANCE)o.push({x:r.x,y:r.y}),o.push({x:i.x,y:i.y});else if(r.y-FlowChart.LINK_DITSNANCE>i.y&&r.x>e.left+e.width+FlowChart.LINK_DITSNANCE)o.push({x:r.x,y:r.y}),o.push({x:r.x,y:i.y}),o.push({x:i.x,y:i.y});else if(t.top-FlowChart.LINK_DITSNANCE>e.top+e.height+FlowChart.LINK_DITSNANCE){h=t.top+t.height+(e.top-(t.top+t.height))/2;o.push({x:r.x,y:r.y}),o.push({x:r.x,y:h}),o.push({x:e.left+e.width+FlowChart.LINK_DITSNANCE,y:h}),o.push({x:e.left+e.width+FlowChart.LINK_DITSNANCE,y:i.y}),o.push({x:i.x,y:i.y})}else if(t.top-FlowChart.LINK_DITSNANCE<e.top+e.height+FlowChart.LINK_DITSNANCE&&t.left-FlowChart.LINK_DITSNANCE<e.left+e.width+FlowChart.LINK_DITSNANCE){s=Math.min(t.top,e.top),c=Math.max(t.left+t.width,e.left+e.width);o.push({x:r.x,y:r.y}),o.push({x:r.x,y:s-FlowChart.LINK_DITSNANCE}),o.push({x:c+FlowChart.LINK_DITSNANCE,y:s-FlowChart.LINK_DITSNANCE}),o.push({x:c+FlowChart.LINK_DITSNANCE,y:i.y}),o.push({x:i.x,y:i.y})}else if(t.top+FlowChart.LINK_DITSNANCE<e.top+e.height){a=t.left+t.width+(e.left-(t.left+t.width))/2;o.push({x:r.x,y:r.y}),o.push({x:r.x,y:t.top-FlowChart.LINK_DITSNANCE}),o.push({x:a,y:t.top-FlowChart.LINK_DITSNANCE}),o.push({x:a,y:i.y}),o.push({x:i.x,y:i.y})}else o.push({x:r.x,y:r.y}),o.push({x:i.x,y:i.y});else if(r.position==FlowChart.position.right&&i.position==FlowChart.position.right)if(i.x<r.x)if(t.top-FlowChart.LINK_DITSNANCE>i.y||t.top+t.height+FlowChart.LINK_DITSNANCE<i.y)o.push({x:r.x,y:r.y}),o.push({x:t.left+t.width+FlowChart.LINK_DITSNANCE,y:r.y}),o.push({x:t.left+t.width+FlowChart.LINK_DITSNANCE,y:i.y}),o.push({x:i.x,y:i.y});else if(e.left+e.width+FlowChart.LINK_DITSNANCE<t.left-FlowChart.LINK_DITSNANCE){a=e.left+e.width+(t.left-(e.left+e.width))/2;o.push({x:r.x,y:r.y}),o.push({x:t.left+t.width+FlowChart.LINK_DITSNANCE,y:r.y}),o.push({x:t.left+t.width+FlowChart.LINK_DITSNANCE,y:t.top+t.height+FlowChart.LINK_DITSNANCE}),o.push({x:a,y:t.top+t.height+FlowChart.LINK_DITSNANCE}),o.push({x:a,y:i.y}),o.push({x:i.x,y:i.y})}else o.push({x:r.x,y:r.y}),o.push({x:i.x,y:i.y});else if(e.top-FlowChart.LINK_DITSNANCE>r.y||e.top+e.height+FlowChart.LINK_DITSNANCE<r.y){c=Math.max(t.left+t.width,e.left+e.width);o.push({x:r.x,y:r.y}),o.push({x:c+FlowChart.LINK_DITSNANCE,y:r.y}),o.push({x:c+FlowChart.LINK_DITSNANCE,y:i.y}),o.push({x:i.x,y:i.y})}else e.left+e.width-(t.left+t.width)>FlowChart.LINK_DITSNANCE?(o.push({x:r.x,y:r.y}),o.push({x:t.left+t.width+FlowChart.LINK_DITSNANCE,y:r.y}),o.push({x:t.left+t.width+FlowChart.LINK_DITSNANCE,y:e.top+e.height+FlowChart.LINK_DITSNANCE}),o.push({x:e.left+e.width+FlowChart.LINK_DITSNANCE,y:e.top+e.height+FlowChart.LINK_DITSNANCE}),o.push({x:e.left+e.width+FlowChart.LINK_DITSNANCE,y:i.y}),o.push({x:i.x,y:i.y})):(o.push({x:r.x,y:r.y}),o.push({x:i.x,y:i.y}));else if(r.position==FlowChart.position.left&&i.position==FlowChart.position.left)if(i.x>r.x)if(t.top-FlowChart.LINK_DITSNANCE>i.y||t.top+t.height+FlowChart.LINK_DITSNANCE<i.y)o.push({x:r.x,y:r.y}),o.push({x:t.left-FlowChart.LINK_DITSNANCE,y:r.y}),o.push({x:t.left-FlowChart.LINK_DITSNANCE,y:i.y}),o.push({x:i.x,y:i.y});else if(e.left-FlowChart.LINK_DITSNANCE>t.left+t.width+FlowChart.LINK_DITSNANCE){a=e.left+e.width+(t.left-(e.left+e.width))/2;o.push({x:r.x,y:r.y}),o.push({x:t.left-FlowChart.LINK_DITSNANCE,y:r.y}),o.push({x:t.left-FlowChart.LINK_DITSNANCE,y:t.top+t.height+FlowChart.LINK_DITSNANCE}),o.push({x:a,y:t.top+t.height+FlowChart.LINK_DITSNANCE}),o.push({x:a,y:i.y}),o.push({x:i.x,y:i.y})}else o.push({x:r.x,y:r.y}),o.push({x:i.x,y:i.y});else if(e.top-FlowChart.LINK_DITSNANCE>r.y||e.top+e.height+FlowChart.LINK_DITSNANCE<r.y){n=Math.min(t.left,e.left);o.push({x:r.x,y:r.y}),o.push({x:n-FlowChart.LINK_DITSNANCE,y:r.y}),o.push({x:n-FlowChart.LINK_DITSNANCE,y:i.y}),o.push({x:i.x,y:i.y})}else t.left-(e.left+e.width)>FlowChart.LINK_DITSNANCE?(o.push({x:r.x,y:r.y}),o.push({x:t.left-FlowChart.LINK_DITSNANCE,y:r.y}),o.push({x:t.left-FlowChart.LINK_DITSNANCE,y:e.top+e.height+FlowChart.LINK_DITSNANCE}),o.push({x:e.left-FlowChart.LINK_DITSNANCE,y:e.top+e.height+FlowChart.LINK_DITSNANCE}),o.push({x:e.left-FlowChart.LINK_DITSNANCE,y:i.y}),o.push({x:i.x,y:i.y})):(o.push({x:r.x,y:r.y}),o.push({x:i.x,y:i.y}));else if(r.position==FlowChart.position.top&&i.position==FlowChart.position.top)if(i.y<r.y)t.left-FlowChart.LINK_DITSNANCE>i.x||t.left+t.width+FlowChart.LINK_DITSNANCE<i.x?(o.push({x:r.x,y:r.y}),o.push({x:r.x,y:e.top-FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:e.top-FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:i.y})):e.top+e.height+FlowChart.LINK_DITSNANCE<t.top-FlowChart.LINK_DITSNANCE?(o.push({x:r.x,y:r.y}),o.push({x:r.x,y:t.top-FlowChart.LINK_DITSNANCE}),o.push({x:e.left-FlowChart.LINK_DITSNANCE,y:t.top-FlowChart.LINK_DITSNANCE}),o.push({x:e.left-FlowChart.LINK_DITSNANCE,y:e.top-FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:e.top-FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:i.y})):(o.push({x:r.x,y:r.y}),o.push({x:i.x,y:i.y}));else if(e.left-FlowChart.LINK_DITSNANCE>r.x||e.left+e.width+FlowChart.LINK_DITSNANCE<r.x){s=Math.min(t.top,e.top);o.push({x:r.x,y:r.y}),o.push({x:r.x,y:s-FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:s-FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:i.y})}else e.top+e.height-(t.top+t.height)>FlowChart.LINK_DITSNANCE?(o.push({x:r.x,y:r.y}),o.push({x:r.x,y:t.top-FlowChart.LINK_DITSNANCE}),o.push({x:t.left-FlowChart.LINK_DITSNANCE,y:t.top-FlowChart.LINK_DITSNANCE}),o.push({x:t.left-FlowChart.LINK_DITSNANCE,y:e.top-FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:e.top-FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:i.y})):(o.push({x:r.x,y:r.y}),o.push({x:i.x,y:i.y}));else if(r.position==FlowChart.position.bottom&&i.position==FlowChart.position.bottom)i.y<r.y?t.left-FlowChart.LINK_DITSNANCE>i.x||t.left+t.width+FlowChart.LINK_DITSNANCE<i.x?(o.push({x:r.x,y:r.y}),o.push({x:r.x,y:t.top+t.height+FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:t.top+t.height+FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:i.y})):e.top+e.height+FlowChart.LINK_DITSNANCE<t.top-FlowChart.LINK_DITSNANCE?(o.push({x:r.x,y:r.y}),o.push({x:r.x,y:t.top+t.height+FlowChart.LINK_DITSNANCE}),o.push({x:t.left-FlowChart.LINK_DITSNANCE,y:t.top+t.height+FlowChart.LINK_DITSNANCE}),o.push({x:t.left-FlowChart.LINK_DITSNANCE,y:t.top-FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:t.top-FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:i.y})):(o.push({x:r.x,y:r.y}),o.push({x:i.x,y:i.y})):e.left-FlowChart.LINK_DITSNANCE>r.x||e.left+e.width+FlowChart.LINK_DITSNANCE<r.x?(o.push({x:r.x,y:r.y}),o.push({x:r.x,y:e.top+e.height+FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:e.top+e.height+FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:i.y})):e.top+e.height-(t.top+t.height)>FlowChart.LINK_DITSNANCE?(o.push({x:r.x,y:r.y}),o.push({x:r.x,y:t.top+t.height+FlowChart.LINK_DITSNANCE}),o.push({x:e.left-FlowChart.LINK_DITSNANCE,y:t.top+t.height+FlowChart.LINK_DITSNANCE}),o.push({x:e.left-FlowChart.LINK_DITSNANCE,y:e.top+e.height+FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:e.top+e.height+FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:i.y})):(o.push({x:r.x,y:r.y}),o.push({x:i.x,y:i.y}));else if(r.position==FlowChart.position.left&&i.position==FlowChart.position.bottom)if(e.left+e.width+FlowChart.LINK_DITSNANCE>t.left-FlowChart.LINK_DITSNANCE&&e.left-FlowChart.LINK_DITSNANCE<t.left+t.width+FlowChart.LINK_DITSNANCE&&e.top+e.height+FlowChart.LINK_DITSNANCE>t.top-FlowChart.LINK_DITSNANCE&&e.top-FlowChart.LINK_DITSNANCE<t.top+t.height+FlowChart.LINK_DITSNANCE)o.push({x:r.x,y:r.y}),o.push({x:i.x,y:i.y});else if(i.y+FlowChart.LINK_DITSNANCE<r.y&&i.x<t.left-FlowChart.LINK_DITSNANCE)o.push({x:r.x,y:r.y}),o.push({x:i.x,y:r.y}),o.push({x:i.x,y:i.y});else if(e.top+e.height+FlowChart.LINK_DITSNANCE<t.top-FlowChart.LINK_DITSNANCE){h=e.top+e.height+(t.top-(e.top+e.height))/2;o.push({x:r.x,y:r.y}),o.push({x:t.left-FlowChart.LINK_DITSNANCE,y:r.y}),o.push({x:t.left-FlowChart.LINK_DITSNANCE,y:h}),o.push({x:i.x,y:h}),o.push({x:i.x,y:i.y})}else if(e.top+e.height+FlowChart.LINK_DITSNANCE>t.top-FlowChart.LINK_DITSNANCE&&e.left+e.width+FlowChart.LINK_DITSNANCE>t.left-FlowChart.LINK_DITSNANCE){l=Math.max(e.top+e.height,t.top+t.height),n=Math.min(e.left,t.left);o.push({x:r.x,y:r.y}),o.push({x:n-FlowChart.LINK_DITSNANCE,y:r.y}),o.push({x:n-FlowChart.LINK_DITSNANCE,y:l+FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:l+FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:i.y})}else if(e.top+e.height+FlowChart.LINK_DITSNANCE>t.top){a=e.left+e.width+(t.left-(e.left+e.width))/2;o.push({x:r.x,y:r.y}),o.push({x:a,y:r.y}),o.push({x:a,y:e.top+e.height+FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:e.top+e.height+FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:i.y})}else o.push({x:r.x,y:r.y}),o.push({x:i.x,y:i.y});else if(r.position==FlowChart.position.left&&i.position==FlowChart.position.top)if(e.left+e.width+FlowChart.LINK_DITSNANCE>t.left-FlowChart.LINK_DITSNANCE&&e.left-FlowChart.LINK_DITSNANCE<t.left+t.width+FlowChart.LINK_DITSNANCE&&e.top+e.height+FlowChart.LINK_DITSNANCE>t.top-FlowChart.LINK_DITSNANCE&&e.top-FlowChart.LINK_DITSNANCE<t.top+t.height+FlowChart.LINK_DITSNANCE)o.push({x:r.x,y:r.y}),o.push({x:i.x,y:i.y});else if(i.y>r.y&&i.x<t.left-FlowChart.LINK_DITSNANCE)o.push({x:r.x,y:r.y}),o.push({x:i.x,y:r.y}),o.push({x:i.x,y:i.y});else if(e.top-FlowChart.LINK_DITSNANCE>=t.top+t.height+FlowChart.LINK_DITSNANCE){h=e.top+e.height+(t.top-(e.top+e.height))/2;o.push({x:r.x,y:r.y}),o.push({x:t.left-FlowChart.LINK_DITSNANCE,y:r.y}),o.push({x:t.left-FlowChart.LINK_DITSNANCE,y:h}),o.push({x:i.x,y:h}),o.push({x:i.x,y:i.y})}else if(e.top-FlowChart.LINK_DITSNANCE<t.top+t.height+FlowChart.LINK_DITSNANCE&&e.left+e.width+FlowChart.LINK_DITSNANCE>t.left-FlowChart.LINK_DITSNANCE){s=Math.min(e.top,t.top),n=Math.min(e.left,t.left);o.push({x:r.x,y:r.y}),o.push({x:n-FlowChart.LINK_DITSNANCE,y:r.y}),o.push({x:n-FlowChart.LINK_DITSNANCE,y:s-FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:s-FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:i.y})}else if(e.top+FlowChart.LINK_DITSNANCE<t.top+t.height){a=e.left+e.width+(t.left-(e.left+e.width))/2;o.push({x:r.x,y:r.y}),o.push({x:a,y:r.y}),o.push({x:a,y:e.top-FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:e.top-FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:i.y})}else o.push({x:r.x,y:r.y}),o.push({x:i.x,y:i.y});else if(r.position==FlowChart.position.right&&i.position==FlowChart.position.bottom)if(e.left+e.width+FlowChart.LINK_DITSNANCE>t.left-FlowChart.LINK_DITSNANCE&&e.left-FlowChart.LINK_DITSNANCE<t.left+t.width+FlowChart.LINK_DITSNANCE&&e.top+e.height+FlowChart.LINK_DITSNANCE>t.top-FlowChart.LINK_DITSNANCE&&e.top-FlowChart.LINK_DITSNANCE<t.top+t.height+FlowChart.LINK_DITSNANCE)o.push({x:r.x,y:r.y}),o.push({x:i.x,y:i.y});else if(i.y<r.y&&i.x>t.left+t.width+FlowChart.LINK_DITSNANCE)o.push({x:r.x,y:r.y}),o.push({x:i.x,y:r.y}),o.push({x:i.x,y:i.y});else if(e.top+e.height+FlowChart.LINK_DITSNANCE<=t.top-FlowChart.LINK_DITSNANCE){h=e.top+e.height+(t.top-(e.top+e.height))/2;o.push({x:r.x,y:r.y}),o.push({x:t.left+t.width+FlowChart.LINK_DITSNANCE,y:r.y}),o.push({x:t.left+t.width+FlowChart.LINK_DITSNANCE,y:h}),o.push({x:i.x,y:h}),o.push({x:i.x,y:i.y})}else if(e.top+e.height+FlowChart.LINK_DITSNANCE>t.top-FlowChart.LINK_DITSNANCE&&e.left-FlowChart.LINK_DITSNANCE<t.left+t.width+FlowChart.LINK_DITSNANCE){l=Math.max(e.top+e.height,t.top+t.height),c=Math.max(e.left+e.width,t.left+t.width);o.push({x:r.x,y:r.y}),o.push({x:c+FlowChart.LINK_DITSNANCE,y:r.y}),o.push({x:c+FlowChart.LINK_DITSNANCE,y:l+FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:l+FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:i.y})}else if(e.top+e.height+FlowChart.LINK_DITSNANCE>t.top){a=t.left+t.width+(e.left-(t.left+t.width))/2;o.push({x:r.x,y:r.y}),o.push({x:a,y:r.y}),o.push({x:a,y:e.top+e.height+FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:e.top+e.height+FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:i.y})}else o.push({x:r.x,y:r.y}),o.push({x:i.x,y:i.y});else if(r.position==FlowChart.position.right&&i.position==FlowChart.position.top)if(e.left+e.width+FlowChart.LINK_DITSNANCE>t.left-FlowChart.LINK_DITSNANCE&&e.left-FlowChart.LINK_DITSNANCE<t.left+t.width+FlowChart.LINK_DITSNANCE&&e.top+e.height+FlowChart.LINK_DITSNANCE>t.top-FlowChart.LINK_DITSNANCE&&e.top-FlowChart.LINK_DITSNANCE<t.top+t.height+FlowChart.LINK_DITSNANCE)o.push({x:r.x,y:r.y}),o.push({x:i.x,y:i.y});else if(i.y-FlowChart.LINK_DITSNANCE>r.y&&i.x>t.left+t.width+FlowChart.LINK_DITSNANCE)o.push({x:r.x,y:r.y}),o.push({x:i.x,y:r.y}),o.push({x:i.x,y:i.y});else if(e.top-FlowChart.LINK_DITSNANCE>t.top+t.height+FlowChart.LINK_DITSNANCE){h=e.top+e.height+(t.top-(e.top+e.height))/2;o.push({x:r.x,y:r.y}),o.push({x:t.left+t.width+FlowChart.LINK_DITSNANCE,y:r.y}),o.push({x:t.left+t.width+FlowChart.LINK_DITSNANCE,y:h}),o.push({x:i.x,y:h}),o.push({x:i.x,y:i.y})}else if(e.top-FlowChart.LINK_DITSNANCE<t.top+t.height+FlowChart.LINK_DITSNANCE&&e.left-FlowChart.LINK_DITSNANCE<t.left+t.width+FlowChart.LINK_DITSNANCE){s=Math.min(e.top,t.top),c=Math.max(e.left+e.width,t.left+t.width);o.push({x:r.x,y:r.y}),o.push({x:c+FlowChart.LINK_DITSNANCE,y:r.y}),o.push({x:c+FlowChart.LINK_DITSNANCE,y:s-FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:s-FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:i.y})}else if(e.top+FlowChart.LINK_DITSNANCE<t.top+t.height){a=e.left+e.width+(t.left-(e.left+e.width))/2;o.push({x:r.x,y:r.y}),o.push({x:a,y:r.y}),o.push({x:a,y:e.top-FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:e.top-FlowChart.LINK_DITSNANCE}),o.push({x:i.x,y:i.y})}else o.push({x:r.x,y:r.y}),o.push({x:i.x,y:i.y});return o},FlowChart.private.prototype.handlerContextMenu=function(t){for(var e=this,r=t.target;this.chart.svgElement!=r&&!r.hasAttribute("data-shape-id");)r=r.parentNode;if(r.hasAttribute("data-shape-id")){t.preventDefault();for(var i=r.getAttribute("data-shape-id"),o=this.chart.element.getBoundingClientRect(),a=t.clientX-o.left,h=t.clientY-o.top,s=this.chart.getShape(i),l=this.chart.editor._.getMissingFields(s),n=this.chart.editor._.getExistedFields(s.id),c={},p=!1,d=0;d<l.length;d++){var u=l[d];p=!0,c[u]={text:u,icon:FlowChart.icon.addPlusNew(24,24,"#7A7A7A",0,0),onClick:function(t){e.chart.editor.addField(t.nodeId,t.item),e.chart.editor.edit(t.nodeId,t.item)}}}for(d=0;d<n.length;d++){var f=n[d];p=!0,c[f]={text:f,icon:FlowChart.icon.delete(24,24,"#7A7A7A",0,0),onClick:function(t){e.chart.editor.removeField(t.nodeId,t.item),delete s[t.item]}}}p&&(this.chart.selectedPortShape=null,this.chart.uiShapeContextMenu.show(a,h,i,c))}},FlowChart.private.prototype.handlerKeyup=function(t){var e=FlowChart.private.replaceRightLeftKeyCodes(t.code),r=t.key.toLowerCase(),i=this.keysPressed.indexOf(e);-1!=i&&(this.keysPressed.splice(i,1),this.updateMatchedShortcuts(t,void 0,r)),this.matchedShortcuts.includes("move_selected_nodes_left")&&this.matchedShortcuts.includes("move_selected_nodes_right")||this.chart.nodes._.stopMoving(FlowChart.direction.horizontal),this.matchedShortcuts.includes("move_selected_nodes_up")&&this.matchedShortcuts.includes("move_selected_nodes_down")||this.chart.nodes._.stopMoving(FlowChart.direction.vertical)},FlowChart.private.prototype.handlerKeydown=function(t){var e=t.key.toLowerCase();"shift"==e&&(this.chart.selectedShapes._.arrayBeforeShiftPressed=this.chart.selectedShapes.slice());var r=FlowChart.private.replaceRightLeftKeyCodes(t.code);if(this.keysPressed.includes(r)||(this.keysPressed.push(r),this.updateMatchedShortcuts(t,e,void 0)),t.target.hasAttribute("data-shape-field")){for(var i=t.target;i&&i.hasAttribute&&!i.hasAttribute("data-shape-id");)i=i.parentNode;if(i){var o=i.getAttribute("data-shape-id");if(this.chart.selectedShapes.contains(o)){if(13==t.keyCode){t.preventDefault();const e=window.getSelection(),r=e.getRangeAt(0);var a=document.getSelection().anchorNode.parentNode.nodeName.toUpperCase();switch(a){case"P":case"DIV":default:a="BR";break;case"SPAN":a="span";break;case"BR":a=NULL}const i=document.createElement(a);r.deleteContents(),r.insertNode(i),"BR"===a?(r.setStartAfter(i),r.setEndAfter(i)):(r.setStart(i,0),r.setEnd(i,0));const o=document.createTextNode("");r.insertNode(o),r.setStartBefore(o),r.setEndBefore(o),e.removeAllRanges(),e.addRange(r),t.stopPropagation()}t.target.value=t.target.innerHTML}}}},FlowChart.private.prototype.handlerInput=function(t){if(this.chart.editor._.hasActiveField()){for(var e=t.target;!e.hasAttribute("data-shape-id");)e=e.parentNode;var r=e.getAttribute("data-shape-id"),i=this.chart.getShape(r);if(i.canWidthFitContent||i.canHeightFitContent){for(var o=t.target;!o.hasAttribute||!o.hasAttribute("data-html-container");)o=o.parentNode;var a=this.chart._.getSizeOfHTML(o.innerHTML);i.canWidthFitContent&&("label"==i.type?this.chart.labels._.setWidth(i,a.width):this.chart.nodes._.setWidth(i,a.width)),i.canHeightFitContent&&("label"==i.type?this.chart.labels._.setHeight(i,a.height):this.chart.nodes._.setHeight(i,a.height))}}},FlowChart.private.prototype.handlerDblclick=function(t){for(var e=t.target;e!=this.chart.svgElement;){if(e.hasAttribute&&e.hasAttribute("data-shape-field")){for(var r=e.getAttribute("data-shape-field");!e.hasAttribute("data-shape-id");)e=e.parentNode;var i=e.getAttribute("data-shape-id");return void this.chart.editor.edit(i,r)}if(e.hasAttribute("data-link-from")){var o=e.getAttribute("data-link-from"),a=e.getAttribute("data-link-to"),h=this.chart.links.get(o,a),s=FlowChart.private.getFirstPointIndexByMousePosition(t,this.chart.svgElement,h);FlowChart.direction.horizontal;h.points[s].x==h.points[s+1].x&&FlowChart.direction.vertical;for(var l=0,n=0;n<s;n++){var c=h.points[n],p=h.points[n+1];l+=Math.hypot(p.x-c.x,p.y-c.y)}var d=this.chart.svgElement.createSVGPoint();d.x=t.clientX,d.y=t.clientY,d=d.matrixTransform(this.chart.svgElement.getScreenCTM().inverse());var u=(l+=Math.hypot(d.x-h.points[s].x,d.y-h.points[s].y))/(h.length/100),f={from:o,to:a,position:u,content:u};return f=this.chart.labels.add(f),void this.chart.editor.edit(f.id)}e=e.parentNode}},FlowChart.private.prototype.handlerMousemove=function(t){for(var e=t.target,r=null,i=null;e&&e!=this.element;){if(e&&e.hasAttribute){if(e.hasAttribute("data-link-from")){r=this.chart.links.get(e.getAttribute("data-link-from"),e.getAttribute("data-link-to")),i="link";break}if(e.hasAttribute("data-shape-id")){r=this.chart.getShape(e.getAttribute("data-shape-id")),i="node";break}if(e.hasAttribute("data-selector-shape-id")){r=this.chart.getShape(e.getAttribute("data-selector-shape-id")),i="node";break}if(e.hasAttribute("data-ports-n-id")){r=this.chart.nodes.get(e.getAttribute("data-ports-n-id")),i="node";break}if(e.hasAttribute("data-port-out")){r=this.chart.ports.getById(e.getAttribute("data-port-out")),i="port";break}if(e.hasAttribute("data-portshapebar-id")){r=e.getAttribute("data-portshapebar-id"),i="portshapebart";break}}e=e.parentNode}null!=this.mouseOverShapeType&&null==r?("node"==this.mouseOverShapeType?this.handlerMouseleaveOnShape(this.mouseOverShape):"port"==this.mouseOverShapeType||"link"==this.mouseOverShapeType||"portshapebart"==this.mouseOverShapeType&&this.handlerMouseleaveOnMiniShapeBar(this.mouseOverShape),this.mouseOverShape=null,this.mouseOverShapeType=null):JSON.stringify(this.mouseOverShape)!==JSON.stringify(r)&&(null!=r?"node"==i?("port"==this.mouseOverShapeType?this.handlerMouseleaveOnMiniShapeBar(`${this.mouseOverShape.shape.id},${this.mouseOverShape.id}`):"link"==this.mouseOverShapeType||"portshapebart"==this.mouseOverShapeType&&this.handlerMouseleaveOnMiniShapeBar(this.mouseOverShape),this.handlerMouseenterOnShape(t,r)):"port"==i?("node"==this.mouseOverShapeType||"link"==this.mouseOverShapeType||this.mouseOverShapeType,this.handlerMouseenterOnPortOut(t,r)):"link"==i?("port"==this.mouseOverShapeType||"node"==this.mouseOverShapeType||this.mouseOverShapeType,this.handlerMouseenterOnLink(t,r)):"portshapebart"==i&&("port"==this.mouseOverShapeType||"node"==this.mouseOverShapeType||this.mouseOverShapeType):this.mouseOverShape,this.mouseOverShape=r,this.mouseOverShapeType=i)},FlowChart.private.prototype.handlerTouchstartMousedown=function(t,e,r){for(var i=e.target;i&&i!=this.chart.element;){if(i&&i.classList&&i.classList.contains&&i.classList.contains("bfc-shapebar-move"))return void this.handlerTouchstartMousedownOnShapeBarMove(t,e,r,i);if(i&&i.hasAttribute&&i.hasAttribute("data-selector-dot-2"))return void this.handlerTouchstartMousedownOnResizeDot(t,e,r,i);if(i&&i.hasAttribute&&i.hasAttribute("data-shapebar-item-id"))return void this.handlerDownOnShapeBarItem(e,r,i);if(i&&i.hasAttribute&&i.hasAttribute("data-shape-id")){var o=this.chart.getShape(i.getAttribute("data-shape-id"));return void this.handlerTouchstartMousedownOnShape(e,r,o)}if(i&&i.hasAttribute&&i.hasAttribute("data-link-from")){var a=i.getAttribute("data-link-from"),h=i.getAttribute("data-link-to");return void this.handlerTouchstartMousedownOnLink(e,r,a,h)}if(i&&i.hasAttribute&&i.hasAttribute("data-port-out"))return void this.handlerTouchstartMousedownOnPortOut(e,i,r);i==this.chart.svgElement&&this.handlerTouchstartMousedownOnSvg(t,e,r,i),i=i.parentNode}},FlowChart.private.prototype.handlerTouchendClick=function(t){var e=t.target;if(this.chart.svgElement!=e)for(;e&&e.hasAttribute;){if(e.hasAttribute("data-shape-id")){var r=e.getAttribute("data-shape-id");return void this.handlerShapeClick(r,t)}if(e.hasAttribute("data-menu-item")){var i=e.getAttribute("data-menu-item");return void this.chart.uiMenuBar._.handlerClick(t,i,e)}if(e.hasAttribute("data-portshapebar-item-id")){for(var o=e.getAttribute("data-portshapebar-item-id");!e.hasAttribute("data-portshapebar-id");)e=e.parentNode;for(var a=e.getAttribute("data-portshapebar-id"),h=this.chart.ports.getById(a),s={templateId:o},l=this.chart.editor._.getMissingFields(s),n=0;n<l.length;n++)s[l[n]]=`[${l[n]}]`;this.chart._.snapshot(),s=this.chart.nodes.add(s);var c=this.chart.editor._.getExistedFields(s.id);this.chart.editor.edit(s.id,c[0]),FlowChart.algorithm.devinCreateNode(s,h,this.chart.options,FlowChart.ShapeTemplates[o]),this.chart.selectedShapes.clear(),this.chart.selectedShapes.add(s);var p=this.chart.ports.getByOpositeOfPosition(s.id,h.position)[0],d={from:`${h.shape.id},${h.id}`,to:`${p.shape.id},${p.id}`,templateId:"base"};return this.chart.links.add(d),void(this.chart.selectedPortShape=null)}e=e.parentNode}else this.chart.selectedShapes.clear()},FlowChart.private.prototype.handlerMouseenterOnLink=function(t,e){var r=e,i=FlowChart.private.getFirstPointIndexByMousePosition(t,this.chart.svgElement,r),o=FlowChart.direction.horizontal;r.points[i].x==r.points[i+1].x&&(o=FlowChart.direction.vertical),t.target.classList.remove("bfc-cursor-row-resize"),t.target.classList.remove("bfc-cursor-col-resize"),o==FlowChart.direction.vertical?t.target.classList.add("bfc-cursor-col-resize"):o==FlowChart.direction.horizontal&&t.target.classList.add("bfc-cursor-row-resize")},FlowChart.private.prototype.handlerMouseenterOnShape=function(t,e){this.chart.selectedPortShape=e},FlowChart.private.prototype.handlerMouseleaveOnLink=function(t){},FlowChart.private.prototype.handlerMouseleaveOnShape=function(t){this.chart.selectedPortShape=null},FlowChart.private.prototype.handlerMouseenterOnPortOut=function(t,e){this.chart.selectedPort=e},FlowChart.private.prototype.handlerMouseleaveOnPortOut=function(t,e,r){},FlowChart.private.prototype.handlerMouseleaveOnMiniShapeBar=function(t){this.chart.selectedPort=null,this.chart.selectedPortShape=null},FlowChart.UIMenu=class{_;element;constructor(t){this._=new FlowChart.UIMenu.private(t),this.element=null}init(){}hide(){null!=this.element&&(this.element.parentNode.removeChild(this.element),this.element=null)}show(t,e,r,i){var o=this;this.hide(),i||(i=this.menu);var a="";for(var h in i){var s=i[h].icon,l=i[h].text;void 0===s&&(s=FlowChart.icon[h]?FlowChart.icon[h](24,24,"#7A7A7A",0,0):""),"function"==typeof l&&(l=l()),"function"==typeof s&&(s=s()),a+=`<div data-item="${h}">${s}<span>&nbsp;&nbsp;${l}</span></div>`}if(""!=a){if(this.element=document.createElement("div"),this.element.className="bfc-chart-menu",this.element.style.left="-99999px",this.element.style.top="-99999px",this.element.innerHTML=a,this._.chart.element.appendChild(this.element),null==e){var n=FlowChart.private.menuPosition(t,this.element,this._.chart.svgElement);t=n.x,e=n.y}var c=t+45;this.element.style.left=c+"px",this.element.style.top=e+"px",this.element.style.left=c-this.element.offsetWidth+"px";var p=t-this.element.offsetWidth;FlowChart.animate(this.element,{opacity:0,left:c-this.element.offsetWidth},{opacity:1,left:p},300,FlowChart.anim.inOutPow);for(var d=this.element.getElementsByTagName("div"),u=0;u<d.length;u++){(h=d[u]).addEventListener("click",(function(t){var e,a=this.getAttribute("data-item");void 0===i[a].onClick||(e=i[a].onClick.call(o._.chart,{item:a,nodeId:r})),0!=e&&o.hide()}))}}}},FlowChart.UIMenu.private=class{chart;constructor(t){this.chart=t}},FlowChart.algorithm={},FlowChart.algorithm.devinCreateNode=function(t,e,r){switch(e.position){case FlowChart.position.topRight:t.x=e.shape.right+r.nodeSeparation+t.width/2,t.y=e.shape.top-r.nodeSeparation-t.height/2;break;case FlowChart.position.bottomRight:t.x=e.shape.right+r.nodeSeparation+t.width/2,t.y=e.shape.bottom+r.nodeSeparation+t.height/2;break;case FlowChart.position.bottomLeft:t.x=e.shape.left-r.nodeSeparation-t.width/2,t.y=e.shape.bottom+r.nodeSeparation+t.height/2;break;case FlowChart.position.topLeft:t.x=e.shape.left-r.nodeSeparation-t.width/2,t.y=e.shape.top-r.nodeSeparation-t.height/2;break;case FlowChart.position.left:t.x=e.shape.left-r.nodeSeparation-t.width/2,t.y=e.shape.y;break;case FlowChart.position.right:t.x=e.shape.right+r.nodeSeparation+t.width/2,t.y=e.shape.y;break;case FlowChart.position.top:t.x=e.shape.x,t.y=e.shape.top-r.nodeSeparation-t.height/2;break;case FlowChart.position.bottom:t.x=e.shape.x,t.y=e.shape.bottom+r.nodeSeparation+t.height/2}},FlowChart.private.prototype.handlerDownOnShapeBarItem=function(t,e,r){var i=this,o=r.getAttribute("data-shapebar-item-id"),a=this.chart.element.querySelector(`[data-shapebar-item-id="${o}"]`).querySelector("svg"),h=a.getBoundingClientRect(),s=i.chart.uiShapeBar.element.getBoundingClientRect(),l=FlowChart.private.getClientTouchesXY(t,0),n=h.width/(l.x-h.x),c=h.height/(l.y-h.y),p=function(u){var f=FlowChart.private.getClientTouchesXY(u,0);if(s.x<f.x&&s.x+s.width>f.x&&s.y<f.y&&s.y+s.height>f.y)!function(t){var e=i.chart.element.querySelector(".bfc-drag-inside-shapes-palette"),r=i.chart.svgElement.querySelector('[data-shape-id="drag-inside-canvas"]');e||((e=a.cloneNode(!0)).style.position="absolute",e.style.top=h.y+"px",e.style.left=h.x+"px",e.style.width=h.width+"px",e.style.height=h.height+"px",e.classList.add("bfc-drag-inside-shapes-palette"),i.chart.element.appendChild(e)),e.style.top=h.y+(t.y-l.y)+"px",e.style.left=h.x+(t.x-l.x)+"px",r&&r.parentNode.removeChild(r)}(f);else{var y=i.chart.svgElement.createSVGPoint();y.x=f.x,y.y=f.y,function(a){var h=i.chart.element.querySelector(".bfc-drag-inside-shapes-palette");if(!i.chart.svgElement.querySelector('[data-shape-id="drag-inside-canvas"]')){var s={templateId:o,x:a.x,y:a.y};FlowChart.private.setDefaultPropertiesToShape(s);var l=FlowChart.ShapeTemplates[s.templateId],u=l.width/n,f=l.height/c;isNaN(u)&&(u=r.offsetWidth/2),isNaN(f)&&(f=r.offsetHeight/2),s.x-=u-l.width/2,s.y-=f-l.height/2;for(var y=i.chart.editor._.getMissingFields(s),w=0;w<y.length;w++)s[y[w]]=`[${y[w]}]`;i.chart.nodes.add(s),s=i.chart.nodes.get(s.id),i.chart.element.removeEventListener(e.move,p),i.chart.element.removeEventListener(e.up,d),e.leave&&i.chart.element.removeEventListener(e.leave,d),i.handlerTouchstartMousedownOnShape(t,e,s)}h&&h.parentNode.removeChild(h)}(y.matrixTransform(i.chart.svgElement.getScreenCTM().inverse()))}},d=function(t){var r=i.chart.element.querySelector(".bfc-drag-inside-shapes-palette");r&&r.parentNode.removeChild(r);var a=i.chart.svgElement.querySelector('[data-shape-id="drag-inside-canvas"]');if(a){var h=FlowChart._getBox(a,i.nodes);a.parentNode.removeChild(a),i.addNode({templateId:o,x:h.x1,y:h.y1})}FlowChart.private.removeAlignmentLineElements(i.chart.svgElement),i.chart.element.removeEventListener(e.move,p),i.chart.element.removeEventListener(e.up,d),e.leave&&i.chart.element.removeEventListener(e.leave,d)};this.chart.element.addEventListener(e.move,p,{passive:!0}),this.chart.element.addEventListener(e.up,d)},FlowChart.private.prototype.handlerTouchstartMousedownOnLink=function(t,e,r,i){var o=this;this.chart.selectedPortShape=null,this.chart.selectedShapes.clear();var a=this.chart.links.get(r,i),h=this.chart.scale,s=JSON.parse(JSON.stringify(a.points)),l=FlowChart.private.getClientTouchesXY(t,0),n=FlowChart.private.getFirstPointIndexByMousePosition(t,this.chart.svgElement,a),c=FlowChart.direction.horizontal;a.points[n].x==a.points[n+1].x&&(c=FlowChart.direction.vertical);var p=function(t){var e=FlowChart.private.getClientTouchesXY(t,0);c==FlowChart.direction.horizontal?(a.points[n].y=(e.y-l.y+s[n].y*h)/h,a.points[n+1].y=(e.y-l.y+s[n+1].y*h)/h):c==FlowChart.direction.vertical&&(a.points[n].x=(e.x-l.x+s[n].x*h)/h,a.points[n+1].x=(e.x-l.x+s[n+1].x*h)/h)},d=function(t){o.chart.element.removeEventListener(e.move,p),o.chart.element.removeEventListener(e.up,d),e.leave&&o.chart.element.removeEventListener(e.leave,d)};this.chart.element.addEventListener(e.move,p,{passive:!0}),this.chart.element.addEventListener(e.up,d)},FlowChart.private.prototype.handlerTouchstartMousedownOnPortOut=function(t,e,r){var i=e.getAttribute("data-port-out"),o=FlowChart.private.getClientTouchesXY(t,0),a=this.chart.svgElement.createSVGPoint();a.x=o.x,a.y=o.y,a=a.matrixTransform(this.chart.svgElement.getScreenCTM().inverse());var h={id:`psuedo${this.chart.generateId()}`,templateId:"psuedo",x:a.x,y:a.y};this.chart.nodes.add(h);var s=this.chart.nodes.get(h.id);this.chart.links.add({from:i,to:h.id+",P1",templateId:"psuedo"}),this.handlerTouchstartMousedownOnShape(t,r,s)},FlowChart.private.prototype.handlerTouchstartMousedownOnShape=function(t,e,r){var i=this,o=this.chart.scale;r.selected||(i.matchedShortcuts.includes("select_multiple_nodes")||this.chart.selectedShapes.clear(),r.selected=!0);var a={};for(var h of this.chart.selectedShapes)a[h.id]={x:h.x*o,y:h.y*o};var s=FlowChart.private.getClientTouchesXY(t,0),l=0,n=0,c=null,p=null,d=function(t){p||"psuedo-node"==r.type||(p=i.chart.text()),i.chart.selectedPortShape=null,i.chart.selectedShapes._.hideUI();var e=FlowChart.private.getClientTouchesXY(t,0);for(var h of i.chart.selectedShapes)h.x=(e.x-s.x+a[h.id].x)/o,h.y=(e.y-s.y+a[h.id].y)/o;if("label"==r.type)l=(e.x-s.x)/o,n=(e.y-s.y)/o;else if("psuedo-node"==r.type){var d,u=i.chart.links.getByShape(r)[0],f=i.chart.ports.get(u.from),y=i.chart.ports.get(u.to);f.shape.top>y.y&&"P3"!=y.id?d="P3":f.shape.bottom<y.y&&"P1"!=y.id?d="P1":f.shape.bottom>y.y&&f.shape.top<y.y&&(f.shape.right<y.x&&"P4"!=y.id?d="P4":f.shape.left>y.x&&"P2"!=y.id&&(d="P2")),d&&(u.to=r.id+","+d);var w=Number.MAX_VALUE,C=null;for(var v of i.chart.ports)if(v.shape!=y.shape&&v.shape!=f.shape){var g=Math.hypot(v.x-r.x,v.y-r.y);g<w&&(w=g,C=v)}if(FlowChart.MAGNET_PORT>w){if(u.element.style.visibility="hidden",!c){var m=`${C.shape.id},${C.id}`;c=i.chart.links.add({from:u.from,to:m,templateId:"psuedo"})}}else u.element.style.visibility="",c&&(i.chart.links.remove(c),c=null)}"node"==r.type&&FlowChart.private.magnet(i.chart.selectedShapes.nodes(),i.chart.nodes,i.chart.svgElement,o)},u=function(t){"label"==r.type?(null==r.movex&&(r.movex=0),r.movex+=l,null==r.movey&&(r.movey=0),r.movey+=n):"psuedo-node"==r.type&&(i.chart.nodes.remove(r),c&&(c.templateId="base")),i.chart.selectedShapes._.showUI(),i.chart.selectedPortShape=r,FlowChart.private.removeAlignmentLineElements(i.chart.svgElement),p&&i.chart._.snapshot(p),i.chart.element.removeEventListener(e.move,d),i.chart.element.removeEventListener(e.up,u),e.leave&&i.chart.element.removeEventListener(e.leave,u)};this.chart.element.addEventListener(e.move,d,{passive:!0}),this.chart.element.addEventListener(e.up,u)},FlowChart.private.prototype.handlerTouchstartMousedownOnResizeDot=function(t,e,r,i){var o=this;if(this.mouseActions.includes("resize-shape")||(this.mouseActions.push("resize-shape"),this.updateMatchedShortcuts(e)),this.matchedShortcuts.includes("resize_node")){for(var a=i.parentNode;!a.hasAttribute("data-selector-shape-id");)a=a.parentNode;var h=a.getAttribute("data-selector-shape-id"),s=this.chart.getShape(h),l=s.left,n=s.top,c=s.width,p=s.height,d=this.chart.scale,u=FlowChart.private.getClientTouchesXY(e,0),f=null,y=function(t){f||(f=o.chart.text()),o.chart.selectedPortShape=null;var e=FlowChart.private.getClientTouchesXY(t,0),r=e.x-u.x,a=u.y-e.y;r/=d,a/=d;var h=function(t){var e=s.height,i=s.width,h=s.top,d=s.left;if("top"==t?o.matchedShortcuts.includes("centered_resize_shape")?(e=p+2*a,h=n-a):(e=p+a,h=n-a):"bottom"==t?o.matchedShortcuts.includes("centered_resize_shape")?(e=p-2*a,h=n+a):e=p-a:"left"==t?o.matchedShortcuts.includes("centered_resize_shape")?(i=c-2*r,d=l+r):(i=c-r,d=l+r):"right"==t&&(o.matchedShortcuts.includes("centered_resize_shape")?(i=c+2*r,d=l-r):i=c+r),"top"==t||"bottom"==t)o.matchedShortcuts.includes("maintain_aspect_ratio_resize_shape")&&(i=i/s.height*e,o.matchedShortcuts.includes("centered_resize_shape")&&(d-=(i-s.width)/2));else if("left"==t||"right"==t){if(o.matchedShortcuts.includes("maintain_aspect_ratio_resize_shape"))e=e/s.width*i,o.matchedShortcuts.includes("centered_resize_shape")&&(h-=(e-s.height)/2)}var u=FlowChart.ShapeTemplates[s.templateId];i>=u.minWidth&&i>=u.minHeight&&(s.width=i,s.height=e,s.x=d+s.width/2,s.y=h+s.height/2)},y=i.getAttribute("data-selector-dot-2");y==FlowChart.position.left?h("left"):y==FlowChart.position.right?h("right"):y==FlowChart.position.top?h("top"):y==FlowChart.position.bottom?h("bottom"):y==FlowChart.position.topLeft?(h("top"),h("left")):y==FlowChart.position.topRight?(h("top"),h("right")):y==FlowChart.position.bottomLeft?(h("bottom"),h("left")):y==FlowChart.position.bottomRight&&(h("bottom"),h("right")),FlowChart.private.magnetWhenResize(s,o.chart.nodes,o.chart.svgElement,i.getAttribute("data-selector-dot-2"),d)},w=function(t){var e=o.mouseActions.indexOf("resize-shape");-1!=e&&(o.mouseActions.splice(e,1),o.updateMatchedShortcuts(t)),FlowChart.private.removeAlignmentLineElements(o.chart.svgElement),f&&o.chart._.snapshot(f),o.chart.element.removeEventListener(r.move,y),o.chart.element.removeEventListener(r.up,w),r.leave&&o.chart.element.removeEventListener(r.leave,w)};this.chart.element.addEventListener(r.move,y,{passive:!0}),this.chart.element.addEventListener(r.up,w)}},FlowChart.private.prototype.handlerTouchstartMousedownOnSvg=function(t,e,r,i){var o=this;this.chart.uiShapeContextMenu.hide(),this.chart.selectedPortShape=null;var a=FlowChart.private.getViewBox(this.chart.svgElement),h=this.chart.scale,s=FlowChart.private.getClientTouchesXY(e,0),l=FlowChart.private.getClientTouchesXY(e,1),n={diffX:0,diffY:0,x0:s.x,y0:s.y,type:"pan",viewBoxLeft:a[0],viewBoxTop:a[1]};e.touches&&e.touches.length>1&&(n.type="pinch",n.dist=Math.sqrt((s.x-l.x)*(s.x-l.x)+(s.y-l.y)*(s.y-l.y))),"pan"==n.type&&o.chart.svgElement.classList.add("bfc-pan-cursor");var c=function(t){var e=FlowChart.private.getClientTouchesXY(t,0);if(n&&"pan"==n.type){n.diffX=e.x-n.x0,n.diffY=e.y-n.y0;var r=-n.diffY/h+n.viewBoxTop,i=-n.diffX/h+n.viewBoxLeft;a[0]=i,a[1]=r,o.setViewBox(a)}else if(n&&"pinch"==n.type){var s=FlowChart.private.getClientTouchesXY(t,1),l=Math.sqrt((e.x-s.x)*(e.x-s.x)+(e.y-s.y)*(e.y-s.y)),c=1+(l-n.dist)/(n.dist/100)/100;n.dist=l;var p=FlowChart.private.pinchMiddlePointInPercent(o.element,o.width(),o.height(),t);o.zoom(c,p)}},p=function(){"pan"==n.type&&o.chart.options.sticky,"pan"==n.type&&o.chart.svgElement.classList.remove("bfc-pan-cursor"),n=null,o.chart.svgElement.removeEventListener(r.move,c),o.chart.svgElement.removeEventListener(r.up,p),r.leave&&o.chart.svgElement.removeEventListener(r.leave,p)};this.chart.svgElement.addEventListener(r.move,c,{passive:!0}),this.chart.svgElement.addEventListener(r.up,p)},FlowChart.private.prototype.handlerTouchstartMousedownOnShapeBarMove=function(t,e,r,i){var o=this,a=FlowChart.private.getClientTouchesXY(e,0),h=this.chart.contentElement.getBoundingClientRect(),s=this.chart.uiShapeBar.element.getBoundingClientRect(),l=function(t){var e=FlowChart.private.getClientTouchesXY(t,0),r=e.x-a.x+s.left,i=e.y-a.y+s.top,l=r-h.left;l<FlowChart.MAGNET_WIN_PIXELS&&l>-FlowChart.MAGNET_WIN_PIXELS&&(r=h.left);var n=h.right-(r+s.width);n<FlowChart.MAGNET_WIN_PIXELS&&n>-FlowChart.MAGNET_WIN_PIXELS&&(r=h.right-s.width);var c=i-h.top;c<FlowChart.MAGNET_WIN_PIXELS&&c>-FlowChart.MAGNET_WIN_PIXELS&&(i=h.top);var p=h.bottom-(i+s.height);p<FlowChart.MAGNET_WIN_PIXELS&&p>-FlowChart.MAGNET_WIN_PIXELS&&(i=h.bottom-s.height),o.chart.uiShapeBar.element.style.left=r+"px",o.chart.uiShapeBar.element.style.top=i+"px";var d={left:r,top:i};sessionStorage.setItem("shapebar-position",JSON.stringify(d))},n=function(t){o.chart.element.removeEventListener(r.move,l),o.chart.element.removeEventListener(r.up,n),r.leave&&o.chart.element.removeEventListener(r.leave,n)};this.chart.element.addEventListener(r.move,l,{passive:!0}),this.chart.element.addEventListener(r.up,n)},FlowChart.private.prototype.handlerMousewheel=function(t){if(this.mouseActions.includes("wheel")||(this.mouseActions.push("wheel"),this.updateMatchedShortcuts(t)),this.matchedShortcuts.includes("zoom")){this.chart.selectedPort=null;var e=this,r=!1,i=this.chart.options.zoom.speed,o=this.chart.options.zoom.smooth,a=0,h=this.chart.scale,s=FlowChart.private.centerPointInPercent(this.chart.svgElement,t.pageX,t.pageY);var l=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,20)};t.preventDefault();var n=t.delta||t.wheelDelta;void 0===n&&(n=-t.detail),n=Math.max(-1,Math.min(1,n)),a+=-n*i,r||function t(){r=!0;var i=(a-h)/o;i>0?i++:i--,h+=i,e.zoom(1-i/12/50,s),parseInt(h)==parseInt(a)?r=!1:l(t)}()}},FlowChart.private.prototype.handlerShapeClick=function(t,e){},FlowChart.private.prototype.handlerResizeOnElement=function(){var t=FlowChart.private.getViewBox(this.chart.svgElement),e=this.chart.svgElement.getAttribute("width"),r=this.chart.svgElement.getAttribute("height"),i=e/t[2],o=r/t[3],a=i>o?o:i;this.chart.svgElement.setAttribute("width",this.chart.contentElement.offsetWidth),this.chart.svgElement.setAttribute("height",this.chart.contentElement.offsetHeight),t[2]=this.chart.contentElement.offsetWidth/a,t[3]=this.chart.contentElement.offsetHeight/a,this.chart.svgElement.setAttribute("viewBox",t.join(","))},FlowChart.private.prototype.addListeners=function(){if(!this.chart.options.readOnly){var t=this;new ResizeObserver((function(e){t.handlerResizeOnElement()})).observe(this.chart.svgElement),this.chart.element.addEventListener("touchstart",(function(e){t.touchendEnabledDevice=!0;t.handlerTouchstartMousedown(this,e,{move:"touchmove",up:"touchend",touchstart:"touchstart"})}),{passive:!0}),this.chart.element.addEventListener("touchend",(function(e){thattouchendEnabledDevice=!0,t.handlerTouchendClick(e)}),{passive:!0}),this.chart.element.addEventListener("mousedown",(function(e){if(!t.touchendEnabledDevice){t.handlerTouchstartMousedown(this,e,{move:"mousemove",up:"mouseup",leave:"mouseleave"})}t.touchendEnabledDevice&&setTimeout((function(){t.touchendEnabledDevice=!1}),2e3)})),this.chart.element.addEventListener("wheel",(function(e){t.handlerMousewheel(e)})),this.chart.element.addEventListener("mousemove",(function(e){t.handlerMousemove(e)})),this.chart.element.addEventListener("click",(function(e){t.touchendEnabledDevice||t.handlerTouchendClick(e)})),this.chart.element.addEventListener("dblclick",(function(e){t.handlerDblclick(e)})),document.addEventListener("keydown",(function(e){t.handlerKeydown(e)})),document.addEventListener("input",(function(e){t.handlerInput(e)})),document.addEventListener("keyup",(function(e){t.handlerKeyup(e)})),document.addEventListener("contextmenu",(function(e){t.handlerContextMenu(e)}))}},FlowChart.private.magnet=function(t,e,r,i){var o=FlowChart.MAGNET_MOVE_PIXELS/i;if(0!=t.length){var a=!1,h=!1;for(var s of(FlowChart.private.removeAlignmentLineElements(r),e)){var l=!1;for(var n of t)if(s==n){l=!0;break}if(!l)for(var n of t){if(Math.abs(n.left-s.left)<o&&n.left>=s.left-o&&n.left<=s.left+o){if(!a){var c=s.left+n.width/2-n.x;for(var p of t)p.x+=c;a=!0}if(Math.abs(n.left-s.left)<.5)(d=n.top)>(u=s.top)?d+=n.height:u+=s.height,FlowChart.private.addAlignmentLineElement(r,"bfc-line-1",s.left,d,s.left,u,i)}if(Math.abs(n.x-s.x)<o&&n.x>=s.x-o&&n.x<=s.x+o){if(!a){c=s.x-n.x;for(var p of t)p.x+=c;a=!0}if(Math.abs(n.x-s.x)<.5)(d=n.top)>(u=s.top)?d+=n.height:u+=s.height,FlowChart.private.addAlignmentLineElement(r,"bfc-line-c",s.x,d,s.x,u,i)}if(Math.abs(n.right-s.right)<o&&n.right>=s.right-o&&n.right<=s.right+o){if(!a){c=s.right-n.width/2-n.x;for(var p of t)p.x+=c;a=!0}var d,u;if(Math.abs(n.right-s.right)<.5)(d=n.top)>(u=s.top)?d+=n.height:u+=s.height,FlowChart.private.addAlignmentLineElement(r,"bfc-line-2",s.right,d,s.right,u,i)}if(Math.abs(n.top-s.top)<o&&n.top>=s.top-o&&n.top<=s.top+o){if(!h){c=s.top+n.height/2-n.y;for(var p of t)p.y+=c;h=!0}if(Math.abs(n.top-s.top)<.5)(f=n.left)>(y=s.left)?f+=n.width:y+=s.width,FlowChart.private.addAlignmentLineElement(r,"bfc-line-1",f,s.top,y,s.top,i)}if(Math.abs(n.y-s.y)<o&&n.y>=s.y-o&&n.y<=s.y+o){if(!h){c=s.y-n.y;for(var p of t)p.y+=c;h=!0}if(Math.abs(n.y-s.y)<.5)(f=n.left)>(y=s.left)?f+=n.width:y+=s.width,FlowChart.private.addAlignmentLineElement(r,"bfc-line-c",f,s.y,y,s.y,i)}if(Math.abs(n.bottom-s.bottom)<o&&n.bottom>=s.bottom-o&&n.bottom<=s.bottom+o){if(!h){c=s.bottom-n.height/2-n.y;for(var p of t)p.y+=c;h=!0}var f,y;if(Math.abs(n.bottom-s.bottom)<.5)(f=n.left)>(y=s.left)?f+=n.width:y+=s.width,FlowChart.private.addAlignmentLineElement(r,"bfc-line-2",f,s.bottom,y,s.bottom,i)}}}}},FlowChart.private.magnetWhenResize=function(t,e,r,i,o){var a=!1,h=!1,s=FlowChart.MAGNET_RESIZE_PIXELS/o;for(var l of(FlowChart.private.removeAlignmentLineElements(r),e))if(t!=l){if(Math.abs(t.left-l.left)<s&&t.left>=l.left-s&&t.left<=l.left+s)if(a||(t.width=t.right-l.left,t.x=l.left+t.width/2,a=!0),Math.abs(t.left-l.left)<.5)(p=t.top)>(d=l.top)?p+=t.height:d+=l.height,FlowChart.private.addAlignmentLineElement(r,"bfc-line-1",l.left,p,l.left,d,o);if(Math.abs(t.x-l.x)<s&&t.x>=l.x-s&&t.x<=l.x+s){if(i==FlowChart.position.left||i==FlowChart.position.topLeft||i==FlowChart.position.bottomLeft)a||(t.width=2*(t.right-l.x),t.x=l.x-t.width/2+t.width/2,a=!0);else if(!a){var n=2*(l.x-t.left),c=t.width;t.width=n,t.x+=(n-c)/2,a=!0}if(Math.abs(t.x-l.x)<.5)(p=t.top)>(d=l.top)?p+=t.height:d+=l.height,FlowChart.private.addAlignmentLineElement(r,"bfc-line-c",l.x,p,l.x,d,o)}if(Math.abs(t.right-l.right)<s&&t.right>=l.right-s&&t.right<=l.right+s){if(!a){n=l.right-t.left,c=t.width;t.width=n,t.x+=(n-c)/2,a=!0}var p,d;if(Math.abs(t.right-l.right)<.5)(p=t.top)>(d=l.top)?p+=t.height:d+=l.height,FlowChart.private.addAlignmentLineElement(r,"bfc-line-2",l.right,p,l.right,d,o)}if(Math.abs(t.top-l.top)<s&&t.top>=l.top-s&&t.top<=l.top+s)if(h||(t.height=t.bottom-l.top,t.y=l.top+t.height/2,h=!0),Math.abs(t.top-l.top)<.5)(y=t.left)>(w=l.left)?y+=t.width:w+=l.width,FlowChart.private.addAlignmentLineElement(r,"bfc-line-1",y,l.top,w,l.top,o);if(Math.abs(t.y-l.y)<s&&t.y>=l.y-s&&t.y<=l.y+s){if(i==FlowChart.position.top||i==FlowChart.position.topLeft||i==FlowChart.position.topRight)h||(t.height=2*(t.bottom-l.y),t.y=l.y-t.height/2+t.height/2,h=!0);else if(!h){var u=2*(l.y-t.top),f=t.height;t.height=u,t.y+=(u-f)/2,h=!0}if(Math.abs(t.y-l.y)<.5)(y=t.left)>(w=l.left)?y+=t.width:w+=l.width,FlowChart.private.addAlignmentLineElement(r,"bfc-line-c",y,l.y,w,l.y,o)}if(Math.abs(t.bottom-l.bottom)<s&&t.bottom>=l.bottom-s&&t.bottom<=l.bottom+s){if(!h){u=l.bottom-t.top,f=t.height;t.height=u,t.y+=(u-f)/2,h=!0}var y,w;if(Math.abs(t.bottom-l.bottom)<.5)(y=t.left)>(w=l.left)?y+=t.width:w+=l.width,FlowChart.private.addAlignmentLineElement(r,"bfc-line-2",y,l.bottom,w,l.bottom,o)}}},FlowChart.private.addAlignmentLineElement=function(t,e,r,i,o,a,h){var s=document.createElementNS("http://www.w3.org/2000/svg","line");return s.setAttribute("x1",r),s.setAttribute("x2",o),s.setAttribute("y1",i),s.setAttribute("y2",a),s.setAttribute("stroke-width",1/h),s.classList.add("bfc-alignment-line"),s.classList.add(e),t.appendChild(s),s},FlowChart.private.removeAlignmentLineElements=function(t){for(var e=t.querySelectorAll(".bfc-alignment-line"),r=0;r<e.length;r++)e[r].parentNode.removeChild(e[r])},FlowChart.anim=class{static inPow(t){return t<0?0:t>1?1:Math.pow(t,2)}static outPow(t){if(t<0)return 0;if(t>1)return 1;return-1*(Math.pow(t-1,2)+-1)}static inOutPow(t){if(t<0)return 0;if(t>1)return 1;if((t*=2)<1)return FlowChart.anim.inPow(t,2)/2;return-.5*(Math.pow(t-2,2)+-2)}static inSin(t){return t<0?0:t>1?1:1-Math.cos(t*(Math.PI/2))}static outSin(t){return t<0?0:t>1?1:Math.sin(t*(Math.PI/2))}static inOutSin(t){return t<0?0:t>1?1:-.5*(Math.cos(Math.PI*t)-1)}static inExp(t){return t<0?0:t>1?1:Math.pow(2,10*(t-1))}static outExp(t){return t<0?0:t>1?1:1-Math.pow(2,-10*t)}static inOutExp(t){return t<0?0:t>1?1:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,10*(-2*t+1)))}static inCirc(t){return t<0?0:t>1?1:-(Math.sqrt(1-t*t)-1)}static outCirc(t){return t<0?0:t>1?1:Math.sqrt(1-(t-1)*(t-1))}static inOutCirc(t){return t<0?0:t>1?1:t<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(2*t-2)*(2*t-2))+1)}static rebound(t){return t<0?0:t>1?1:t<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-1.5/2.75)*(t-1.5/2.75)+.75):t<2.5/2.75?1-(7.5625*(t-2.25/2.75)*(t-2.25/2.75)+.9375):1-(7.5625*(t-2.625/2.75)*(t-2.625/2.75)+.984375)}static inBack(t){return t<0?0:t>1?1:t*t*(2.70158*t-1.70158)}static outBack(t){return t<0?0:t>1?1:(t-1)*(t-1)*(2.70158*(t-1)+1.70158)+1}static inOutBack(t){return t<0?0:t>1?1:t<.5?4*t*t*(7.1898*t-2.5949)*.5:.5*((2*t-2)*(2*t-2)*(3.5949*(2*t-2)+2.5949)+2)}static impulse(t){var e=2*t;return e*Math.exp(1-e)}static expPulse(t){return Math.exp(-2*Math.pow(t,2))}},FlowChart.LinkCollection=class extends Array{_;constructor(t){super(),this._=new FlowChart.LinkCollection.private(t)}addRange(t){var e=this._.addRange(t);return this.push(...e),this._.chart._.changed(),e}add(t){return this.addRange([t])[0]}get(t,e){for(var r of this)if(r.from==t&&r.to==e)return r;return null}getByShape(t){var e=[];for(var r of this)r.fromNodeId!=t.id&&r.toNodeId!=t.id||e.push(r);return e}clear(){this._.remove(this)}removeRange(t){this._.remove(t,this)}remove(t){this._.remove(t,this)}last(){return this.length?this[this.length-1]:null}first(){return this.length?this[0]:null}},FlowChart.LinkCollection.private=class{chart;constructor(t){this.chart=t}addRange(t){var e=this,r=[];t||console.error("links are: "+t);for(var i=0;i<t.length;i++){var o=t[i];o.from||console.error("link.from not defined!"),o.to||console.error("link.to not defined!"),o.templateId||(o.templateId=FlowChart.DEFAULT_LINK_SHAPE_ID);var a={get(t,r,i){return"type"==r?"psuedo"==t.templateId?"psuedo-link":"link":"fromNodeId"==r?t.from.split(",")[0]:"toNodeId"==r?t.to.split(",")[0]:"fromPortId"==r?t.from.split(",")[1]:"toPortId"==r?t.to.split(",")[1]:"element"==r?e.getElement(i):Reflect.get(...arguments)},set(t,r,i,o){if(t[r]==i)return!0;if("to"==r||"from"==r||""==r||"templateId"==r){var a=e.chart.svgElement.querySelector(`[data-link-from="${t.from}"][data-link-to="${t.to}"]`);a&&a.parentNode.removeChild(a)}if("to"==r){var h=i.split(",");t.toNodeId=h[0],t.toPortId=h[1]}if(t[r]=i,"points"==r){for(var s=i,l=0;l<s.length;l++){var n=s[l],c=new Proxy(n,{set(r,i,a){for(var h of(r[i]=a,e.draw(o),e.chart.labels))h.from==t.from&&h.to==t.to&&FlowChart.private.setLabelXY(h,t);return!0}});s[l]=c}var p=new Proxy(s,{set:(r,i,o)=>(r[i]=o,e.draw(t),!0)});t[r]=p}for(var d of(e.draw(t),e.chart.labels))d.from==t.from&&d.to==t.to&&FlowChart.private.setLabelXY(d,t);return e.chart._.changed(),!0}},h=new Proxy(o,a);if(!h.d){for(var s=this.chart.getShape(h.fromNodeId),l=this.chart.getShape(h.toNodeId),n=this.chart.ports.get(h.fromNodeId,h.fromPortId),c=this.chart.ports.get(h.toNodeId,h.toPortId),p=FlowChart.private.linkFromTo(s,l,n,c),d=0;d<p.length;d++){var u=p[d],f=new Proxy(u,{set(t,r,i){for(var o of(t[r]=i,e.draw(h),e.chart.labels))o.from==h.from&&o.to==h.to&&FlowChart.private.setLabelXY(o,h);return!0}});p[d]=f}var y=new Proxy(p,{});h.points=y}this.draw(h),r.push(h)}return r}getElement(t){return this.chart.svgElement.querySelector(`[data-link-from="${t.from}"][data-link-to="${t.to}"]`)}remove(t,e){var r=!1,i=[];if(Array.isArray(t))i=t;else if(t.type)i=[t];else for(var o of e)o.fromNodeId!=t&&o.toNodeId!=t||i.push(o);for(var o of i)for(var a=e.length-1;a>=0;a--)if(e[a].from==o.from&&e[a].to==o.to){var h=o.element;for(var s of(h&&h.parentNode.removeChild(h),this.chart.labels))s.from==o.from&&s.to==o.to&&this.chart.labels.remove(s);r=!0,e.splice(a,1);break}r&&this.chart._.changed()}draw(t){if(r=this.chart.svgElement.querySelector(`[data-link-from="${t.from}"][data-link-to="${t.to}"]`)){var e=FlowChart.private.roundPathCorners(t.points,FlowChart.LINK_ROUNDED_CORENERS,!1);r.querySelector(".bfc-link-path").setAttribute("d",e),r.querySelector(".bfc-link-invisible").setAttribute("d",e),r.querySelector(".bfc-link-arrow").setAttribute("d",FlowChart.private.arrow(t.points))}else{var r;(r=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("data-link-from",t.from),r.setAttribute("data-link-to",t.to),r.classList.add("bfc-link");var i=FlowChart.LinkTemplates[t.templateId];r.innerHTML=i.svg(t),this.chart.svgElement.querySelector("[data-shapes-and-links]").appendChild(r)}for(var o=0,a=0;a<t.points.length-1;a++){var h=t.points[a],s=t.points[a+1];o+=Math.hypot(s.x-h.x,s.y-h.y)}t.length=o}},FlowChart.PortCollection=class{_;constructor(t){this._=new FlowChart.PortCollection.private(t)}[Symbol.iterator](){var t=this._.chart.nodes,e=this,r=0,i=0,o=!1,a=null;return{next(){var h;if(r>t.length-1)o=!0;else{var s=t[r];null==a&&(a=Object.keys(FlowChart.ShapeTemplates[s.templateId].ports)),h=e.get(s.id,a[i]),++i>a.length-1&&(a=null,i=0,r++)}return{value:h,done:o}}}}getById(t){var e=t.split(","),r=e[0],i=e[1];return this.get(r,i)}getElement(t){return this._.chart.svgElement.querySelector(`[data-ports-n-id="${t}"]`)}getByPosition(t,e){var r=FlowChart.ShapeTemplates[t.templateId],i=[];for(var o in r.ports){FlowChart.private.getPortPosition(r.ports[o],r)==e&&i.push(this.get(t.id,o))}return i}getByOpositeOfPosition(t,e){var r=null;switch(e){case FlowChart.position.topRight:r=FlowChart.position.bottomLeft;break;case FlowChart.position.bottomRight:r=FlowChart.position.topLeft;break;case FlowChart.position.bottomLeft:r=FlowChart.position.topRight;break;case FlowChart.position.topLeft:r=FlowChart.position.bottomRight;break;case FlowChart.position.left:r=FlowChart.position.right;break;case FlowChart.position.right:r=FlowChart.position.left;break;case FlowChart.position.top:r=FlowChart.position.bottom;break;case FlowChart.position.bottom:r=FlowChart.position.top}var i=this._.chart.nodes.get(t);return this.getByPosition(i,r)}get(t,e){if(null==e&&"string"==typeof t){var r=t.split(",");t=r[0],e=r[1]}var i=this._.chart.getShape(t),o=FlowChart.ShapeTemplates[i.templateId],a=FlowChart.private.getPortPosition(o.ports[e],o),h=JSON.parse(JSON.stringify(o.ports[e]));if(!h)return null;h.id=e;var s=h.x/(FlowChart.ShapeTemplates[i.templateId].width/100),l=h.y/(FlowChart.ShapeTemplates[i.templateId].height/100);return h.x=s*(i.width/100),h.y=l*(i.height/100),h.x+=i.left,h.y+=i.top,h.position=a,h.shape=i,h}},FlowChart.PortCollection.private=class{chart;constructor(t){this.chart=t}},FlowChart.css=function(){return'<style data-bfc-styles>.bfc-dark ::-webkit-scrollbar,.bfc-light ::-webkit-scrollbar{width:15px;height:15px}.bfc-dark ::-webkit-scrollbar-corner{background:#1e1e1e}.bfc-dark ::-webkit-scrollbar-track{background:#1e1e1e;border-left:1px solid #333;border-top:1px solid #333}.bfc-dark ::-webkit-scrollbar-thumb{background:#424242}.bfc-dark ::-webkit-scrollbar-thumb:hover{background:#4f4f4f}.bfc-dark ::-webkit-scrollbar-thumb:active{background:#5e5e5e}.bfc-light ::-webkit-scrollbar-corner{background:#fff}.bfc-light ::-webkit-scrollbar-track{background:#fff;border-left:1px solid #ddd;border-top:1px solid #ddd}.bfc-light ::-webkit-scrollbar-thumb{background:#c1c1c1}.bfc-light ::-webkit-scrollbar-thumb:hover{background:#929292}.bfc-light ::-webkit-scrollbar-thumb:active{background:#666}.bfc-content{overflow:hidden;position:relative}.bfc-canvas{overflow:auto;height:100%}.bfc-svg{width:100%;height:100%;display:block}.bfc-light .bfc-svg{background-color:#fff}.bfc-dark .bfc-svg{background-color:#1e1e1e}.bfc-dark,.bfc-light{font:18px "Segoe UI",Arial,sans-serif}.bfc-light{color:#333}.bfc-dark{color:#cfcfcf}.bfc-menubar{display:flex;justify-content:space-between;line-height:0}.bfc-light .bfc-menubar,.bfc-light .bfc-statusbar{background-color:#ddd}.bfc-dark .bfc-menubar,.bfc-dark .bfc-statusbar{background-color:#3c3c3c}.bfc-menu-item{display:inline-block}.bfc-shapebar{padding:0 3px 3px 3px;position:absolute;top:50px;left:10px;max-width:60px;z-index:200}.bfc-dark .bfc-shapebar{background-color:#3c3c3c}.bfc-light .bfc-shapebar{background-color:#ddd}.bfc-shapebar-shapes{justify-content:flex-start;flex-wrap:wrap;display:flex;flex-wrap:wrap}.bfc-shapebar-shapes>[data-shapebar-item-id]{padding:7px 0;font-size:13px;text-align:center;user-select:none;cursor:move;flex:1 1 50px;min-height:50px;display:flex;flex-wrap:nowrap;flex-direction:column;justify-content:center}.bfc-shapebar-move{cursor:move;height:20px;width:100%;padding-bottom:7px}.bfc-dark .bfc-shapebar-move{background-color:#3c3c3c}.bfc-light .bfc-shapebar-move{background-color:#ddd}.bfc-shapebar-move-line{border-top:1px solid #8b8b8b;border-bottom:1px solid #8b8b8b;height:5px;margin-top:5px}.bfc-dark .bfc-shapebar-shapes>[data-shapebar-item-id]:hover{background-color:#252526}.bfc-light .bfc-shapebar-shapes>[data-shapebar-item-id]:hover{background-color:#f3f3f3}.bfc-alignment-line{stroke:#ffca28}.bfc-line-1,.bfc-line-2{stroke-dasharray:10 20}.bfc-line-c{stroke-dasharray:15 15 2 15}.bfc-n-selector .bfc-selector-rect{fill:none;stroke:#ffca28}[data-selector-dot-1]{fill:#ffca28;stroke:#ffca28;stroke-width:1;transform-origin:center;transform-box:fill-box}.bfc-c-resizer-dot{stroke:#ffca28;stroke-width:2}.bfc-light .bfc-c-resizer-dot{fill:#fff}.bfc-dark .bfc-c-resizer-dot{fill:#1e1e1e}[data-selector-dot-2=left]{cursor:ew-resize}[data-selector-dot-2=topRight]{cursor:nwse-resize}[data-selector-dot-2=top]{cursor:ns-resize}[data-selector-dot-2=topRight]{cursor:nesw-resize}[data-selector-dot-2=right]{cursor:ew-resize}[data-selector-dot-2=bottomRight]{cursor:nwse-resize}[data-selector-dot-2=bottom]{cursor:ns-resize}[data-selector-dot-2=bottomLeft]{cursor:nesw-resize}[data-selector-dot-2=topLeft]{cursor:nwse-resize}[data-selector-dot-2]{pointer-events:all;visibility:hidden;transform-origin:center;transform-box:fill-box}[data-shape-id]{cursor:move}.bfc-flex-center{display:flex;justify-content:center;align-items:center;height:100%;color:#fff;text-align:center}.bfc-port-dot{cursor:default}.bfc-port-dot circle{stroke:#f57c00;stroke-width:1}.bfc-light .bfc-port-dot{fill:#fff}.bfc-dark .bfc-port-dot{fill:#151515}.bfc-port-dot rect{opacity:0}.bfc-html{user-select:none}.bfc-pan-cursor{cursor:move}.bfc-statusbar{padding:7px}.bfc-light .bfc-statusbar{background-color:#ddd}.bfc-dark .bfc-statusbar{background-color:#3c3c3c}.bfc-shapebar-svg{margin:0 5px;max-width:50px}.bfc-cursor-row-resize{cursor:row-resize}.bfc-cursor-col-resize{cursor:col-resize}.bfc-link-path{stroke-width:3;fill:none;stroke:#aeaeae;pointer-events:stroke}.bfc-link-arrow{stroke-width:1;fill:#aeaeae;stroke:none;pointer-events:all}.bfc-link-invisible{stroke-width:10;fill:none;stroke:#aeaeae;stroke-miterlimit:10;visibility:hidden;pointer-events:stroke}.bfc-link-resizer{cursor:row-resize}.bfc-n-ports>g{transform-box:fill-box;transform-origin:center}.bfc-port-out{opacity:.3}.bfc-port-out:hover{opacity:1}.bfc-portshapebar{position:absolute;top:500px;left:100px;justify-content:flex-start;flex-wrap:wrap;display:flex;gap:7px;padding:7px;border-radius:7px}.bfc-portshapebar>[data-portshapebar-item-id]{text-align:center;user-select:none;flex:1 1 25px;display:flex;flex-wrap:nowrap;flex-direction:column;justify-content:center;filter:grayscale(1)}.bfc-portshapebar>[data-portshapebar-item-id].bfc-portshapebar-selected,.bfc-portshapebar>[data-portshapebar-item-id]:hover{filter:grayscale(0)}.bfc-portshapebar-svg{width:25px}.bfc-light .bfc-portshapebar{background-color:#ddd}.bfc-dark .bfc-portshapebar{background-color:#3c3c3c}[contenteditable]{outline:0 solid transparent}.bfc-light .bfc-label{fill:#fff}.bfc-dark .bfc-label{fill:#1e1e1e}.bfc-ports-invisible .bfc-port-out{visibility:hidden}.bfc-ports-invisible .bfc-port-out.bfc-ports-visible{visibility:visible;opacity:1}.bfc-color-item{border-radius:3px;color:#fff;display:flex;justify-content:center;align-items:center;user-select:none}.bfc-menu-item{display:inline-block}.bfc-menu-item>*{margin:7px;width:30px;height:30px;vertical-align:middle}.bfc-dark .bfc-menu-item-selected,.bfc-dark :not(.bfc-disabled-grayscale):not(.bfc-disabled-opacity).bfc-menu-item:hover{background-color:#252526}.bfc-light .bfc-menu-item-selected,.bfc-light :not(.bfc-disabled-grayscale):not(.bfc-disabled-opacity).bfc-menu-item:hover{background-color:#fff}.bfc-disabled-opacity{opacity:.3}.bfc-disabled-grayscale{filter:grayscale(1)}.bfc-chart-menu{opacity:0;display:inline-block;position:absolute;text-align:left;user-select:none;min-width:270px;box-shadow:rgba(0,0,0,.2) 0 4px 8px 0,rgba(0,0,0,.19) 0 6px 20px 0;font:13px/28px Helvetica,"Segoe UI",Arial,sans-serif;border-radius:10px}.bfc-chart-menu>div:hover img{filter:invert(100%)}.bfc-chart-menu [data-item]{text-align:start;padding:7px 10px}.bfc-dark .bfc-chart-menu [data-item]{background-color:#252526;color:#acacac;border-bottom:1px solid #333}.bfc-dark .bfc-chart-menu [data-item]:hover{background-color:#094771!important;color:#fff!important}.bfc-dark .bfc-chart-menu [data-item]:hover svg{filter:brightness(0) invert(1)}.bfc-light .bfc-chart-menu [data-item]{background-color:#fff;color:#333;border-bottom:1px solid #c7c7c7}.bfc-light .bfc-chart-menu [data-item]:hover{background-color:#0074e8!important;color:#fff!important}.bfc-light .bfc-chart-menu [data-item]:hover svg{filter:brightness(0) invert(1)}.bfc-chart-menu [data-item] svg{vertical-align:middle}.bfc-chart-menu [data-item]:first-child{border-top-left-radius:7px;border-top-right-radius:7px}.bfc-chart-menu [data-item]:last-child{border-bottom-width:0;border-bottom-style:none;border-bottom-left-radius:7px;border-bottom-right-radius:7px}</style>'},FlowChart.events=class{static topics={};static on(t,e,r){Array.isArray(FlowChart.events.topics[t])||(FlowChart.events.topics[t]=[]),FlowChart.events.topics[t].push({listener:e,uid:r})}static removeAll(t){Array.isArray(topics[t])||(FlowChart.events.topics[t]=[]),FlowChart.events.topics[t]=[]}static has(t,e){if(topics[t]&&Array.isArray(FlowChart.events.topics[t])&&FlowChart.events.topics[t].length>0){if(FlowChart.isNEU(e))return!0;for(var r=0;r<FlowChart.events.topics[t].length;r++)if(FlowChart.events.topics[t][r].uid==e)return!0}return!1}static removeForEventId(t){for(var e in FlowChart.events.topics)if(Array.isArray(FlowChart.events.topics[e]))for(var r=FlowChart.events.topics[e].length-1;r>=0;r--)FlowChart.events.topics[e][r].uid==t&&FlowChart.events.topics[e].splice(r,1)}static publish(t,e){if(FlowChart.events.topics[t]){for(var r=[],i=0;i<FlowChart.events.topics[t].length;i++){var o=FlowChart.events.topics[t][i];null!=o._&&null!=o._.uid&&o._.uid!=e[0]._.uid||r.push(o.listener)}if(r.length>0){var a=!0;for(i=0;i<r.length&&(1==e.length?a=r[i](e[0])&&a:2==e.length?a=r[i](e[0],e[1])&&a:3==e.length?a=r[i](e[0],e[1],e[2])&&a:4==e.length?a=r[i](e[0],e[1],e[2],e[3])&&a:5==e.length&&(a=r[i](e[0],e[1],e[2],e[3],e[4])&&a),!1!==a);i++);return a}}}},FlowChart.icon=class{static fit(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 16 16">\n                    <path fill="${r}" d="m 4 1 c -1.660156 0 -3 1.339844 -3 3 v 8 c 0 1.660156 1.339844 3 3 3 h 8 c 1.660156 0 3 -1.339844 3 -3 v -8 c 0 -1.660156 -1.339844 -3 -3 -3 z m 0 2 h 3.011719 v 2 h -2 v 2 h -2 l -0.011719 -3 c 0 -0.128906 0.027344 -0.253906 0.074219 -0.375 c 0.003906 -0.003906 0.003906 -0.007812 0.007812 -0.011719 c 0.046875 -0.117187 0.117188 -0.21875 0.203125 -0.308593 c 0.007813 -0.007813 0.011719 -0.011719 0.019532 -0.019532 c 0.089843 -0.085937 0.191406 -0.15625 0.308593 -0.203125 c 0.003907 -0.003906 0.007813 -0.007812 0.015625 -0.007812 c 0.117188 -0.046875 0.242188 -0.074219 0.371094 -0.074219 z m 5 0 h 3.011719 c 0.125 0 0.253906 0.027344 0.371093 0.074219 c 0.003907 0.003906 0.011719 0.003906 0.015626 0.007812 c 0.113281 0.046875 0.21875 0.117188 0.304687 0.203125 c 0.007813 0.007813 0.015625 0.011719 0.019531 0.019532 c 0.089844 0.089843 0.160156 0.191406 0.207032 0.308593 c 0 0.003907 0.003906 0.007813 0.007812 0.015625 c 0.046875 0.117188 0.070312 0.242188 0.074219 0.371094 l -0.011719 3 h -2 v -2 h -2 z m -5.988281 6 h 2 v 2 h 2 v 2 h -3.011719 c -0.128906 0 -0.253906 -0.027344 -0.375 -0.074219 c -0.003906 -0.003906 -0.007812 -0.003906 -0.011719 -0.007812 c -0.117187 -0.046875 -0.21875 -0.117188 -0.308593 -0.203125 c -0.007813 -0.007813 -0.011719 -0.011719 -0.019532 -0.019532 c -0.085937 -0.089843 -0.15625 -0.191406 -0.203125 -0.308593 c -0.003906 -0.003907 -0.007812 -0.007813 -0.007812 -0.015625 c -0.046875 -0.117188 -0.074219 -0.242188 -0.074219 -0.371094 z m 7.988281 0 h 2 l 0.011719 3 c -0.003907 0.128906 -0.027344 0.253906 -0.074219 0.375 c -0.003906 0.003906 -0.003906 0.007812 -0.007812 0.011719 c -0.046876 0.117187 -0.117188 0.21875 -0.203126 0.308593 c -0.007812 0.007813 -0.015624 0.011719 -0.019531 0.019532 c -0.089843 0.085937 -0.195312 0.15625 -0.308593 0.203125 c -0.003907 0.003906 -0.011719 0.007812 -0.015626 0.007812 c -0.117187 0.046875 -0.246093 0.074219 -0.371093 0.074219 h -3.011719 v -2 h 2 z m 0 0" fill="#2e3436"/>\n                </svg>`}static undo(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                    <path fill="${r}" d="M6.507,17.508l20.963,-0.008c0.828,-0 1.5,-0.673 1.5,-1.501c-0.001,-0.827 -0.673,-1.499 -1.501,-1.499l-20.975,0.008c0.088,-0.119 0.188,-0.231 0.298,-0.334c0,0 9.705,-9.079 9.705,-9.079c0.605,-0.565 0.636,-1.515 0.071,-2.12c-0.566,-0.604 -1.516,-0.636 -2.12,-0.07c-0,-0 -5.9,5.519 -9.705,9.078c-1.118,1.045 -1.749,2.509 -1.743,4.038c0.006,1.53 0.649,2.989 1.774,4.025c3.848,3.543 9.829,9.05 9.829,9.05c0.609,0.56 1.559,0.521 2.119,-0.088c0.561,-0.609 0.522,-1.558 -0.087,-2.119c-0,-0 -5.98,-5.507 -9.828,-9.05c-0.111,-0.102 -0.211,-0.213 -0.3,-0.331Z"/>\n                </svg>`}static redo(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                    <path fill="${r}" d="M25.468,14.508l-20.967,-0.008c-0.828,-0 -1.501,0.672 -1.501,1.499c-0,0.828 0.672,1.501 1.499,1.501l21.125,0.009c-0.107,0.159 -0.234,0.306 -0.377,0.439c-3.787,3.502 -9.68,8.951 -9.68,8.951c-0.608,0.562 -0.645,1.511 -0.083,2.119c0.562,0.608 1.512,0.645 2.12,0.083c-0,0 5.892,-5.448 9.68,-8.95c1.112,-1.029 1.751,-2.47 1.766,-3.985c0.014,-1.515 -0.596,-2.968 -1.688,-4.018l-9.591,-9.221c-0.596,-0.574 -1.547,-0.556 -2.121,0.041c-0.573,0.597 -0.555,1.547 0.042,2.121l9.591,9.221c0.065,0.063 0.127,0.129 0.185,0.198Z"/>\n                </svg>`}static cut(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                    <path fill="${r}" d="M16,13.879l-10.939,-10.94c-0.586,-0.585 -1.536,-0.585 -2.122,0c-0.585,0.586 -0.585,1.536 0,2.122l10.94,10.939l-3.567,3.566c-0.692,-0.361 -1.478,-0.566 -2.312,-0.566c-2.76,0 -5,2.24 -5,5c0,2.76 2.24,5 5,5c2.76,0 5,-2.24 5,-5c0,-0.834 -0.205,-1.62 -0.566,-2.312l3.566,-3.567l3.566,3.567c-0.361,0.692 -0.566,1.478 -0.566,2.312c0,2.76 2.24,5 5,5c2.76,0 5,-2.24 5,-5c0,-2.76 -2.24,-5 -5,-5c-0.834,0 -1.62,0.205 -2.312,0.566l-3.567,-3.566l10.94,-10.939c0.585,-0.586 0.585,-1.536 -0,-2.122c-0.586,-0.585 -1.536,-0.585 -2.122,0l-10.939,10.94Z"/>\n                </svg>`}static copy(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32"  style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;" >\n                    <path fill="${r}" d="M9.101,7l8.899,0c1.857,-0 3.637,0.737 4.95,2.05c1.313,1.313 2.05,3.093 2.05,4.95l0,8.899c0.953,-0.195 1.837,-0.665 2.536,-1.363c0.937,-0.938 1.464,-2.21 1.464,-3.536c0,-2.977 0,-7.023 0,-10c0,-1.326 -0.527,-2.598 -1.464,-3.536c-0.938,-0.937 -2.21,-1.464 -3.536,-1.464c-2.977,0 -7.023,0 -10,0c-1.326,-0 -2.598,0.527 -3.536,1.464c-0.698,0.699 -1.168,1.583 -1.363,2.536Z"/>\n                    <path fill="${r}" d="M23,14c0,-1.326 -0.527,-2.598 -1.464,-3.536c-0.938,-0.937 -2.21,-1.464 -3.536,-1.464c-2.977,0 -7.023,0 -10,0c-1.326,-0 -2.598,0.527 -3.536,1.464c-0.937,0.938 -1.464,2.21 -1.464,3.536c0,2.977 0,7.023 0,10c-0,1.326 0.527,2.598 1.464,3.536c0.938,0.937 2.21,1.464 3.536,1.464c2.977,-0 7.023,-0 10,-0c1.326,0 2.598,-0.527 3.536,-1.464c0.937,-0.938 1.464,-2.21 1.464,-3.536l0,-10Zm-15,10l10,0c0.552,0 1,-0.448 1,-1c0,-0.552 -0.448,-1 -1,-1l-10,0c-0.552,0 -1,0.448 -1,1c0,0.552 0.448,1 1,1Zm0,-4l10,0c0.552,0 1,-0.448 1,-1c0,-0.552 -0.448,-1 -1,-1l-10,0c-0.552,0 -1,0.448 -1,1c0,0.552 0.448,1 1,1Zm0,-4l10,0c0.552,0 1,-0.448 1,-1c0,-0.552 -0.448,-1 -1,-1l-10,0c-0.552,0 -1,0.448 -1,1c0,0.552 0.448,1 1,1Z"/>\n                </svg>`}static paste(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                    <path fill="${r}" d="M23,14c0,-1.326 -0.527,-2.598 -1.464,-3.536c-0.938,-0.937 -2.21,-1.464 -3.536,-1.464c-2.977,0 -7.023,0 -10,0c-1.326,-0 -2.598,0.527 -3.536,1.464c-0.937,0.938 -1.464,2.21 -1.464,3.536c-0,2.977 -0,7.023 -0,10c-0,1.326 0.527,2.598 1.464,3.536c0.938,0.937 2.21,1.464 3.536,1.464c2.977,-0 7.023,-0 10,-0c1.326,0 2.598,-0.527 3.536,-1.464c0.937,-0.938 1.464,-2.21 1.464,-3.536l-0,-10Z"/>\n                    <path fill="${r}" d="M9.101,7l8.899,0c1.857,-0 3.637,0.737 4.95,2.05c1.313,1.313 2.05,3.093 2.05,4.95l-0,8.899c0.953,-0.195 1.837,-0.665 2.536,-1.363c0.937,-0.938 1.464,-2.21 1.464,-3.536c0,-2.977 0,-7.023 0,-10c0,-1.326 -0.527,-2.598 -1.464,-3.536c-0.938,-0.937 -2.21,-1.464 -3.536,-1.464c-2.977,0 -7.023,0 -10,0c-1.326,-0 -2.598,0.527 -3.536,1.464c-0.698,0.699 -1.168,1.583 -1.363,2.536Z"/>\n                </svg>`}static delete(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                    <path fill="${r}" d="M11,4.5l10,0c0.828,-0 1.5,-0.672 1.5,-1.5c-0,-0.828 -0.672,-1.5 -1.5,-1.5l-10,0c-0.828,-0 -1.5,0.672 -1.5,1.5c-0,0.828 0.672,1.5 1.5,1.5Z"/>\n                    <path fill="${r}" d="M5,9.5l0,16.5c0,2.761 2.239,5 5,5l12,0c2.761,0 5,-2.239 5,-5l0,-16.5l1.645,0c0.748,-0 1.355,-0.672 1.355,-1.5c-0,-0.828 -0.607,-1.5 -1.355,-1.5l-25.29,0c-0.748,-0 -1.355,0.672 -1.355,1.5c-0,0.828 0.607,1.5 1.355,1.5l1.645,0Zm7,3.5l0,12c-0,0.552 0.448,1 1,1c0.552,0 1,-0.448 1,-1l0,-12c-0,-0.552 -0.448,-1 -1,-1c-0.552,0 -1,0.448 -1,1Zm6,-0l0,12c0,0.552 0.448,1 1,1c0.552,-0 1,-0.448 1,-1l0,-12c0,-0.552 -0.448,-1 -1,-1c-0.552,-0 -1,0.448 -1,1Z"/>\n                </svg>`}static fill(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                    <path fill="${r}" d="M4,29.987l24,0c0.828,0 1.5,-0.672 1.5,-1.5c0,-0.827 -0.672,-1.5 -1.5,-1.5l-24,0c-0.828,0 -1.5,0.673 -1.5,1.5c0,0.828 0.672,1.5 1.5,1.5Z"/>\n                    <path fill="${r}" d="M9.138,22.244c1.323,0.328 2.775,0.118 3.995,-0.702l9.873,-6.712c0.458,-0.308 0.58,-0.929 0.273,-1.388l-6.717,-10c-0.308,-0.458 -0.929,-0.58 -1.388,-0.272c0,-0 -6.027,4.048 -9.961,6.691c-2.293,1.539 -2.903,4.646 -1.363,6.938c0.725,1.08 1.53,2.279 2.256,3.359c0.738,1.099 1.836,1.812 3.032,2.086Zm11.448,-9.223l-15.418,0c0.207,-0.591 0.599,-1.124 1.16,-1.5c-0,-0 9.131,-6.133 9.131,-6.133l5.127,7.633Z"/>\n                    <path fill="${r}" d="M26.339,15.455c-0.185,-0.284 -0.5,-0.455 -0.839,-0.455c-0.339,-0 -0.654,0.171 -0.839,0.455c0,0 -1.274,1.965 -2.039,3.732c-0.379,0.876 -0.622,1.717 -0.622,2.313c-0,1.932 1.568,3.5 3.5,3.5c1.932,0 3.5,-1.568 3.5,-3.5c-0,-0.596 -0.243,-1.437 -0.622,-2.313c-0.765,-1.767 -2.039,-3.732 -2.039,-3.732Z"/>\n                </svg>`}static outlinePen(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                    <path fill="${r}" d="M18.257,6.671l-9.679,9.679c-0.137,0.138 -0.232,0.312 -0.271,0.502l-1.487,7.085c-0.069,0.329 0.032,0.671 0.269,0.909c0.236,0.239 0.577,0.343 0.906,0.277l7.143,-1.428c0.194,-0.039 0.372,-0.134 0.511,-0.274l9.679,-9.679l-7.071,-7.071Zm1.414,-1.414l7.071,7.071l1.793,-1.792c1.953,-1.953 1.953,-5.119 0,-7.072c0,0 0,0 0,0c-0.938,-0.937 -2.209,-1.464 -3.535,-1.464c-1.327,0 -2.598,0.527 -3.536,1.464l-1.793,1.793Z"/>\n                    <path fill="${r}" d="M3.5,30l24,0c0.828,0 1.5,-0.672 1.5,-1.5c0,-0.828 -0.672,-1.5 -1.5,-1.5l-24,0c-0.828,0 -1.5,0.672 -1.5,1.5c0,0.828 0.672,1.5 1.5,1.5Z"/>\n                </svg>`}static addPlusNew(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32">\n                    <path fill="${r}" d="M14.5,14.501l-10.502,0c-0.828,0 -1.5,0.673 -1.5,1.5c0,0.828 0.672,1.5 1.5,1.5l10.502,0l-0.001,10.502c0,0.828 0.672,1.5 1.5,1.501c0.828,-0 1.5,-0.673 1.5,-1.5l0.001,-10.503l10.502,0c0.828,0 1.5,-0.672 1.5,-1.5c0,-0.827 -0.672,-1.5 -1.5,-1.5l-10.502,0l0.001,-10.501c-0,-0.828 -0.672,-1.501 -1.5,-1.501c-0.828,0 -1.5,0.672 -1.5,1.5l-0.001,10.502Z"/>    \n                </svg>`}static adjustSettingTool(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                    <path fill="${r}" d="M29,8c0,-1.326 -0.527,-2.598 -1.464,-3.536c-0.938,-0.937 -2.21,-1.464 -3.536,-1.464c-4.439,-0 -11.561,-0 -16,-0c-1.326,-0 -2.598,0.527 -3.536,1.464c-0.937,0.938 -1.464,2.21 -1.464,3.536c-0,4.439 -0,11.561 -0,16c-0,1.326 0.527,2.598 1.464,3.536c0.938,0.937 2.21,1.464 3.536,1.464c4.439,-0 11.561,0 16,0c1.326,0 2.598,-0.527 3.536,-1.464c0.937,-0.938 1.464,-2.21 1.464,-3.536l-0,-16Zm-12.829,12l-8.171,0c-0.552,-0 -1,0.448 -1,1c-0,0.552 0.448,1 1,1l8.171,0c0.412,1.165 1.524,2 2.829,2c1.305,0 2.417,-0.835 2.829,-2l2.171,0c0.552,-0 1,-0.448 1,-1c-0,-0.552 -0.448,-1 -1,-1l-2.171,0c-0.412,-1.165 -1.524,-2 -2.829,-2c-1.305,0 -2.417,0.835 -2.829,2Zm-6,-10c0.412,-1.165 1.524,-2 2.829,-2c1.305,0 2.417,0.835 2.829,2l8.171,0c0.552,-0 1,0.448 1,1c0,0.552 -0.448,1 -1,1l-8.171,0c-0.412,1.165 -1.524,2 -2.829,2c-1.305,0 -2.417,-0.835 -2.829,-2l-2.171,0c-0.552,-0 -1,-0.448 -1,-1c0,-0.552 0.448,-1 1,-1l2.171,0Z"/>\n                </svg>`}static barChartReport(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32">\n                    <path fill="${r}" d="M29,10c0,-0.552 -0.448,-1 -1,-1l-4,0c-0.552,0 -1,0.448 -1,1l-0,18c0,0.552 0.448,1 1,1l4,0c0.552,0 1,-0.448 1,-1l-0,-18Zm-20,6c-0,-0.552 -0.448,-1 -1,-1l-4,0c-0.552,0 -1,0.448 -1,1l-0,12c0,0.552 0.448,1 1,1l4,0c0.552,0 1,-0.448 1,-1l-0,-12Zm10,-12c0,-0.552 -0.448,-1 -1,-1l-4,0c-0.552,0 -1,0.448 -1,1l-0,24c0,0.552 0.448,1 1,1l4,0c0.552,0 1,-0.448 1,-1l-0,-24Z"/>\n                </svg>`}static bookmarkMarkPin(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32">\n                    <path fill="${r}" d="M27,6c0,-1.326 -0.527,-2.598 -1.464,-3.536c-0.938,-0.937 -2.21,-1.464 -3.536,-1.464c-3.486,0 -8.514,0 -12,0c-1.326,-0 -2.598,0.527 -3.536,1.464c-0.937,0.938 -1.464,2.21 -1.464,3.536c0,7.738 0,24 0,24c0,0.404 0.244,0.769 0.617,0.924c0.374,0.155 0.804,0.069 1.09,-0.217l9.293,-9.293c0,0 9.293,9.293 9.293,9.293c0.286,0.286 0.716,0.372 1.09,0.217c0.373,-0.155 0.617,-0.52 0.617,-0.924l-0,-24Z"/>\n                </svg>`}static calendarDateSchedule(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                    <path fill="${r}" d="M29,11l-26,0l0,13.009c-0,1.326 0.527,2.598 1.464,3.535c0.938,0.938 2.21,1.465 3.536,1.465c4.439,-0 11.561,-0 16,-0c1.326,-0 2.598,-0.527 3.536,-1.465c0.937,-0.937 1.464,-2.209 1.464,-3.535l-0,-13.009Zm-20,13l2,0c0.552,0 1,-0.448 1,-1c0,-0.552 -0.448,-1 -1,-1l-2,0c-0.552,0 -1,0.448 -1,1c0,0.552 0.448,1 1,1Zm6,0l2,0c0.552,0 1,-0.448 1,-1c0,-0.552 -0.448,-1 -1,-1l-2,0c-0.552,0 -1,0.448 -1,1c0,0.552 0.448,1 1,1Zm6,0l2,0c0.552,0 1,-0.448 1,-1c0,-0.552 -0.448,-1 -1,-1l-2,0c-0.552,0 -1,0.448 -1,1c0,0.552 0.448,1 1,1Zm-12,-4l2,0c0.552,0 1,-0.448 1,-1c0,-0.552 -0.448,-1 -1,-1l-2,0c-0.552,0 -1,0.448 -1,1c0,0.552 0.448,1 1,1Zm6,0l2,0c0.552,0 1,-0.448 1,-1c0,-0.552 -0.448,-1 -1,-1l-2,0c-0.552,0 -1,0.448 -1,1c0,0.552 0.448,1 1,1Zm6,0l2,0c0.552,0 1,-0.448 1,-1c0,-0.552 -0.448,-1 -1,-1l-2,0c-0.552,0 -1,0.448 -1,1c0,0.552 0.448,1 1,1Zm-12,-4l2,0c0.552,-0 1,-0.448 1,-1c-0,-0.552 -0.448,-1 -1,-1l-2,0c-0.552,-0 -1,0.448 -1,1c-0,0.552 0.448,1 1,1Zm6,0l2,0c0.552,-0 1,-0.448 1,-1c-0,-0.552 -0.448,-1 -1,-1l-2,0c-0.552,-0 -1,0.448 -1,1c-0,0.552 0.448,1 1,1Zm6,0l2,0c0.552,-0 1,-0.448 1,-1c-0,-0.552 -0.448,-1 -1,-1l-2,0c-0.552,-0 -1,0.448 -1,1c-0,0.552 0.448,1 1,1Zm-11,-12.991l0,2.991c-0,0.552 -0.448,1 -1,1c-0.552,-0 -1,-0.448 -1,-1l0,-2.991c-1.326,-0 -2.598,0.527 -3.536,1.464c-0.937,0.938 -1.464,2.21 -1.464,3.536l0,0.991l26,0l-0,-0.991c0,-1.326 -0.527,-2.598 -1.464,-3.536c-0.938,-0.937 -2.21,-1.464 -3.536,-1.464l0,2.991c-0,0.552 -0.448,1 -1,1c-0.552,-0 -1,-0.448 -1,-1l0,-2.991l-12,-0Z"/>\n                </svg>`}static closeFolderData(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                    <path  fill="${r}" d="M1,5.998l-0,16.002c-0,1.326 0.527,2.598 1.464,3.536c0.938,0.937 2.21,1.464 3.536,1.464c5.322,0 14.678,-0 20,0c1.326,0 2.598,-0.527 3.536,-1.464c0.937,-0.938 1.464,-2.21 1.464,-3.536c0,-3.486 0,-8.514 0,-12c0,-1.326 -0.527,-2.598 -1.464,-3.536c-0.938,-0.937 -2.21,-1.464 -3.536,-1.464c-0,0 -10.586,0 -10.586,0c0,-0 -3.707,-3.707 -3.707,-3.707c-0.187,-0.188 -0.442,-0.293 -0.707,-0.293l-5.002,0c-2.76,0 -4.998,2.238 -4.998,4.998Z"/>\n                </svg>`}static documentFilePaper(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                    <path fill="${r}" d="M27,6c0,-1.326 -0.527,-2.598 -1.464,-3.536c-0.938,-0.937 -2.21,-1.464 -3.536,-1.464c-3.486,0 -8.514,0 -12,0c-1.326,-0 -2.598,0.527 -3.536,1.464c-0.937,0.938 -1.464,2.21 -1.464,3.536c0,5.322 0,14.678 0,20c-0,1.326 0.527,2.598 1.464,3.536c0.938,0.937 2.21,1.464 3.536,1.464c3.486,0 8.514,0 12,0c1.326,0 2.598,-0.527 3.536,-1.464c0.937,-0.938 1.464,-2.21 1.464,-3.536l-0,-20Zm-16,20l5,0c0.552,-0 1,-0.448 1,-1c-0,-0.552 -0.448,-1 -1,-1l-5,0c-0.552,-0 -1,0.448 -1,1c-0,0.552 0.448,1 1,1Zm0,-6l10,0c0.552,0 1,-0.448 1,-1c0,-0.552 -0.448,-1 -1,-1l-10,0c-0.552,0 -1,0.448 -1,1c0,0.552 0.448,1 1,1Zm-0,-6l10,0c0.552,-0 1,-0.448 1,-1c-0,-0.552 -0.448,-1 -1,-1l-10,0c-0.552,-0 -1,0.448 -1,1c-0,0.552 0.448,1 1,1Zm0,-6l10,0c0.552,0 1,-0.448 1,-1c0,-0.552 -0.448,-1 -1,-1l-10,0c-0.552,0 -1,0.448 -1,1c0,0.552 0.448,1 1,1Z"/>\n                </svg>`}static editToolPencil(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                    <path fill="${r}" d="M12.965,5.462c0,-0 -2.584,0.004 -4.979,0.008c-3.034,0.006 -5.49,2.467 -5.49,5.5l0,13.03c0,1.459 0.579,2.858 1.611,3.889c1.031,1.032 2.43,1.611 3.889,1.611l13.003,0c3.038,-0 5.5,-2.462 5.5,-5.5c0,-2.405 0,-5.004 0,-5.004c0,-0.828 -0.672,-1.5 -1.5,-1.5c-0.827,-0 -1.5,0.672 -1.5,1.5l0,5.004c0,1.381 -1.119,2.5 -2.5,2.5l-13.003,0c-0.663,-0 -1.299,-0.263 -1.768,-0.732c-0.469,-0.469 -0.732,-1.105 -0.732,-1.768l0,-13.03c0,-1.379 1.117,-2.497 2.496,-2.5c2.394,-0.004 4.979,-0.008 4.979,-0.008c0.828,-0.002 1.498,-0.675 1.497,-1.503c-0.001,-0.828 -0.675,-1.499 -1.503,-1.497Z"/><path d="M20.046,6.411l-6.845,6.846c-0.137,0.137 -0.232,0.311 -0.271,0.501l-1.081,5.152c-0.069,0.329 0.032,0.671 0.268,0.909c0.237,0.239 0.577,0.343 0.907,0.277l5.194,-1.038c0.193,-0.039 0.371,-0.134 0.511,-0.274l6.845,-6.845l-5.528,-5.528Zm1.415,-1.414l5.527,5.528l1.112,-1.111c1.526,-1.527 1.526,-4.001 -0,-5.527c-0.001,-0 -0.001,-0.001 -0.001,-0.001c-1.527,-1.526 -4.001,-1.526 -5.527,-0l-1.111,1.111Z"/>\n                </svg>`}static emailInbox(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                    <path fill="${r}" d="M31,10c0,-1.326 -0.527,-2.598 -1.464,-3.536c-0.938,-0.937 -2.21,-1.464 -3.536,-1.464c-5.322,0 -14.678,0 -20,0c-1.326,-0 -2.598,0.527 -3.536,1.464c-0.937,0.938 -1.464,2.21 -1.464,3.536c0,3.486 0,8.514 0,12c-0,1.326 0.527,2.598 1.464,3.536c0.938,0.937 2.21,1.464 3.536,1.464c5.322,-0 14.678,-0 20,-0c1.326,0 2.598,-0.527 3.536,-1.464c0.937,-0.938 1.464,-2.21 1.464,-3.536c0,-3.486 0,-8.514 0,-12Zm-26.556,-0.221c-0,-0 5.145,4.237 8.372,6.894c1.849,1.523 4.519,1.52 6.365,-0.007c3.237,-2.677 8.413,-6.959 8.413,-6.959c0.425,-0.352 0.485,-0.983 0.133,-1.408c-0.351,-0.425 -0.982,-0.485 -1.408,-0.133c0,-0 -5.176,4.281 -8.412,6.959c-1.108,0.916 -2.71,0.918 -3.82,0.004c0,0 -8.372,-6.894 -8.372,-6.894c-0.426,-0.351 -1.056,-0.29 -1.407,0.136c-0.351,0.426 -0.29,1.057 0.136,1.408Z"/>\n                </svg>`}static fileFormatFolder(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                    <path fill="${r}" d="M17,1l-7,-0c-1.326,0 -2.598,0.527 -3.536,1.464c-0.937,0.938 -1.464,2.21 -1.464,3.536c0,5.322 0,14.678 0,20c-0,1.326 0.527,2.598 1.464,3.536c0.938,0.937 2.21,1.464 3.536,1.464c3.486,-0 8.514,0 12,0c1.326,0 2.598,-0.527 3.536,-1.464c0.937,-0.938 1.464,-2.21 1.464,-3.536l-0,-15l-5,0c-1.326,0 -2.598,-0.527 -3.536,-1.464c-0.937,-0.938 -1.464,-2.21 -1.464,-3.536l0,-5Zm-6,25l5,0c0.552,0 1,-0.448 1,-1c0,-0.552 -0.448,-1 -1,-1l-5,0c-0.552,0 -1,0.448 -1,1c0,0.552 0.448,1 1,1Zm0,-5l10,0c0.552,0 1,-0.448 1,-1c0,-0.552 -0.448,-1 -1,-1l-10,0c-0.552,0 -1,0.448 -1,1c0,0.552 0.448,1 1,1Zm0,-5l10,0c0.552,0 1,-0.448 1,-1c0,-0.552 -0.448,-1 -1,-1l-10,0c-0.552,0 -1,0.448 -1,1c0,0.552 0.448,1 1,1Zm8,-14.407l-0,4.407c-0,0.796 0.316,1.559 0.879,2.121c0.562,0.563 1.325,0.879 2.121,0.879l4.416,0l-7.416,-7.407Z"/>\n                </svg>`}static fullscreenArrowsExpand(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                    <path fill="${r}" d="M7.539,26.475l6.849,-6.971c0.58,-0.591 0.572,-1.541 -0.019,-2.121c-0.591,-0.58 -1.541,-0.572 -2.121,0.019l-6.737,6.856c-0.007,-0.079 -0.011,-0.159 -0.011,-0.24c0,-0 -0,-7.018 -0,-7.018c-0,-0.828 -0.672,-1.5 -1.5,-1.5c-0.828,0 -1.5,0.672 -1.5,1.5l0,7.018c0,3.037 2.462,5.5 5.5,5.5c3.112,-0 6.905,-0 6.905,-0c0.828,-0 1.5,-0.673 1.5,-1.5c0,-0.828 -0.672,-1.5 -1.5,-1.5l-6.905,-0c-0.157,-0 -0.311,-0.015 -0.461,-0.043Z"/>\n                    <path fill="${r}" d="M24.267,5.51l-7.056,7.181c-0.58,0.591 -0.571,1.541 0.019,2.122c0.591,0.58 1.541,0.571 2.121,-0.019l7.149,-7.277c0.031,0.156 0.047,0.318 0.047,0.483c-0,0 -0,6.977 -0,6.977c-0,0.828 0.672,1.5 1.5,1.5c0.828,0 1.5,-0.672 1.5,-1.5l-0,-6.977c-0,-3.038 -2.463,-5.5 -5.5,-5.5c-3.162,0 -7.047,0 -7.047,0c-0.828,0 -1.5,0.672 -1.5,1.5c0,0.828 0.672,1.5 1.5,1.5c0,0 3.885,0 7.047,0c0.074,-0 0.147,0.003 0.22,0.01Z"/>\n                </svg>`}static hideCloseEye(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                    <path fill="${r}" d="M5.112,18.784l-2.153,2.156c-0.585,0.586 -0.585,1.536 0.001,2.121c0.586,0.585 1.536,0.585 2.121,-0.001l2.666,-2.668c1.898,0.983 4.19,1.806 6.773,2.041l0,3.567c0,0.828 0.672,1.5 1.5,1.5c0.828,-0 1.5,-0.672 1.5,-1.5l0,-3.571c2.147,-0.201 4.091,-0.806 5.774,-1.571l3.199,3.202c0.585,0.586 1.535,0.586 2.121,0.001c0.586,-0.585 0.586,-1.535 0.001,-2.121l-2.579,-2.581c2.59,-1.665 4.091,-3.369 4.091,-3.369c0.546,-0.622 0.485,-1.57 -0.137,-2.117c-0.622,-0.546 -1.57,-0.485 -2.117,0.137c0,-0 -4.814,5.49 -11.873,5.49c-7.059,0 -11.873,-5.49 -11.873,-5.49c-0.547,-0.622 -1.495,-0.683 -2.117,-0.137c-0.622,0.547 -0.683,1.495 -0.137,2.117c0,0 1.175,1.334 3.239,2.794Z"/><g id="Icon"/>\n                </svg>`}static imagePictureGallery(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                    <path fill="${r}" d="M29,8c0,-1.326 -0.527,-2.598 -1.464,-3.536c-0.938,-0.937 -2.21,-1.464 -3.536,-1.464c-4.439,-0 -11.561,-0 -16,-0c-1.326,-0 -2.598,0.527 -3.536,1.464c-0.937,0.938 -1.464,2.21 -1.464,3.536c-0,4.439 -0,11.561 -0,16c-0,1.326 0.527,2.598 1.464,3.536c0.938,0.937 2.21,1.464 3.536,1.464c4.439,-0 11.561,0 16,0c1.326,0 2.598,-0.527 3.536,-1.464c0.937,-0.938 1.464,-2.21 1.464,-3.536l-0,-16Zm-2.178,6.903l-0.676,-1.003c-0.929,-1.379 -2.483,-2.205 -4.146,-2.205c-1.663,-0 -3.217,0.826 -4.146,2.205c-0,0 -3.021,4.481 -3.021,4.481l-0.687,-1.019c-0.929,-1.379 -2.483,-2.206 -4.146,-2.206c-1.663,0 -3.217,0.827 -4.146,2.206c-0.246,0.365 -0.489,0.726 -0.723,1.072c-0.309,0.458 -0.187,1.08 0.27,1.388c0.458,0.309 1.08,0.188 1.388,-0.27l0.723,-1.072c0.558,-0.828 1.49,-1.324 2.488,-1.324c0.998,0 1.93,0.496 2.488,1.323c-0,0 1.516,2.25 1.516,2.25c0.186,0.276 0.497,0.441 0.829,0.441c0.333,0 0.644,-0.165 0.83,-0.441l3.849,-5.711c0.558,-0.827 1.49,-1.323 2.488,-1.323c0.998,-0 1.93,0.496 2.488,1.323c-0,-0 0.676,1.003 0.676,1.003c0.308,0.458 0.93,0.579 1.388,0.27c0.458,-0.308 0.579,-0.93 0.27,-1.388Zm-12.822,-7.903c-1.656,0 -3,1.344 -3,3c0,1.656 1.344,3 3,3c1.656,0 3,-1.344 3,-3c0,-1.656 -1.344,-3 -3,-3Z"/><g id="Icon"/>\n                </svg>`}static linkChainConnect(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                    <path fill="${r}" d="M24.787,19.13l2.122,-2.121c3.317,-3.317 3.317,-8.704 -0,-12.021c-3.318,-3.317 -8.704,-3.317 -12.021,0c-0,0 -2.122,2.122 -2.122,2.122c-0.585,0.585 -0.585,1.535 0,2.121c0.586,0.585 1.536,0.585 2.122,-0l2.121,-2.121c2.146,-2.147 5.632,-2.147 7.778,-0c2.147,2.146 2.147,5.631 0,7.778c0,-0 -2.121,2.121 -2.121,2.121c-0.586,0.585 -0.586,1.536 -0,2.121c0.585,0.586 1.536,0.586 2.121,0Z"/><path d="M7.11,12.766l-2.122,2.122c-3.317,3.317 -3.317,8.703 0,12.021c3.317,3.317 8.704,3.317 12.021,-0c0,-0 2.121,-2.122 2.121,-2.122c0.586,-0.585 0.586,-1.536 0,-2.121c-0.585,-0.586 -1.536,-0.586 -2.121,-0l-2.121,2.121c-2.147,2.147 -5.632,2.147 -7.778,0c-2.147,-2.146 -2.147,-5.632 -0,-7.778c-0,0 2.121,-2.121 2.121,-2.121c0.585,-0.586 0.585,-1.536 -0,-2.122c-0.586,-0.585 -1.536,-0.585 -2.121,0Z"/><path d="M11.352,22.666l11.314,-11.314c0.585,-0.585 0.585,-1.536 -0,-2.121c-0.586,-0.586 -1.536,-0.586 -2.121,-0l-11.314,11.314c-0.586,0.585 -0.586,1.535 -0,2.121c0.585,0.585 1.536,0.585 2.121,-0Z"/>\n                </svg>`}static listMenuReport(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5;">\n                    <path fill="${r}" d="M10.427,4.003l16.999,-0.003" style="fill:none;stroke:#000000;stroke-width:3px;"/><path d="M10.002,10.003l16.999,-0.003" style="fill:none;stroke:#000000;stroke-width:2px;"/><path d="M10.423,27.994l17.04,-0.02" style="fill:none;stroke:#000000;stroke-width:3px;"/><path d="M10.425,15.998l17.001,0.003" style="fill:none;stroke:#000000;stroke-width:3px;"/><path d="M10.417,22.001l17.008,-0" style="fill:none;stroke:#000000;stroke-width:3px;"/><path d="M10.433,10.001l16.992,-0" style="fill:none;stroke:#000000;stroke-width:3px;"/><circle cx="5" cy="4" r="2"/><circle cx="5" cy="10" r="2"/><circle cx="5" cy="16" r="2"/><circle cx="5" cy="22" r="2"/><circle cx="5" cy="28" r="2"/>\n                </svg>`}static logOutExit(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                    <path fill="${r}" d="M25.229,14.5l-16.003,0c-0.828,-0 -1.5,0.672 -1.5,1.5c-0,0.828 0.672,1.5 1.5,1.5l16.038,0l-3.114,3.114c-0.585,0.585 -0.585,1.536 0,2.121c0.586,0.586 1.536,0.586 2.122,0c-0,0 2.567,-2.567 4.242,-4.242c1.367,-1.367 1.367,-3.583 0,-4.95l-4.242,-4.243c-0.586,-0.585 -1.536,-0.585 -2.122,0c-0.585,0.586 -0.585,1.536 0,2.122l3.079,3.078Z"/><path d="M20,24l-0,-4.5l-10.774,0c-1.932,-0 -3.5,-1.568 -3.5,-3.5c-0,-1.932 1.568,-3.5 3.5,-3.5l10.774,0l-0,-4.5c-0,-2.761 -2.239,-5 -5,-5c-2.166,-0 -4.834,0 -7,-0c-1.326,-0 -2.598,0.527 -3.536,1.464c-0.937,0.938 -1.464,2.21 -1.464,3.536c-0,4.439 -0,11.561 0,16c-0,1.326 0.527,2.598 1.464,3.536c0.938,0.937 2.21,1.464 3.536,1.464c2.166,0 4.834,0 7,0c1.326,0 2.598,-0.527 3.536,-1.464c0.937,-0.938 1.464,-2.21 1.464,-3.536Z"/>\n                </svg>`}static marginPageBorder(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                    <path fill="${r}" d="M20,31l-8,0l-0,-5l8,0l0,5Zm7,-5l-5,0l0,5c1.326,0 2.598,-0.527 3.536,-1.464c0.937,-0.938 1.464,-2.21 1.464,-3.536Zm-22,0c-0,1.326 0.527,2.598 1.464,3.536c0.938,0.937 2.21,1.464 3.536,1.464l0,-5l-5,0Zm22,-18l-0,16l-5,0l0,-16l5,0Zm-7,0l0,16l-8,0l-0,-16l8,0Zm-10,-0l0,16l-5,0l0,-16l5,-0Zm0,-7c-1.326,-0 -2.598,0.527 -3.536,1.464c-0.937,0.938 -1.464,2.21 -1.464,3.536l5,0l0,-5Zm10,5l-8,0l-0,-5l8,-0l0,5Zm2,-5l0,5l5,0c0,-1.326 -0.527,-2.598 -1.464,-3.536c-0.938,-0.937 -2.21,-1.464 -3.536,-1.464Z"/>\n                </svg>`}static minimizeResizeDirection(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                    <path fill="${r}" d="M11.21,18.511l-8.284,8.433c-0.58,0.59 -0.572,1.541 0.019,2.121c0.59,0.58 1.541,0.572 2.121,-0.019l8.378,-8.527c0.03,0.156 0.046,0.317 0.046,0.482c0,0 0,6.977 0,6.977c0,0.828 0.672,1.5 1.5,1.5c0.828,0 1.5,-0.672 1.5,-1.5l0,-6.977c0,-3.037 -2.462,-5.5 -5.5,-5.5c-3.14,0 -6.984,0 -6.984,0c-0.828,0 -1.5,0.672 -1.5,1.5c-0,0.828 0.672,1.5 1.5,1.5l6.984,0c0.074,0 0.148,0.004 0.22,0.01Z"/><path d="M18.496,11.437c-0.012,-0.102 -0.019,-0.205 -0.019,-0.31c0,-0 0,-7.145 0,-7.145c0,-0.827 -0.672,-1.5 -1.5,-1.5c-0.828,0 -1.5,0.673 -1.5,1.5l0,7.145c0,3.038 2.463,5.5 5.5,5.5c3.139,0 6.981,0 6.981,0c0.828,0 1.5,-0.672 1.5,-1.5c-0,-0.828 -0.672,-1.5 -1.5,-1.5l-6.981,0c-0.135,0 -0.267,-0.011 -0.396,-0.031l8.421,-8.572c0.58,-0.591 0.572,-1.541 -0.019,-2.121c-0.59,-0.581 -1.541,-0.572 -2.121,0.018l-8.366,8.516Z"/>\n                </svg>`}static openFolderStorage(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                    <path fill="${r}" d="M1,5.998l0,16.002c-0,1.326 0.527,2.598 1.464,3.536c0.938,0.937 2.21,1.464 3.536,1.464c5.322,0 14.678,-0 20,0c1.326,0 2.598,-0.527 3.536,-1.464c0.937,-0.938 1.464,-2.21 1.464,-3.536c0,-3.486 0,-8.514 0,-12c0,-1.326 -0.527,-2.598 -1.464,-3.536c-0.938,-0.937 -2.21,-1.464 -3.536,-1.464c-0,0 -10.586,0 -10.586,0c0,-0 -3.707,-3.707 -3.707,-3.707c-0.187,-0.188 -0.442,-0.293 -0.707,-0.293l-5.002,0c-2.76,0 -4.998,2.238 -4.998,4.998Zm3.792,11.499l1.755,-3.009c0.537,-0.921 1.524,-1.488 2.591,-1.488c0,0 13.815,0 13.815,0c1.067,0 2.053,0.567 2.591,1.488c0.904,1.55 1.028,1.762 1.788,3.066c0.278,0.477 0.891,0.638 1.368,0.36c0.477,-0.278 0.638,-0.891 0.36,-1.368c-0.761,-1.304 -0.885,-1.516 -1.789,-3.065c-0.896,-1.536 -2.54,-2.481 -4.318,-2.481c-3.354,0 -10.462,0 -13.815,0c-1.778,0 -3.423,0.945 -4.319,2.481c0,-0 -1.755,3.009 -1.755,3.009c-0.278,0.476 -0.117,1.089 0.36,1.367c0.477,0.278 1.089,0.117 1.368,-0.36Z"/>\n                </svg>`}static pasteClipboardfiles(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                <path fill="${r}" d="M10,1c-1.326,-0 -2.598,0.527 -3.536,1.464c-0.937,0.938 -1.464,2.21 -1.464,3.536c0,5.322 -0,14.678 0,20c-0,1.326 0.527,2.598 1.464,3.536c0.938,0.937 2.21,1.464 3.536,1.464c3.486,0 8.514,0 12,0c1.326,0 2.598,-0.527 3.536,-1.464c0.937,-0.938 1.464,-2.21 1.464,-3.536l-0,-20c0,-1.326 -0.527,-2.598 -1.464,-3.536c-0.938,-0.937 -2.21,-1.464 -3.536,-1.464l-0,3c0,1.326 -0.527,2.598 -1.464,3.536c-0.938,0.937 -2.21,1.464 -3.536,1.464l-2,-0c-1.326,0 -2.598,-0.527 -3.536,-1.464c-0.937,-0.938 -1.464,-2.21 -1.464,-3.536l0,-3Zm1,25l10,0c0.552,0 1,-0.448 1,-1c0,-0.552 -0.448,-1 -1,-1l-10,0c-0.552,0 -1,0.448 -1,1c0,0.552 0.448,1 1,1Zm0,-6l10,0c0.552,0 1,-0.448 1,-1c0,-0.552 -0.448,-1 -1,-1l-10,0c-0.552,0 -1,0.448 -1,1c0,0.552 0.448,1 1,1Zm0,-6l10,0c0.552,0 1,-0.448 1,-1c0,-0.552 -0.448,-1 -1,-1l-10,0c-0.552,0 -1,0.448 -1,1c0,0.552 0.448,1 1,1Zm9,-13l-0,3c0,0.796 -0.316,1.559 -0.879,2.121c-0.562,0.563 -1.325,0.879 -2.121,0.879l-2,0c-0.796,0 -1.559,-0.316 -2.121,-0.879c-0.563,-0.562 -0.879,-1.325 -0.879,-2.121l-0,-3l8,-0Z"/>\n            </svg>`}static pencilToolPen(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                <path fill="${r}" d="M18.257,6.671l-12.664,12.664c-0.119,0.119 -0.206,0.266 -0.253,0.428l-2.3,7.899c-0.102,0.349 -0.006,0.725 0.25,0.984c0.256,0.258 0.631,0.357 0.981,0.258l7.957,-2.242c0.165,-0.047 0.315,-0.135 0.436,-0.256l12.664,-12.664l-7.071,-7.071Zm1.414,-1.414l7.071,7.071l1.793,-1.792c0.938,-0.938 1.465,-2.21 1.465,-3.536c-0,-1.326 -0.527,-2.598 -1.465,-3.536c0,0 0,0 0,0c-0.938,-0.937 -2.209,-1.464 -3.535,-1.464c-1.327,0 -2.598,0.527 -3.536,1.464l-1.793,1.793Z"/>\n            </svg>`}static pieChartReport(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                <path fill="${r}" d="M15,2.142c0,-0.29 -0.126,-0.566 -0.345,-0.755c-0.219,-0.19 -0.51,-0.276 -0.797,-0.235c-7.266,1.042 -12.858,7.297 -12.858,14.848c0,8.279 6.721,15 15,15c7.551,-0 13.806,-5.592 14.848,-12.858c0.041,-0.287 -0.045,-0.578 -0.235,-0.797c-0.189,-0.219 -0.465,-0.345 -0.755,-0.345l-9.858,0c-1.326,0 -2.598,-0.527 -3.536,-1.464c-0.937,-0.938 -1.464,-2.21 -1.464,-3.536c0,-0 0,-9.858 0,-9.858Zm3.142,-0.99c-0.287,-0.041 -0.578,0.045 -0.797,0.235c-0.219,0.189 -0.345,0.465 -0.345,0.755l-0,9.858c-0,0.796 0.316,1.559 0.879,2.121c0.562,0.563 1.325,0.879 2.121,0.879c0,0 9.858,0 9.858,0c0.29,0 0.566,-0.126 0.755,-0.345c0.19,-0.219 0.276,-0.51 0.235,-0.797c-0.94,-6.565 -6.14,-11.765 -12.706,-12.706Z"/>\n            </svg>`}static printInkjetPrinting(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;" >\n                <path fill="${r}" d="M9,24l0,-7c0,-0.552 0.448,-1 1,-1l12,0c0.552,0 1,0.448 1,1l0,7l3,0c1.326,0 2.598,-0.527 3.536,-1.464c0.937,-0.938 1.464,-2.21 1.464,-3.536c0,-1.881 0,-4.119 0,-6c-0,-1.326 -0.527,-2.598 -1.464,-3.536c-0.938,-0.937 -2.21,-1.464 -3.536,-1.464c-5.322,0 -14.678,0 -20,0c-1.326,-0 -2.598,0.527 -3.536,1.464c-0.937,0.938 -1.464,2.21 -1.464,3.536c0,1.881 0,4.119 0,6c0,1.326 0.527,2.598 1.464,3.536c0.938,0.937 2.21,1.464 3.536,1.464l3,-0Zm11,-10l6,0c0.552,-0 1,-0.448 1,-1c-0,-0.552 -0.448,-1 -1,-1l-6,0c-0.552,-0 -1,0.448 -1,1c-0,0.552 0.448,1 1,1Z"/><path d="M9,6l14,0l-0,-0c-0,-1.326 -0.527,-2.598 -1.464,-3.536c-0.938,-0.937 -2.21,-1.464 -3.536,-1.464c-1.287,0 -2.713,0 -4,0c-1.326,-0 -2.598,0.527 -3.536,1.464c-0.937,0.938 -1.464,2.21 -1.464,3.536l-0,0Z"/><path d="M21,18l0,8c0,0.796 -0.316,1.559 -0.879,2.121c-0.562,0.563 -1.325,0.879 -2.121,0.879l-4,-0c-0.796,0 -1.559,-0.316 -2.121,-0.879c-0.563,-0.562 -0.879,-1.325 -0.879,-2.121l0,-8l10,0Zm-7,8l4,0c0.552,0 1,-0.448 1,-1c0,-0.552 -0.448,-1 -1,-1l-4,0c-0.552,0 -1,0.448 -1,1c0,0.552 0.448,1 1,1Zm0,-4l4,0c0.552,0 1,-0.448 1,-1c0,-0.552 -0.448,-1 -1,-1l-4,0c-0.552,0 -1,0.448 -1,1c0,0.552 0.448,1 1,1Z"/>\n            </svg>`}static researchChemistryEducation(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                <path fill="${r}" d="M13,9c4.967,0 9,4.033 9,9c0,4.642 -3.523,8.469 -8.038,8.949c0.91,1.244 2.379,2.051 4.038,2.051l5.967,0c2.758,0 4.995,-2.233 4.999,-4.992l0.027,-16c0.003,-1.327 -0.523,-2.601 -1.461,-3.541c-0.938,-0.939 -2.211,-1.467 -3.539,-1.467c-1.879,0 -4.114,0 -5.993,0c-2.761,0 -5,2.239 -5,5l0,1Z"/><path d="M7.522,22.356l-4.583,4.583c-0.585,0.586 -0.585,1.536 0,2.122c0.586,0.585 1.536,0.585 2.122,-0l4.802,-4.803c0.943,0.475 2.009,0.742 3.137,0.742c3.863,0 7,-3.137 7,-7c0,-3.863 -3.137,-7 -7,-7c-3.863,0 -7,3.137 -7,7c0,1.646 0.569,3.16 1.522,4.356Z"/>\n            </svg>`}static resizeExpandScale(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                <path fill="${r}" d="M24.267,5.51l-6.941,7.064c-0.711,-0.374 -1.508,-0.574 -2.326,-0.574l-7,-0c-1.326,-0 -2.598,0.527 -3.536,1.464c-0.937,0.938 -1.464,2.21 -1.464,3.536l0,7c-0,1.326 0.527,2.598 1.464,3.536c0.938,0.937 2.21,1.464 3.536,1.464l7,0c1.326,0 2.598,-0.527 3.536,-1.464c0.937,-0.938 1.464,-2.21 1.464,-3.536l-0,-7c0,-0.807 -0.195,-1.594 -0.559,-2.297l7.059,-7.186c0.031,0.156 0.047,0.318 0.047,0.483c-0,0 -0,6.977 -0,6.977c-0,0.828 0.672,1.5 1.5,1.5c0.828,0 1.5,-0.672 1.5,-1.5l-0,-6.977c-0,-3.038 -2.463,-5.5 -5.5,-5.5c-3.162,0 -7.047,0 -7.047,0c-0.828,0 -1.5,0.672 -1.5,1.5c0,0.828 0.672,1.5 1.5,1.5c0,0 3.885,0 7.047,0c0.074,-0 0.147,0.003 0.22,0.01Z"/>\n            </svg>`}static saveStorageFolder(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                <path fill="${r}" d="M9,29l0,-8.25c0,-1.518 1.232,-2.75 2.75,-2.75l8.5,0c1.518,0 2.75,1.232 2.75,2.75l0,8.25l-14,-0Zm-2,-0.101c-0.953,-0.195 -1.837,-0.665 -2.536,-1.363c-0.937,-0.938 -1.464,-2.21 -1.464,-3.536c-0,-4.439 -0,-11.561 0,-16c-0,-1.326 0.527,-2.598 1.464,-3.536c0.938,-0.937 2.21,-1.464 3.536,-1.464l2,-0l0,5.083c0,2.201 1.613,3.917 3.5,3.917l5,0c1.887,0 3.5,-1.716 3.5,-3.917l0,-5.083l0.221,0c0.24,0 0.472,0.087 0.654,0.244l5.779,5c0.22,0.19 0.346,0.466 0.346,0.756c0,0 0,9.426 -0,15c0,1.326 -0.527,2.598 -1.464,3.536c-0.699,0.698 -1.583,1.168 -2.536,1.363l0,-8.149c0,-2.622 -2.128,-4.75 -4.75,-4.75c0,0 -8.5,0 -8.5,0c-2.622,0 -4.75,2.128 -4.75,4.75l0,8.149Zm13,-25.899l0,5.083c0,1.02 -0.626,1.917 -1.5,1.917c0,0 -5,0 -5,0c-0.874,0 -1.5,-0.897 -1.5,-1.917l0,-5.083l8,0Z"/>\n            </svg>`}static searchGlassview(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                <path fill="${r}" d="M10.437,19.442l-7.498,7.497c-0.585,0.586 -0.585,1.536 0,2.122c0.586,0.585 1.536,0.585 2.122,-0l7.649,-7.65c1.544,0.976 3.373,1.542 5.333,1.542c5.52,-0 10,-4.481 10,-10c0,-5.52 -4.48,-10 -10,-10c-5.519,-0 -10,4.48 -10,10c0,2.475 0.902,4.741 2.394,6.489Z"/>\n            </svg>`}static sendShareCommunication(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                <path fill="${r}" d="M11.499,19.173l5.801,-5.849c0.389,-0.392 1.022,-0.394 1.414,-0.006c0.392,0.389 0.395,1.022 0.006,1.414l-5.798,5.847l5.306,8.002c0.207,0.313 0.572,0.483 0.945,0.441c0.373,-0.042 0.691,-0.289 0.824,-0.64l9.024,-23.904c0.138,-0.366 0.05,-0.78 -0.226,-1.058c-0.276,-0.278 -0.689,-0.369 -1.057,-0.233l-24.004,8.892c-0.353,0.13 -0.602,0.448 -0.646,0.821c-0.044,0.373 0.125,0.74 0.438,0.948l7.973,5.325Z"/>\n            </svg>`}static settingGearCogwheel(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                <path fill="${r}" d="M24.336,5.414l-0.003,0.001c-0.687,0.397 -1.535,0.397 -2.222,0c-0.687,-0.396 -1.111,-1.13 -1.111,-1.924l0,-0.003c-0,-0.622 -0.247,-1.218 -0.687,-1.658c-0.439,-0.439 -1.035,-0.686 -1.657,-0.686c-1.477,-0 -3.835,-0 -5.312,-0c-0.622,-0 -1.218,0.247 -1.657,0.686c-0.44,0.44 -0.687,1.036 -0.687,1.658l0,0.003c0,0.794 -0.424,1.528 -1.111,1.924c-0.687,0.397 -1.535,0.397 -2.222,0l-0.003,-0.001c-0.538,-0.311 -1.178,-0.395 -1.779,-0.234c-0.6,0.16 -1.112,0.553 -1.423,1.092c-0.738,1.279 -1.918,3.321 -2.656,4.6c-0.311,0.538 -0.395,1.178 -0.234,1.779c0.161,0.6 0.554,1.112 1.092,1.423l0.003,0.002c0.687,0.397 1.111,1.13 1.111,1.924c-0,0.794 -0.424,1.527 -1.111,1.924l-0.003,0.002c-0.538,0.311 -0.931,0.823 -1.092,1.423c-0.161,0.601 -0.077,1.241 0.234,1.779c0.738,1.279 1.918,3.321 2.656,4.6c0.311,0.539 0.823,0.932 1.423,1.092c0.601,0.161 1.241,0.077 1.779,-0.234l0.003,-0.001c0.687,-0.397 1.535,-0.397 2.222,-0c0.687,0.396 1.111,1.13 1.111,1.924l-0,0.003c0,0.622 0.247,1.218 0.687,1.658c0.439,0.439 1.035,0.686 1.657,0.686c1.477,0 3.835,0 5.312,0c0.622,0 1.218,-0.247 1.657,-0.686c0.44,-0.44 0.687,-1.036 0.687,-1.658l-0,-0.003c-0,-0.794 0.424,-1.528 1.111,-1.924c0.687,-0.397 1.535,-0.397 2.222,-0l0.003,0.001c0.538,0.311 1.178,0.395 1.779,0.234c0.6,-0.16 1.112,-0.553 1.423,-1.092c0.738,-1.279 1.918,-3.321 2.656,-4.6c0.311,-0.538 0.395,-1.178 0.234,-1.779c-0.161,-0.6 -0.554,-1.112 -1.092,-1.423l-0.003,-0.002c-0.687,-0.397 -1.111,-1.13 -1.111,-1.924c0,-0.794 0.424,-1.527 1.111,-1.924l0.003,-0.002c0.538,-0.311 0.931,-0.823 1.092,-1.423c0.161,-0.601 0.077,-1.241 -0.234,-1.779c-0.738,-1.279 -1.918,-3.321 -2.656,-4.6c-0.311,-0.539 -0.823,-0.932 -1.423,-1.092c-0.601,-0.161 -1.241,-0.077 -1.779,0.234Zm-8.336,3.586c-3.863,0 -7,3.137 -7,7c0,3.863 3.137,7 7,7c3.863,0 7,-3.137 7,-7c0,-3.863 -3.137,-7 -7,-7Z"/>\n            </svg>`}static shareSendNetwork(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                <path fill="${r}" d="M29,8c0,-1.326 -0.527,-2.598 -1.464,-3.536c-0.938,-0.937 -2.21,-1.464 -3.536,-1.464c-4.439,-0 -11.561,-0 -16,-0c-1.326,-0 -2.598,0.527 -3.536,1.464c-0.937,0.938 -1.464,2.21 -1.464,3.536c-0,4.439 -0,11.561 0,16c-0,1.326 0.527,2.598 1.464,3.536c0.938,0.937 2.21,1.464 3.536,1.464c4.439,-0 11.561,0 16,0c1.326,0 2.598,-0.527 3.536,-1.464c0.937,-0.938 1.464,-2.21 1.464,-3.536l-0,-16Zm-9.835,2.983l-6.529,3.585c-0.509,-0.934 -1.499,-1.568 -2.636,-1.568c-1.656,-0 -3,1.344 -3,3c0,1.656 1.344,3 3,3c1.101,0 2.064,-0.594 2.586,-1.48l6.547,3.595c-0.086,0.28 -0.133,0.577 -0.133,0.885c0,1.656 1.344,3 3,3c1.656,0 3,-1.344 3,-3c0,-1.656 -1.344,-3 -3,-3c-0.612,0 -1.181,0.183 -1.655,0.498l-6.267,-3.44l6.364,-3.494c0.454,0.276 0.988,0.436 1.558,0.436c1.656,0 3,-1.344 3,-3c0,-1.656 -1.344,-3 -3,-3c-1.656,0 -3,1.344 -3,3c0,0.344 0.058,0.675 0.165,0.983Z"/>\n            </svg>`}static spacingTextParagraph(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                <path fill="${r}" d="M6.5,8.276l0,15.448l-1.329,-1.661c-0.517,-0.647 -1.462,-0.751 -2.108,-0.234c-0.647,0.517 -0.751,1.462 -0.234,2.108l4,5c0.284,0.356 0.715,0.563 1.171,0.563c0.456,-0 0.887,-0.207 1.171,-0.563l4,-5c0.517,-0.646 0.413,-1.591 -0.234,-2.108c-0.646,-0.517 -1.591,-0.413 -2.108,0.234l-1.329,1.661l0,-15.448l1.329,1.661c0.517,0.647 1.462,0.751 2.108,0.234c0.647,-0.517 0.751,-1.462 0.234,-2.108l-4,-5c-0.284,-0.356 -0.715,-0.563 -1.171,-0.563c-0.456,-0 -0.887,0.207 -1.171,0.563l-4,5c-0.517,0.646 -0.413,1.591 0.234,2.108c0.646,0.517 1.591,0.413 2.108,-0.234l1.329,-1.661Z"/><path d="M28,8.5l-11,0c-0.828,0 -1.5,0.672 -1.5,1.5c0,0.828 0.672,1.5 1.5,1.5l11,0c0.828,0 1.5,-0.672 1.5,-1.5c0,-0.828 -0.672,-1.5 -1.5,-1.5Z"/><path d="M28,14.5l-11,0c-0.828,-0 -1.5,0.672 -1.5,1.5c-0,0.828 0.672,1.5 1.5,1.5l11,0c0.828,-0 1.5,-0.672 1.5,-1.5c-0,-0.828 -0.672,-1.5 -1.5,-1.5Z"/><path d="M28,20.5l-11,-0c-0.828,0 -1.5,0.672 -1.5,1.5c0,0.828 0.672,1.5 1.5,1.5l11,-0c0.828,0 1.5,-0.672 1.5,-1.5c0,-0.828 -0.672,-1.5 -1.5,-1.5Z"/><path d="M28,26.5l-11,0c-0.828,0 -1.5,0.672 -1.5,1.5c0,0.828 0.672,1.5 1.5,1.5l11,0c0.828,0 1.5,-0.672 1.5,-1.5c0,-0.828 -0.672,-1.5 -1.5,-1.5Z"/><path d="M28,2.5l-11,0c-0.828,-0 -1.5,0.672 -1.5,1.5c-0,0.828 0.672,1.5 1.5,1.5l11,0c0.828,-0 1.5,-0.672 1.5,-1.5c-0,-0.828 -0.672,-1.5 -1.5,-1.5Z"/>\n            </svg>`}static tableCellsChart(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                <path fill="${r}" d="M29,23l-8,0l0,6l3,0c1.326,0 2.598,-0.527 3.536,-1.464c0.937,-0.938 1.464,-2.21 1.464,-3.536l-0,-1Zm-10,6l-6,-0l0,-6l6,0l-0,6Zm-16,-6l0,1c-0,1.326 0.527,2.598 1.464,3.536c0.938,0.937 2.21,1.464 3.536,1.464l3,-0l0,-6l-8,0Zm8,-6l0,4l-8,-0l0,-4l8,0Zm8,0l-0,4l-6,-0l0,-4l6,0Zm10,0l-0,4l-8,-0l0,-4l8,0Zm-18,-2l-8,-0l0,-4l8,0l0,4Zm8,-0l-6,-0l0,-4l6,0l-0,4Zm10,-0l-8,-0l0,-4l8,0l-0,4Zm-26,-6l26,0l-0,-1c0,-1.326 -0.527,-2.598 -1.464,-3.536c-0.938,-0.937 -2.21,-1.464 -3.536,-1.464c-4.439,-0 -11.561,-0 -16,-0c-1.326,-0 -2.598,0.527 -3.536,1.464c-0.937,0.938 -1.464,2.21 -1.464,3.536l0,1Z"/>\n            </svg>`}static textAlignCenter(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                <path fill="${r}" d="M3.995,5.41l24.038,0.081c0.828,0.003 1.502,-0.667 1.505,-1.495c0.002,-0.828 -0.667,-1.502 -1.495,-1.505l-24.038,-0.081c-0.828,-0.003 -1.502,0.667 -1.505,1.495c-0.003,0.828 0.667,1.502 1.495,1.505Z"/><path d="M3.995,29.404l24.038,0.081c0.828,0.003 1.502,-0.667 1.505,-1.495c0.002,-0.828 -0.667,-1.502 -1.495,-1.505l-24.038,-0.081c-0.828,-0.002 -1.502,0.667 -1.505,1.495c-0.003,0.828 0.667,1.503 1.495,1.505Z"/><path d="M4.018,17.461l24.038,0.081c0.828,0.003 1.502,-0.667 1.505,-1.495c0.003,-0.828 -0.667,-1.502 -1.495,-1.505l-24.038,-0.081c-0.828,-0.003 -1.502,0.667 -1.505,1.495c-0.003,0.828 0.667,1.502 1.495,1.505Z"/><path d="M10,23.5l12,0c0.828,0 1.5,-0.672 1.5,-1.5c0,-0.828 -0.672,-1.5 -1.5,-1.5l-12,0c-0.828,0 -1.5,0.672 -1.5,1.5c0,0.828 0.672,1.5 1.5,1.5Z"/><path d="M10,11.5l12,0c0.828,0 1.5,-0.672 1.5,-1.5c0,-0.828 -0.672,-1.5 -1.5,-1.5l-12,0c-0.828,0 -1.5,0.672 -1.5,1.5c0,0.828 0.672,1.5 1.5,1.5Z"/>\n            </svg>`}static textAlignLeft(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                <path fill="${r}" d="M3.95,5.41l24.038,0.081c0.828,0.003 1.502,-0.667 1.505,-1.495c0.003,-0.828 -0.667,-1.502 -1.495,-1.505l-24.038,-0.081c-0.827,-0.003 -1.502,0.667 -1.505,1.495c-0.002,0.828 0.667,1.502 1.495,1.505Z"/><path d="M3.95,29.404l24.038,0.081c0.828,0.003 1.502,-0.667 1.505,-1.495c0.003,-0.828 -0.667,-1.502 -1.495,-1.505l-24.038,-0.081c-0.827,-0.002 -1.502,0.667 -1.505,1.495c-0.002,0.828 0.667,1.503 1.495,1.505Z"/><path d="M3.973,17.461l24.038,0.081c0.828,0.003 1.502,-0.667 1.505,-1.495c0.003,-0.828 -0.667,-1.502 -1.495,-1.505l-24.037,-0.081c-0.828,-0.003 -1.503,0.667 -1.506,1.495c-0.002,0.828 0.668,1.502 1.495,1.505Z"/><path d="M4,23.5l12,0c0.828,0 1.5,-0.672 1.5,-1.5c0,-0.828 -0.672,-1.5 -1.5,-1.5l-12,0c-0.828,0 -1.5,0.672 -1.5,1.5c0,0.828 0.672,1.5 1.5,1.5Z"/><path d="M4,11.5l12,0c0.828,0 1.5,-0.672 1.5,-1.5c0,-0.828 -0.672,-1.5 -1.5,-1.5l-12,0c-0.828,0 -1.5,0.672 -1.5,1.5c0,0.828 0.672,1.5 1.5,1.5Z"/>\n            </svg>`}static textAlignRight(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                <path fill="${r}" d="M3.995,5.41l24.038,0.081c0.828,0.003 1.502,-0.667 1.505,-1.495c0.002,-0.828 -0.667,-1.502 -1.495,-1.505l-24.038,-0.081c-0.828,-0.003 -1.502,0.667 -1.505,1.495c-0.003,0.828 0.667,1.502 1.495,1.505Z"/><path d="M3.995,29.404l24.038,0.081c0.828,0.003 1.502,-0.667 1.505,-1.495c0.002,-0.828 -0.667,-1.502 -1.495,-1.505l-24.038,-0.081c-0.828,-0.002 -1.502,0.667 -1.505,1.495c-0.003,0.828 0.667,1.503 1.495,1.505Z"/><path d="M4.018,17.461l24.038,0.081c0.828,0.003 1.502,-0.667 1.505,-1.495c0.003,-0.828 -0.667,-1.502 -1.495,-1.505l-24.038,-0.081c-0.828,-0.003 -1.502,0.667 -1.505,1.495c-0.003,0.828 0.667,1.502 1.495,1.505Z"/><path d="M16,23.5l12,0c0.828,0 1.5,-0.672 1.5,-1.5c0,-0.828 -0.672,-1.5 -1.5,-1.5l-12,0c-0.828,0 -1.5,0.672 -1.5,1.5c0,0.828 0.672,1.5 1.5,1.5Z"/><path d="M16,11.5l12,0c0.828,0 1.5,-0.672 1.5,-1.5c0,-0.828 -0.672,-1.5 -1.5,-1.5l-12,0c-0.828,0 -1.5,0.672 -1.5,1.5c0,0.828 0.672,1.5 1.5,1.5Z"/>\n            </svg>`}static textBoxTool(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                <path fill="${r}" d="M16,5.5l12,-0c0.828,0 1.5,-0.672 1.5,-1.5c0,-0.828 -0.672,-1.5 -1.5,-1.5l-12,-0c-0.828,0 -1.5,0.672 -1.5,1.5c0,0.828 0.672,1.5 1.5,1.5Z"/><path d="M3.995,29.4l24.038,0.081c0.828,0.003 1.502,-0.667 1.505,-1.495c0.002,-0.828 -0.667,-1.502 -1.495,-1.505l-24.038,-0.081c-0.828,-0.002 -1.502,0.667 -1.505,1.495c-0.003,0.828 0.667,1.503 1.495,1.505Z"/><path d="M4.018,17.457l24.038,0.081c0.828,0.003 1.502,-0.667 1.505,-1.495c0.003,-0.828 -0.667,-1.502 -1.495,-1.505l-24.038,-0.081c-0.828,-0.003 -1.502,0.667 -1.505,1.495c-0.003,0.828 0.667,1.502 1.495,1.505Z"/><path d="M4,23.496l24,0c0.828,0 1.5,-0.672 1.5,-1.5c-0,-0.828 -0.672,-1.5 -1.5,-1.5l-24,0c-0.828,0 -1.5,0.672 -1.5,1.5c-0,0.828 0.672,1.5 1.5,1.5Z"/><path d="M16,11.5l12,-0.004c0.828,-0 1.5,-0.673 1.5,-1.5c-0,-0.828 -0.673,-1.5 -1.5,-1.5l-12,0.004c-0.828,0 -1.5,0.673 -1.5,1.5c0,0.828 0.673,1.5 1.5,1.5Z"/><path d="M11,4.007c0,-0.552 -0.448,-1 -1,-1l-6.009,-0c-0.552,-0 -1,0.448 -1,1l-0,5.993c-0,0.552 0.448,1 1,1l6.009,0c0.552,0 1,-0.448 1,-1l0,-5.993Z"/>\n            </svg>`}static rotate(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path fill="${r}" fill-rule="evenodd" clip-rule="evenodd" d="M6.23706 2.0007C6.78897 2.02117 7.21978 2.48517 7.19931 3.03708L7.10148 5.67483C8.45455 4.62548 10.154 4.00001 12 4.00001C16.4183 4.00001 20 7.58174 20 12C20 16.4183 16.4183 20 12 20C7.58172 20 4 16.4183 4 12C4 11.4477 4.44772 11 5 11C5.55228 11 6 11.4477 6 12C6 15.3137 8.68629 18 12 18C15.3137 18 18 15.3137 18 12C18 8.68631 15.3137 6.00001 12 6.00001C10.4206 6.00001 8.98317 6.60994 7.91098 7.60891L11.3161 8.00677C11.8646 8.07087 12.2573 8.56751 12.1932 9.11607C12.1291 9.66462 11.6325 10.0574 11.0839 9.99326L5.88395 9.38567C5.36588 9.32514 4.98136 8.87659 5.00069 8.35536L5.20069 2.96295C5.22116 2.41104 5.68516 1.98023 6.23706 2.0007Z" fill="#000000"/>\n        </svg>`}static arrow(t,e,r,i,o){return`<svg width="${t}" height="${e}" x="${i}" y="${o}"  viewBox="0 0 24 24" >\n            <path d="M12 6V18M12 6L7 11M12 6L17 11" stroke="${r}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n        </svg>`}},FlowChart.ShapeCollection=class extends Array{_;constructor(t){super(),this._=new FlowChart.ShapeCollection.private(t)}addRange(t){var e=this._.addRange(t);return this.push(...e),this._.chart._.changed(),e}add(t){return this.addRange([t])[0]}get(t){for(var e of this)if(e.id==t)return e;return null}clear(){this._.remove(this,this)}removeRange(t){this._.remove(t,this)}remove(t){this._.remove([t],this)}contains(t){return null!=this.get(t)}last(){return this.length?this[this.length-1]:null}first(){return this.length?this[0]:null}},FlowChart.ShapeCollection.private=class{chart;moveHorizontallyInterval;moveVerticallyInterval;metadata;minX;minY;maxX;maxY;minShapeX;minShapeY;maxShapeX;maxShapeY;constructor(t){this.chart=t,this.moveHorizontallyInterval=null,this.moveVerticallyInterval=null,this.metadata={},this.minX=Number.MAX_SAFE_INTEGER,this.minY=Number.MAX_SAFE_INTEGER,this.maxX=Number.MIN_SAFE_INTEGER,this.maxY=Number.MIN_SAFE_INTEGER}setSelected(t,e){var r=t.selected,i=this.getMetadata(t.id);r!=e&&(i.selected=e,!r&&e?(this.chart.selectedShapes._.createSelectorElement(t),this.chart.selectedShapes.add(t)):r&&!e&&(this.chart.selectedShapes._.removeSelectorElement(t),this.chart.selectedShapes.remove(t)))}clearSelectedMetadata(){for(var t in this.metadata){this.metadata[t].selected=!1;var e=this.chart.svgElement.querySelector(`[data-selector-shape-id="${t}"]`);e&&e.parentNode.removeChild(e)}}setWidth(t,e){if(t.canWidthFitContent){var r=FlowChart.ShapeTemplates[t.templateId],i=this.getMetadata(t.id);e<r.minWidth&&(e=r.minWidth),i.width=e,t.SYSTEM_REFRESH_WITH_NEW_DYNAMIC_SIZE=!0}else t.width=e}setHeight(t,e){if(t.canHeightFitContent){var r=FlowChart.ShapeTemplates[t.templateId],i=this.getMetadata(t.id);e<r.minHeight&&(e=r.minHeight),i.height=e,t.SYSTEM_REFRESH_WITH_NEW_DYNAMIC_SIZE=!0}else t.height=e}addRange(t){for(var e=[],r=0;r<t.length;r++){var i=t[r];if(FlowChart.private.isLabel(i)){i.templateId||(i.templateId=FlowChart.DEFAULT_LABEL_SHAPE_ID);var o=this.chart.links.get(i.from,i.to);FlowChart.private.setLabelXY(i,o)}var a=this.set(i);e.push(a)}return this.chart.selectedPortShape=null,e}set(t){var e=this;FlowChart.ShapeTemplates[t.templateId]||console.error(`Shape template "${t.templateId}" does not exist!`),!FlowChart.private.isLabel(t)&&FlowChart.isNEU(t.id)&&(t.id=this.chart.generateId());var r=t.id;FlowChart.private.isLabel(t)||"string"==typeof r||(r=r.toString()),FlowChart.private.setDefaultPropertiesToShape(t);var i=function(t,r){var i=FlowChart.ShapeTemplates[t.templateId],o=i.html(t);if(p.querySelector("[data-html-container]").innerHTML=o,p.querySelector(".bfc-svg").innerHTML=i.svg(t),t.canWidthFitContent||t.canHeightFitContent){var a=e.chart._.getSizeOfHTML(o);if(t.canWidthFitContent){var h=a.width;h<i.minWidth&&(h=i.minWidth),e.setWidth(t,h)}if(i.canHeightFitContent){var s=a.height;s<i.minHeight&&(s=i.minHeight),e.setHeight(t,s)}}},o=new Proxy(t,{deleteProperty(t,r,o){var a=FlowChart.private.getShapeId(t);delete t[r];o=e.get(a);return i(o,0),!0},get(t,r,i){var o=FlowChart.ShapeTemplates[t.templateId];return"type"==r?"psuedo"==t.templateId?"psuedo-node":FlowChart.private.isLabel(t)?"label":"node":"top"==r?t.y-i.height/2:"bottom"==r?t.y+i.height/2:"left"==r?t.x-i.width/2:"right"==r?t.x+i.width/2:"id"==r&&"label"==i.type?FlowChart.private.getShapeId(t):"width"==r&&o.widthFitContent&&null==t.width?e.metadata[i.id]&&null!=e.metadata[i.id].width?e.metadata[i.id].width:o.width:"height"==r&&o.heightFitContent&&null==t.height?e.metadata[i.id]&&null!=e.metadata[i.id].height?e.metadata[i.id].height:o.height:"selected"==r?!(!e.metadata[i.id]||1!=e.metadata[i.id].selected):!("canWidthFitContent"!=r||!o.widthFitContent||null!=t.width)||(!("canHeightFitContent"!=r||!o.heightFitContent||null!=t.height)||("element"==r?e.getElement(i.id):Reflect.get(...arguments)))},set(t,r,o,a){if(a[r]==o)return!0;var h=FlowChart.ShapeTemplates[t.templateId];if("width"==r&&o<h.minWidth&&(o=h.minWidth),"height"==r&&o<h.minHeight&&(o=h.minHeight),"selected"==r&&e.setSelected(a,o),"SYSTEM_REFRESH_WITH_NEW_DYNAMIC_SIZE"!=r&&"selected"!=r&&(t[r]=o),"x"==r||"y"==r)p.setAttribute("transform",`translate(${a.left},${a.top})`);else if("width"==r||"height"==r||"SYSTEM_REFRESH_WITH_NEW_DYNAMIC_SIZE"==r){p.querySelector(".bfc-svg").innerHTML=h.svg(a);var s=p.querySelector(".bfc-html");s.setAttribute("width",Math.abs(a.width)),s.setAttribute("height",Math.abs(a.height)),p.setAttribute("transform",`translate(${a.left},${a.top})`)}if("x"==r||"y"==r||"width"==r||"height"==r||"SYSTEM_REFRESH_WITH_NEW_DYNAMIC_SIZE"==r){for(var l of(e.chart.selectedShapes._.update(e.chart.scale),e.chart.links))if(l.fromNodeId==a.id||l.toNodeId==a.id){var n=e.chart.getShape(l.fromNodeId),c=e.chart.getShape(l.toNodeId),d=e.chart.ports.get(l.fromNodeId,l.fromPortId),u=e.chart.ports.get(l.toNodeId,l.toPortId),f=FlowChart.private.linkFromTo(n,c,d,u);l.points=f}e.minMax(a)}return"selected"!=r&&"x"!=r&&"y"!=r&&"width"!=r&&"height"!=r&&"SYSTEM_REFRESH_WITH_NEW_DYNAMIC_SIZE"!=r&&i(a),e.chart._.changed(),!0}}),a=FlowChart.ShapeTemplates[t.templateId];if(a.widthFitContent||a.heightFitContent){var h=a.html(t),s=this.chart._.getSizeOfHTML(h);if(a.widthFitContent){var l=s.width;l<a.minWidth&&(l=a.minWidth),this.metadata[o.id]||(this.metadata[o.id]={}),this.metadata[o.id].width=l}if(a.heightFitContent){var n=s.height;n<a.minHeight&&(n=a.minHeight),this.metadata[o.id]||(this.metadata[o.id]={}),this.metadata[o.id].height=n}}h=a.html(o);var c=a.svg(o),p=document.createElementNS("http://www.w3.org/2000/svg","g");return p.innerHTML=`<g class="bfc-svg">${c}</g>\n                                    <foreignObject pointer-events="all" class="bfc-html" x="0" y="0" width="${o.width}" height="${o.height}"><div data-html-container class="bfc-flex-center">${h}</div></foreignObject>`,p.setAttribute("data-shape-id",o.id),p.setAttribute("transform",`translate(${o.left},${o.top})`),this.chart.svgElement.querySelector("[data-shapes-and-links]").appendChild(p),this.minMax(o),o}getElement(t){return this.chart.svgElement.querySelector(`[data-shape-id="${t}"]`)}remove(t,e){var r=!1;t instanceof FlowChart.SelectedShapeCollection||t instanceof FlowChart.ShapeCollection||Array.isArray(t)||(t=[t]);var i=[];for(var o of t)i.push(o.id);for(var a of i)for(var h=e.length-1;h>=0;h--)if(e[h].id==a){(o=e[h]).selected=!1,this.chart.selectedPortShape=null;var s=this.getElement(a);s&&s.parentNode.removeChild(s),this.chart.links.remove(a),r=!0,this.metadata[o.id]&&delete this.metadata[o.id],e.splice(h,1);break}r&&(this.minMaxIterateAll(e),this.chart._.changed())}move(t,e,r,i,o){if(t.length)if(e){if((e!=FlowChart.move.left&&e!=FlowChart.move.right||!this.moveHorizontallyInterval)&&(e!=FlowChart.move.up&&e!=FlowChart.move.down||!this.moveVerticallyInterval)){var a=1;FlowChart.isNEU(i)&&(i=FlowChart.anim.inSin),FlowChart.isNEU(o)&&(o=1100),e!=FlowChart.move.left&&e!=FlowChart.move.right||(this.moveHorizontallyInterval=setInterval(h,10)),e!=FlowChart.move.up&&e!=FlowChart.move.down||(this.moveVerticallyInterval=setInterval(h,10))}}else console.error("movePosition parameter not defined");function h(){var h=i((10*a-10)/o);for(var s of t)e==FlowChart.move.left?s.x-=FlowChart.MOVE_NODE_STEP*h:e==FlowChart.move.right?s.x+=FlowChart.MOVE_NODE_STEP*h:e==FlowChart.move.up?s.y-=FlowChart.MOVE_NODE_STEP*h:e==FlowChart.move.down&&(s.y+=FlowChart.MOVE_NODE_STEP*h);r&&r(),a+=1}}stopMoving(t){t==FlowChart.direction.vertical?this.moveVerticallyInterval&&(clearInterval(this.moveVerticallyInterval),this.moveVerticallyInterval=null):(t==FlowChart.direction.horizontal||this.moveVerticallyInterval&&(clearInterval(this.moveVerticallyInterval),this.moveVerticallyInterval=null),this.moveHorizontallyInterval&&(clearInterval(this.moveHorizontallyInterval),this.moveHorizontallyInterval=null))}minMax(t){t.left<this.minX&&(this.minX=t.left,this.minShapeX=t),t.top<this.minY&&(this.minY=t.top,this.minShapeY=t),t.right>this.maxX&&(this.maxX=t.right,this.maxShapeX=t),t.bottom>this.maxY&&(this.maxY=t.bottom,this.maxShapeY=t)}minMaxIterateAll(t){for(var e of t)this.minMax(e)}getMetadata(t){return this.metadata[t]||(this.metadata[t]={width:void 0,height:void 0}),this.metadata[t]}},FlowChart.LinkTemplates=class{static base=class{static svg(t){var e=FlowChart.private.roundPathCorners(t.points,FlowChart.LINK_ROUNDED_CORENERS,!1);return`<path d="${e}" class="bfc-link-path"></path>\n                    <path d="${e}" class="bfc-link-invisible"></path>\n                    <path d="${FlowChart.private.arrow(t.points)}" class="bfc-link-arrow"></path>`}}},FlowChart.LinkTemplates.psuedo=class extends FlowChart.LinkTemplates.base{static svg(t){var e=FlowChart.private.roundPathCorners(t.points,FlowChart.LINK_ROUNDED_CORENERS,!1);return`<path d="${e}" class="bfc-link-path" style="stroke: #FFCA28;"></path>\n                <path d="${e}" class="bfc-link-invisible""></path>\n                <path d="${FlowChart.private.arrow(t.points)}" class="bfc-link-arrow" style="stroke:#FFCA28;fill:#FFCA28;"></path>`}},FlowChart.ShapeTemplates=class{static base=class{static displayName="Base";static svg(t){return`<ellipse cx="${t.width/2}" cy="${t.height/2}" rx="${t.width/2}" ry="${t.height/2}" style="stroke:${t.stroke}; fill:${t.fill}; stroke-width:1;" />`}static html(t){return`<div style="padding: 10px;">\n                    ${null==t.content?"":`<p data-shape-field="content">${t.content}</p>`}                    \n                    </div>`}static ports={top:{x:50,y:0,shapes:["startend","rect"]},right:{x:100,y:50},bottom:{x:50,y:100},left:{x:0,y:50}};static width=100;static height=100;static minWidth=70;static minHeight=30;static fill="#039BE5";static stroke="#aeaeae";static widthFitContent=!1;static heightFitContent=!1;static displayInShapeBar=!1;static displayInPortShapeBar=!1;static resizable=!0}},FlowChart.ShapeTemplates.startend=class extends FlowChart.ShapeTemplates.base{static displayName="Start/End";static displayInShapeBar=!0;static displayInPortShapeBar=!0},FlowChart.ShapeTemplates.rectangle=class extends FlowChart.ShapeTemplates.base{static displayName="Rectangle";static svg(t){return`<rect rx="10" ry="10" x="0" y="0" width="${t.width}" height="${t.height}" style="stroke:${t.stroke}; fill:${t.fill}; stroke-width:3;" ></rect>`}static html(t){return`<div style="padding: 10px;">\n                     ${null==t.title?"":`<h1 data-shape-field="title">${t.title}</h1>`}                          \n                    ${null==t.text?"":`<div data-shape-field="text">${t.id}</div>`}                        \n                </div>`}static ports={top:{x:100,y:0},right:{x:200,y:30},bottom:{x:100,y:60},left:{x:0,y:30}};static minWidth=200;static minHeight=60;static width=200;static height=60;static widthFitContent=!0;static heightFitContent=!0;static displayInShapeBar=!0;static displayInPortShapeBar=!0},FlowChart.ShapeTemplates.diamond=class extends FlowChart.ShapeTemplates.base{static displayName="Diamond";static svg(t){return`<path d="M${t.width/2},0 L${t.width},${t.height/2} L${t.width/2},${t.height} L0,${t.height/2} Z" style="stroke:${t.stroke}; fill:${t.fill}; stroke-width:3;" /></path>`}static html(t){return`<div style="padding: 10px;">\n                    ${null==t.text?"":`<div data-shape-field="text">${t.id}</div>`}                        \n                </div>`}static ports={top:{x:100,y:0},right:{x:200,y:90},bottom:{x:100,y:180},left:{x:0,y:90}};static width=200;static height=180;static widthFitContent=!1;static heightFitContent=!1;static displayInShapeBar=!0;static displayInPortShapeBar=!0},FlowChart.ShapeTemplates.label=class extends FlowChart.ShapeTemplates.base{static displayName="Label";static svg(t){return`<rect class="bfc-label" x="0" y="0" width="${t.width}" height="${t.height}" style="stroke:${t.stroke}; fill:${t.fill}; stroke-width:1;" ></rect>`}static html(t){var e=t.text;return e||(e="[text]"),`<div style="padding: 2x;">\n                    <div data-shape-field="text" style="color: #aeaeae;">${e}</div>\n                </div>`}static ports={top:{x:10,y:0}};static width=20;static height=10;static fill="";static stroke="";static minWidth=0;static minHeight=0;static widthFitContent=!0;static heightFitContent=!0;static displayInShapeBar=!1;static displayInPortShapeBar=!1;static resizable=!1},FlowChart.ShapeTemplates.psuedo=class extends FlowChart.ShapeTemplates.base{static displayName="Psuedo";static svg(t){return`<circle r="${t.width/2}" cx="${t.width/2}" cy="${t.height/2}" style="stroke:${t.stroke}; fill:${t.fill}; stroke-width:1; opacity: 0;" ></circle>`}static html(t){return""}static ports={P1:{x:5,y:0},P2:{x:10,y:5},P3:{x:5,y:10},P4:{x:0,y:5}};static width=10;static height=10;static fill="red";static stroke="blue";static minWidth=0;static minHeight=0;static widthFitContent=!1;static heightFitContent=!1;static displayInShapeBar=!1;static displayInPortShapeBar=!1;static resizable=!1},FlowChart.UIMenuBar=class{_;constructor(t){this._=new FlowChart.UIMenuBar.private(t)}init(){this._.chart.options.menuBar||this._.chart.options.colors}html(){return this._.html()}},FlowChart.UIMenuBar.private=class{chart;element;constructor(t){this.chart=t}init(){this.element=this.chart.element.querySelector(".bfc-menubar")}undoReduRefresh(){if(this.chart.options.menuBar){var t=this.chart.element.querySelector('[data-menu-item="undo"]');t&&(0==this.chart._.undoStepsCount()?t.classList.add("bfc-disabled-opacity"):t.classList.remove("bfc-disabled-opacity"));var e=this.chart.element.querySelector('[data-menu-item="redo"]');e&&(0==this.chart._.redoStepsCount()?e.classList.add("bfc-disabled-opacity"):e.classList.remove("bfc-disabled-opacity"))}}simulateMouseClickOnKeydown(t){if(this.chart.options.menuBar){var e=this.element.querySelector(`[data-menu-item="${t}"]`);if(e){var r=function(t){e.classList.remove("bfc-menu-item-selected"),document.removeEventListener("keyup",r)};e.classList.add("bfc-menu-item-selected"),document.addEventListener("keyup",r)}}}handlerClick(t,e,r){if(this.chart.options.menuBar&&("undo"==e&&this.chart._.undo(),"redo"==e&&this.chart._.redo(),0==e.indexOf("color-"))){var i=e.split("-")[1],o=this.chart.options.colors[i];this.chart._.changeFill(o)}}html(){if(!this.chart.options.menuBar)return"";var t=`<div class="bfc-menu-item" title="Undo" data-menu-item="undo">${FlowChart.icon.undo(26,26,"#8B8B8B",0,0)}</div>\n                    <div class="bfc-menu-item" title="Redo  " data-menu-item="redo">${FlowChart.icon.redo(26,26,"#8B8B8B",0,0)}</div>\n\n\n                    `;t&&(t=`<div>${t}</div>`);for(var e="",r=0;r<this.chart.options.colors.length;r++){e+=`<div class="bfc-menu-item" data-color-item="${r}" data-menu-item="color-${r}"><div class="bfc-color-item"  style="background-color: ${this.chart.options.colors[r]}">${r+1}</div></div>`}return e&&(e=`<div data-color-palette class="bfc-color-palette">${e}</div>`),`<tr><td class="bfc-menubar">\n                        ${t}\n                        ${e}\n                    </td>\n                    </tr>`}},FlowChart.private.prototype.showPortsUI=function(){this.hidePortsUI();var t=this.chart.ports.getElement(this.selectedPortShape.id),e=this.selectedPortShape.element;!t&&e&&((t=document.createElementNS("http://www.w3.org/2000/svg","g")).classList.add("bfc-n-ports"),t.setAttribute("data-ports-n-id",this.selectedPortShape.id),t.setAttribute("transform",`translate(${this.selectedPortShape.left},${this.selectedPortShape.top})`),t.innerHTML=this.portHTMLUI(this.selectedPortShape,this.chart.scale),e.parentNode.insertBefore(t,e))},FlowChart.private.prototype.hidePortsUI=function(){this.hidePortShapeBarUI();for(var t=this.chart.svgElement.querySelectorAll("[data-ports-n-id]"),e=0;e<t.length;e++)t[e].parentNode.removeChild(t[e])},FlowChart.private.prototype.portHTMLUI=function(t,e){var r="",i=FlowChart.ShapeTemplates[t.templateId];if(!FlowChart.isNEU(i.ports)){for(var o in i.ports){var a=i.ports[o],h=40,s=40,l=a.x/(i.width/100),n=a.y/(i.height/100),c=l*(t.width/100),p=n*(t.height/100),d=0;switch(FlowChart.private.getPortPosition(a,i)){case FlowChart.position.topRight:p-=s/e,d=45;break;case FlowChart.position.bottomRight:d=135;break;case FlowChart.position.bottomLeft:c-=h/e,d=225;break;case FlowChart.position.topLeft:c-=h/e,p-=s/e,d=-45;break;case FlowChart.position.left:c-=h/e,p-=s/2/e,d=-90;break;case FlowChart.position.right:p-=s/2/e,d=90;break;case FlowChart.position.top:c-=h/2/e,p-=s/e;break;case FlowChart.position.bottom:c-=h/2/e,d=-180}r+=`<g  class="bfc-port-out" data-port-out="${t.id},${o}" transform="rotate(${d})"><rect style="opacity: 0" x="${c}" y="${p}" width="${h/e}" height="${s/e}"></rect>${FlowChart.icon.arrow(h/e,s/e,"#ffca28",c,p)}</g>`}r=`<rect style="opacity: 0" x="${-h/e}" y="${-s/e}" fill="green" width="${t.width+h/e*2}" height="${t.height+s/e*2}"></rect>`+r}return r},FlowChart.private.prototype.hidePortShapeBarUI=function(){for(var t=this.chart.element.querySelectorAll("[data-portshapebar-id]"),e=0;e<t.length;e++)t[e].parentNode.removeChild(t[e])},FlowChart.private.prototype.portShapeBarHTMLUI=function(){var t="";for(var e in FlowChart.ShapeTemplates){var r=FlowChart.ShapeTemplates[e];if(r.displayInPortShapeBar){var i={templateId:e};FlowChart.private.setDefaultPropertiesToShape(i),i.width=r.width,i.height=r.height,t+=`<div data-portshapebar-item-id="${e}">\n                    <svg class="bfc-portshapebar-svg" viewBox="0 0 ${i.width} ${i.height}" preserveAspectRatio="xMidYMid meet" >\n                        ${r.svg(i)}\n                    </svg>                   \n                </div>`}}return t},FlowChart.private.prototype.showPortShapeBarUI=function(t){var e=this.chart.ports.getByPosition(this.chart.selectedShapes.last(),t);e&&e.length&&(this.chart.selectedPort=e[0],this.selectPortShapeShapeBarItem(!1,this.lastAddedTemplateIdFormPortShapeBar))},FlowChart.private.prototype.navigatePortShapeBarItems=function(t){var e=this.chart.element.querySelector("[data-portshapebar-id]");if(e){var r=e.getAttribute("data-portshapebar-id"),i=this.chart.ports.getById(r),o=FlowChart.ShapeTemplates[i.shape.templateId],a=FlowChart.private.getPortPosition(o.ports[i.id],o);a==FlowChart.position.left&&(t==FlowChart.position.bottom&&this.selectPortShapeShapeBarItem(!0),t==FlowChart.position.top&&this.selectPortShapeShapeBarItem(!1),t==FlowChart.position.right&&this.showPortShapeBarByPosition(lastSelectedShape,t)),a==FlowChart.position.right&&(t==FlowChart.position.bottom&&this.selectPortShapeShapeBarItem(!0),t==FlowChart.position.top&&this.selectPortShapeShapeBarItem(!1),t==FlowChart.position.left&&this.showPortShapeBarByPosition(lastSelectedShape,t)),a==FlowChart.position.top&&(t==FlowChart.position.right&&this.selectPortShapeShapeBarItem(!0),t==FlowChart.position.left&&this.selectPortShapeShapeBarItem(!1),t==FlowChart.position.bottom&&this.showPortShapeBarByPosition(lastSelectedShape,t)),a==FlowChart.position.bottom&&(t==FlowChart.position.right&&this.selectPortShapeShapeBarItem(!0),t==FlowChart.position.left&&this.selectPortShapeShapeBarItem(!1),t==FlowChart.position.top&&this.showPortShapeBarByPosition(lastSelectedShape,t))}else this.showPortShapeBarByPosition(lastSelectedShape,t)},FlowChart.private.prototype.showPortShapeBarByPosition=function(t,e){var r=this.chart.ports.getByPosition(t,e);if(r&&r.length){var i=r[0];this.showPortShapeBar(i),this.selectPortShapeShapeBarItem(!1)}},FlowChart.private.prototype.createNodeFromPorsShapeBarItem=function(){this.selectedPort;var t=this.selectedPort,e=this.chart.element.querySelector(`[data-portshapebar-id="${t.shape.id},${t.id}"]`),r=e.querySelector(".bfc-portshapebar-selected");if(r){this.chart.editor._.hasActiveField()&&this.chart.editor.exit();var i=e.getAttribute("data-portshapebar-id"),o=this.chart.ports.getById(i),a=r.getAttribute("data-portshapebar-item-id");this.lastAddedTemplateIdFormPortShapeBar=a;for(var h={templateId:a},s=this.chart.editor._.getMissingFields(h),l=0;l<s.length;l++)h[s[l]]=`[${s[l]}]`;this.chart.nodes.add(h),h=this.chart.nodes.get(h.id),FlowChart.algorithm.devinCreateNode(h,o,this.chart.options,FlowChart.ShapeTemplates[a]);var n=this.chart.editor._.getExistedFields(h.id);this.chart.selectedShapes.clear(),this.chart.selectedShapes.add(h),this.chart.editor.edit(h.id,n[0]);var c=this.chart.ports.getByOpositeOfPosition(h.id,o.position)[0],p={from:`${o.shape.id},${o.id}`,to:`${c.shape.id},${c.id}`,templateId:"base"};this.chart.links.add(p),this.selectedPortShape=null}},FlowChart.private.prototype.selectPortShapeShapeBarItem=function(t,e){var r=this.chart.element.querySelector("[data-portshapebar-id]");if(r){for(var i=r.querySelectorAll("[data-portshapebar-item-id]"),o=-1,a=0;a<i.length;a++){(h=i[a]).classList.contains("bfc-portshapebar-selected")&&(o=a,h.classList.remove("bfc-portshapebar-selected"))}if(e){for(var h of i)if(h.getAttribute("data-portshapebar-item-id")==e){h.classList.add("bfc-portshapebar-selected");break}}else{t?o++:o--,o>=i.length?o=0:o<0&&(o=i.length-1);for(a=0;a<i.length;a++){h=i[a];o==a&&h.classList.add("bfc-portshapebar-selected")}}}},FlowChart.private.prototype.showPortShapeBar=function(){for(var t=this.chart.element.querySelectorAll("[data-portshapebar-id]"),e=0;e<t.length;e++)t[e].parentNode.removeChild(t[e]);var r=this.portShapeBarHTMLUI(this.selectedPort),i=document.createElement("div");i.classList.add("bfc-portshapebar"),i.setAttribute("data-portshapebar-id",`${this.selectedPort.shape.id},${this.selectedPort.id}`),i.innerHTML=r,this.chart.contentElement.appendChild(i);var o=this.chart.svgElement.querySelector(`[data-port-out="${this.selectedPort.shape.id},${this.selectedPort.id}"]`),a=this.chart.svgElement.querySelector(`[data-ports-n-id="${this.selectedPort.shape.id}"]`),h=this.chart.svgElement.querySelectorAll(".bfc-ports-visible");for(var s of h)s.classList.remove("bfc-ports-visible");a.classList.add("bfc-ports-invisible"),o.classList.add("bfc-ports-visible");var l=o.getBoundingClientRect(),n=this.chart.svgElement.getBoundingClientRect(),c=i.getBoundingClientRect(),p=0,d=0,u=parseFloat(window.getComputedStyle(i,null).getPropertyValue("padding-top")),f=parseFloat(window.getComputedStyle(i,null).getPropertyValue("padding-bottom")),y=0;switch(this.selectedPort.position){case FlowChart.position.top:p=l.left+l.width/2-n.left-c.width/2,d=l.top-n.top-c.height+3;break;case FlowChart.position.bottom:p=l.left+l.width/2-n.left-c.width/2,d=l.bottom-n.top-3;break;case FlowChart.position.left:i.style.width=c.height-(u+f)+"px",c=i.getBoundingClientRect(),p=l.left-n.left-c.width+3,d=l.bottom-n.top-l.height/2-c.height/2;break;case FlowChart.position.right:i.style.width=c.height-(u+f)+"px",c=i.getBoundingClientRect(),p=l.right-n.left-3,d=l.bottom-n.top-l.height/2-c.height/2;break;case FlowChart.position.topLeft:y=135,p=l.left-n.left-c.width/2+3,d=l.top-n.top-c.height/2+3;break;case FlowChart.position.topRight:y=45,p=l.right-n.left-c.width/2-3,d=l.top-n.top-c.height/2+3;break;case FlowChart.position.bottomRight:y=135,p=l.right-n.left-c.width/2-3,d=l.bottom-n.top-c.height/2-3;break;case FlowChart.position.bottomLeft:y=45,p=l.left-n.left-c.width/2+3,d=l.bottom-n.top-c.height/2-3}i.style.left=p+"px",i.style.top=d+"px",i.style.transformOrigin="center",i.style.transform=`rotate(${y}deg)`},FlowChart.SelectedShapeCollection=class extends Array{_;constructor(t){super(),this._=new FlowChart.SelectedShapeCollection.private(t)}add(t){t.selected?(this.push(t),FlowChart.events.publish("selected-shapes-changed",[this._.chart])):t.selected=!0}remove(t){if(t.selected)t.selected=!1;else for(var e=this.length-1;e>=0;e--)if(t==this[e])return this.splice(e,1),void FlowChart.events.publish("selected-shapes-changed",[this._.chart])}clear(){this._.chart.nodes._.clearSelectedMetadata(),this._.chart.labels._.clearSelectedMetadata(),this.splice(0,this.length),FlowChart.events.publish("selected-shapes-changed",[this._.chart])}first(){return this.length?this[0]:null}last(){return this.length?this[this.length-1]:null}nodes(){var t=[];for(var e of this)"label"!=e.type&&t.push(e);return t}labels(){var t=[];for(var e of this)"label"==e.type&&t.push(e);return t}addRange(t){for(var e of t)this.add(e)}get(t){for(var e of this)if(e.id==t)return e;return null}contains(t){return null!=this.get(t)}selectNodeRight(t){this._.selectRight(this._.chart.nodes,t,this)}selectNodeLeft(t){this._.selectLeft(this._.chart.nodes,t,this)}selectNodeAbove(t){this._.selectAbove(this._.chart.nodes,t,this)}selectNodeBelow(t){this._.selectBelow(this._.chart.nodes,t,this)}},FlowChart.SelectedShapeCollection.private=class{chart;arrayBeforeShiftPressed;constructor(t){this.chart=t,this.arrayBeforeShiftPressed=[]}selectRight(t,e,r){var i=r[r.length-1],o=null;for(var a of t){var h;if(a!=i)if(i.right-a.left<=0)if(null==o)o={shape:a,hypot:h=Math.hypot(a.y-i.y,a.left-i.right)};else(h=Math.hypot(a.y-i.y,a.left-i.right))<o.hypot&&(o={shape:a,hypot:h})}this.hideAndShowNext(o,e,r)}selectLeft(t,e,r){var i=r[r.length-1],o=null;for(var a of t)if(a!=i&&i.left-a.right>=0)if(null==o){var h=Math.hypot(a.y-i.y,a.right-i.left);console.log(`${h} for ${a.id} r ${a.right}`),o={shape:a,hypot:h}}else{h=Math.hypot(a.y-i.y,a.right-i.left);console.log(`${h} for ${a.id} r ${a.right}`),h<o.hypot&&(o={shape:a,hypot:h})}this.hideAndShowNext(o,e,r)}selectAbove(t,e,r){var i=r[r.length-1],o=null;for(var a of t){var h;if(a!=i)if(i.top-a.bottom>=0)if(null==o)o={shape:a,hypot:h=Math.hypot(a.x-i.x,a.bottom-i.top)};else(h=Math.hypot(a.x-i.x,a.bottom-i.top))<o.hypot&&(o={shape:a,hypot:h})}this.hideAndShowNext(o,e,r)}selectBelow(t,e,r){var i=r[r.length-1];console.log(i.id);var o=null;for(var a of t){var h;if(i.bottom-a.top<=0)if(null==o)o={shape:a,hypot:h=Math.hypot(a.x-i.x,a.top-i.bottom)};else(h=Math.hypot(a.x-i.x,a.top-i.bottom))<o.hypot&&(o={shape:a,hypot:h})}this.hideAndShowNext(o,e,r)}hideAndShowNext(t,e,r){if(t){for(var i of(e&&(console.log("deselectAll"),r.clear()),r))-1==this.arrayBeforeShiftPressed.indexOf(i)&&(i.selected=!1);t.shape.selected=!0}}update(t){for(var e=this.chart.svgElement.querySelectorAll("[data-selector-shape-id]"),r=0;r<e.length;r++){var i=e[r],o=i.getAttribute("data-selector-shape-id"),a=this.chart.getShape(o),h=i.querySelector(".bfc-selector-rect");h.setAttribute("x",a.left),h.setAttribute("y",a.top),h.setAttribute("width",a.width),h.setAttribute("height",a.height),h.setAttribute("stroke-width",1/t);for(var s=1;s<=2;s++){var l=i.querySelector(`[data-selector-dot-${s}="topLeft"]`);l&&(l.setAttribute("cx",a.left),l.setAttribute("cy",a.top),l.setAttribute("transform",`scale(${1/t})`));var n=i.querySelector(`[data-selector-dot-${s}="top"]`);n&&(n.setAttribute("cx",a.x),n.setAttribute("cy",a.top),n.setAttribute("transform",`scale(${1/t})`));var c=i.querySelector(`[data-selector-dot-${s}="topRight"]`);c&&(c.setAttribute("cx",a.right),c.setAttribute("cy",a.top),c.setAttribute("transform",`scale(${1/t})`));var p=i.querySelector(`[data-selector-dot-${s}="right"]`);p&&(p.setAttribute("cx",a.right),p.setAttribute("cy",a.y),p.setAttribute("transform",`scale(${1/t})`));var d=i.querySelector(`[data-selector-dot-${s}="bottomRight"]`);d&&(d.setAttribute("cx",a.right),d.setAttribute("cy",a.bottom),d.setAttribute("transform",`scale(${1/t})`));var u=i.querySelector(`[data-selector-dot-${s}="bottom"]`);u&&(u.setAttribute("cx",a.x),u.setAttribute("cy",a.bottom),u.setAttribute("transform",`scale(${1/t})`));var f=i.querySelector(`[data-selector-dot-${s}="bottomLeft"]`);f&&(f.setAttribute("cx",a.left),f.setAttribute("cy",a.bottom),f.setAttribute("transform",`scale(${1/t})`));var y=i.querySelector(`[data-selector-dot-${s}="left"]`);y&&(y.setAttribute("cx",a.left),y.setAttribute("cy",a.y),y.setAttribute("transform",`scale(${1/t})`))}}}hideUI(){var t=this.chart.svgElement.querySelectorAll("[data-selector-shape-id]");for(var e of t)e.style.display="none"}showUI(){var t=this.chart.svgElement.querySelectorAll("[data-selector-shape-id]");for(var e of t)e.style.display=""}removeSelectorElement(t){var e=this.chart.svgElement.querySelector(`[data-selector-shape-id="${t.id}"]`);e&&e.parentNode.removeChild(e)}createSelectorElement(t){var e=document.createElementNS("http://www.w3.org/2000/svg","g");e.classList.add("bfc-n-selector"),e.setAttribute("data-selector-shape-id",t.id),e.setAttribute("data-selector-shape-type",t.type),e.innerHTML=this.html(t,this.chart.scale),this.chart.svgElement.querySelector("[data-shapes-and-links]").appendChild(e)}html(t,e){var r=1/e,i=`<rect stroke-width="${r}" class="bfc-selector-rect" x="${t.left}" y="${t.top}" width="${t.width}" height="${t.height}"></rect>`;return FlowChart.ShapeTemplates[t.templateId].resizable&&(i+=`<circle transform="scale(${r})" data-selector-dot-1="topLeft" cx="${t.left}" cy="${t.top}" r="5"></circle>\n            <circle transform="scale(${r})" data-selector-dot-1="top"  cx="${t.x}" cy="${t.top}" r="5"></circle>\n            <circle transform="scale(${r})" data-selector-dot-1="topRight"  cx="${t.right}" cy="${t.top}" r="5"></circle>\n            <circle transform="scale(${r})" data-selector-dot-1="right"  cx="${t.right}" cy="${t.y}" r="5"></circle>\n            <circle transform="scale(${r})" data-selector-dot-1="bottomRight"  cx="${t.right}" cy="${t.bottom}" r="5"></circle>\n            <circle transform="scale(${r})" data-selector-dot-1="bottom"  cx="${t.x}" cy="${t.bottom}" r="5"></circle>\n            <circle transform="scale(${r})" data-selector-dot-1="bottomLeft"  cx="${t.left}" cy="${t.bottom}" r="5"></circle>\n            <circle transform="scale(${r})" data-selector-dot-1="left"  cx="${t.left}" cy="${t.y}" r="5"></circle>                   \n            \n            <circle transform="scale(${r})" data-selector-dot-2="topLeft" cx="${t.left}" cy="${t.top}" r="10"></circle>\n            <circle transform="scale(${r})" data-selector-dot-2="top"  cx="${t.x}" cy="${t.top}" r="10"></circle>\n            <circle transform="scale(${r})" data-selector-dot-2="topRight"  cx="${t.right}" cy="${t.top}" r="10"></circle>\n            <circle transform="scale(${r})" data-selector-dot-2="right"  cx="${t.right}" cy="${t.y}" r="10"></circle>\n            <circle transform="scale(${r})" data-selector-dot-2="bottomRight"  cx="${t.right}" cy="${t.bottom}" r="10"></circle>\n            <circle transform="scale(${r})" data-selector-dot-2="bottom"  cx="${t.x}" cy="${t.bottom}" r="10"></circle>\n            <circle transform="scale(${r})" data-selector-dot-2="bottomLeft"  cx="${t.left}" cy="${t.bottom}" r="10"></circle>\n            <circle transform="scale(${r})" data-selector-dot-2="left" cx="${t.left}" cy="${t.y}" r="10"></circle>`),i}},FlowChart.Editor=class{_;element;constructor(t){this._=new FlowChart.Editor.private(t)}exit(){for(var t=this._.chart.svgElement.querySelectorAll("[contenteditable]"),e=0;e<t.length;e++){t[e].blur()}}editNextField(){for(var t=this._.chart.svgElement.querySelector("[contenteditable]"),e=t.getAttribute("data-shape-field"),r=t;!r.hasAttribute("data-shape-id");)r=r.parentNode;var i=r.getAttribute("data-shape-id"),o=this._.getExistedFields(i),a=o.indexOf(e);(a+=1)==o.length&&(a=0);var h=o[a];this.edit(i,h)}addField(t,e){var r=this._.chart.nodes.get(t);r[e]||(r[e]=`[${e}]`)}removeField(t,e){var r=this._.chart.nodes.get(t);return r[e]&&delete r[e],this}edit(t,e){for(var r=this._.chart.svgElement.querySelectorAll("[contenteditable]"),i=0;i<r.length;i++){r[i].blur()}if(!e){var o=this._.getExistedFields(t);e=o[0]}var a=this,h=this._.chart.svgElement.querySelector(`[data-shape-id="${t}"] [data-shape-field="${e}"]`);h.setAttribute("contenteditable",""),FlowChart.events.publish("editor-field-focused",[this._.chart,{nodeId:t,fieldName:e}]);var s=document.createRange();s.selectNodeContents(h);var l=window.getSelection();l.removeAllRanges(),l.addRange(s),h.focus(),h.blurAdded||(h.addEventListener("blur",(function(r){for(var i=a._.chart.svgElement.querySelector("[contenteditable]"),o=i.getAttribute("data-shape-field"),h=i.innerHTML,s=i;!s.hasAttribute("data-shape-id");)s=s.parentNode;var l=s.getAttribute("data-shape-id"),n=a._.chart.getShape(l);n[o]!=h&&a._.chart._.snapshot();var c={nodeId:t,fieldName:e,newValue:h,oldValue:n[o]};n[o]=h,i.removeAttribute("contenteditable"),FlowChart.events.publish("editor-field-changed",[a._.chart,c])})),h.blurAdded=!0)}},FlowChart.Editor.private=class{chart;constructor(t){this.chart=t}getMissingFields(t){var e=FlowChart.ShapeTemplates[t.templateId].html.toString().match(/data-shape-field\=\"([A-Za-z0-9 _]*)\"/gm),r=[];if(e)for(var i=0;i<e.length;i++){var o=e[i];o=(o=o.replace('data-shape-field="',"")).substring(0,o.length-1),this.chart.svgElement.querySelector(`[data-shape-id="${t.id}"] [data-shape-field="${o}"]`)||r.push(o)}return r}hasActiveField(){return null!=this.chart.svgElement.querySelector("[data-shape-field][contenteditable]")}getExistedFields(t){for(var e=this.chart.svgElement.querySelectorAll(`[data-shape-id="${t}"] [data-shape-field]`),r=[],i=0;i<e.length;i++){var o=e[i].getAttribute("data-shape-field");r.push(o)}return r}},FlowChart.events.on("undo-redo-changed",(function(t){t.uiMenuBar._.undoReduRefresh(),t.uiStatusBar._.refreshHint()})),FlowChart.events.on("init",(function(t){t.uiMenuBar._.undoReduRefresh()})),FlowChart.events.on("selected-shapes-changed",(function(t){console.log("selected-shapes-changed "+t.selectedShapes.length),t.uiStatusBar._.refreshHint()})),FlowChart.events.on("selected-port-changed",(function(t){console.log("selected-port-changed "+t.selectedPort),t.uiStatusBar._.refreshHint()})),FlowChart.events.on("editor-field-focused",(function(t,e){t.uiStatusBar._.refreshHint()})),FlowChart.events.on("editor-field-changed",(function(t,e){t.uiStatusBar._.refreshHint()})),FlowChart.UIStatusBar=class{_;constructor(t){this._=new FlowChart.UIStatusBar.private(t)}init(){this._.init()}html(){return this._.html()}},FlowChart.UIStatusBar.private=class{chart;element;constructor(t){this.chart=t}init(){this.chart.options.statusBar&&(this.element=this.chart.element.querySelector(".bfc-statusbar"))}refreshHint(){if(this.chart.options.statusBar){var t=this.chart._.getActiveComponentTypes(),e=this.element.querySelector("[data-status-hint]");if(e){if(-1!=t.indexOf("node")){for(var r=this.chart.selectedShapes.last(),i=[],o=0;o<this.chart.options.colors.length;o++){var a=this.chart.options.colors[o];r.fill!=a&&i.push(o+1)}var h="";for(o=0;o<i.length;o++)0==o?h+=i[o]:o==i.length-1?h+=` or ${i[o]}`:h+=`, ${i[o]}`;e.innerHTML=`Press CTRL + Arrow to open port; Press Interval or Edit to edit; Press ${h} to change the color;`}if(-1!=t.indexOf("label")&&(e.innerHTML="Press Interval or Edit to edit the label;"),-1!=t.indexOf("field")){var s="Press Escape to finish editing; Press CTRL + Arrow to open port;",l=this.chart.selectedShapes.last();l&&this.chart.editor._.getExistedFields(l.id).length>1&&(s+=" TAB to Edit the next field;"),e.innerHTML=s}-1!=t.indexOf("port-shape-bar")&&(e.innerHTML="Select Shape with Arrows and press eneter to add new node;")}}}html(){return this.chart.options.statusBar?'<tr><td class="bfc-statusbar"><div data-status-hint>&nbsp;</div></td></tr>':""}},FlowChart.UIShapeBar=class{_;element;constructor(t){this._=new FlowChart.UIShapeBar.private(t)}init(){this._.chart.options.shapeBar&&(this.element=this._.chart.element.querySelector(".bfc-shapebar"))}html(){if(!this._.chart.options.shapeBar)return"";var t="";for(var e in FlowChart.ShapeTemplates){var r=FlowChart.ShapeTemplates[e];if(r.displayInShapeBar){var i={templateId:e};FlowChart.private.setDefaultPropertiesToShape(i),i.width=r.width,i.height=r.height;var o=r.displayName;t+=`<div data-shapebar-item-id="${e}">\n                        <svg ${a=""} class="bfc-shapebar-svg" viewBox="0 0 ${i.width} ${i.height}" preserveAspectRatio="xMidYMid meet" >\n                            ${r.svg(i)}\n                        </svg>\n                        <div>${o}</div>              \n                    </div>`}}var a="";if(null!==sessionStorage.getItem("shapebar-position")){var h=JSON.parse(sessionStorage.getItem("shapebar-position"));a=`style="top:${h.top}px;left:${h.left}px;"`}return`<div class="bfc-shapebar" ${a}>\n                    <div class="bfc-shapebar-move">\n                        <div class="bfc-shapebar-move-line"></div>\n                    </div>\n                    <div class="bfc-shapebar-shapes">\n                        ${t}  \n                    </div>      \n                </div>`}},FlowChart.UIShapeBar.private=class{chart;constructor(t){this.chart=t}},FlowChart.private.prototype.undo=function(){var t=this.undoStepsCount();if(0!=t){this.putInRedoStack(),this.chart.nodes.clear();var e=`${this.uid}_undo_`+(t-1),r=sessionStorage.getItem(e);sessionStorage.removeItem(e);var i=JSON.parse(r);this.chart.load(i),this.chart._.changed(!0),FlowChart.events.publish("undo-redo-changed",[this.chart])}},FlowChart.private.prototype.redo=function(){var t=this.redoStepsCount();if(0!=t){this.putInUndoStack(),this.chart.nodes.clear();var e=`${this.uid}_redo_`+(t-1),r=sessionStorage.getItem(e);sessionStorage.removeItem(e);var i=JSON.parse(r);this.chart.load(i),this.chart._.changed(!0),FlowChart.events.publish("undo-redo-changed",[this.chart])}},FlowChart.private.prototype.undoStepsCount=function(){for(var t=`${this.uid}_undo_`,e=Object.keys(sessionStorage),r=0;-1!=e.indexOf(t+r);)r++;return r},FlowChart.private.prototype.redoStepsCount=function(){for(var t=`${this.uid}_redo_`,e=Object.keys(sessionStorage),r=0;-1!=e.indexOf(t+r);)r++;return r},FlowChart.private.prototype.putInRedoStack=function(){var t=`${this.uid}_redo_`+this.redoStepsCount();sessionStorage.setItem(t,this.chart.text())},FlowChart.private.prototype.snapshot=function(t){this.putInUndoStack(t),this.clearRedo()},FlowChart.private.prototype.putInUndoStack=function(t){var e=`${this.uid}_undo_`+this.undoStepsCount();t?sessionStorage.setItem(e,t):sessionStorage.setItem(e,this.chart.text())},FlowChart.private.prototype.clearRedo=function(){for(var t=`${this.uid}_redo_`,e=Object.keys(sessionStorage),r=0;-1!=e.indexOf(t+r);)sessionStorage.removeItem(t+r),r++;FlowChart.events.publish("undo-redo-changed",[this.chart])},FlowChart.private.prototype.clearUndo=function(){for(var t=`${this.uid}_undo_`,e=Object.keys(sessionStorage),r=0;-1!=e.indexOf(t+r);)sessionStorage.removeItem(t+r),r++;FlowChart.events.publish("undo-redo-changed",[this.chart])},FlowChart.private.isObject=function(t){return t&&"object"==typeof t&&!Array.isArray(t)&&null!==t},FlowChart.private.shadeColor=function(t,e){var r=parseInt(t.substring(1,3),16),i=parseInt(t.substring(3,5),16),o=parseInt(t.substring(5,7),16);return r=(r=parseInt(r*(100+e)/100))<255?r:255,i=(i=parseInt(i*(100+e)/100))<255?i:255,o=(o=parseInt(o*(100+e)/100))<255?o:255,r=Math.round(r),i=Math.round(i),o=Math.round(o),"#"+(1==r.toString(16).length?"0"+r.toString(16):r.toString(16))+(1==i.toString(16).length?"0"+i.toString(16):i.toString(16))+(1==o.toString(16).length?"0"+o.toString(16):o.toString(16))},FlowChart.private.mergeDeep=function(t,e){if(FlowChart.private.isObject(t)&&FlowChart.private.isObject(e))for(var r in e)FlowChart.private.isObject(e[r])?(t[r]||Object.assign(t,{[r]:{}}),FlowChart.private.mergeDeep(t[r],e[r])):Object.assign(t,{[r]:e[r]});return t},FlowChart.private.guid=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},FlowChart.private.rotate=function(t,e,r){var i=Math.PI/180*r,o=Math.cos(i),a=Math.sin(i);return{x:o*(e.x-t.x)+a*(e.y-t.y)+t.x,y:o*(e.y-t.y)-a*(e.x-t.x)+t.y}},FlowChart.private.getScale=function(t,e,r){var i=e/t[2],o=r/t[3];return i>o?o:i},FlowChart.private.getViewBox=function(t){var e=null;return t?(e=(e="["+(e=t.getAttribute("viewBox"))+"]").replace(/\ /g,","),e=JSON.parse(e)):null},FlowChart.private.pinchMiddlePointInPercent=function(t,e,r,i){var o=OrgChart._getTopLeft(t),a=i.touches[0].pageX-o.x,h=i.touches[0].pageY-o.y,s=i.touches[1].pageX-o.x,l=i.touches[1].pageY-o.y;return[((a-s)/2+s)/(e/100),((h-l)/2+l)/(r/100)]},FlowChart.private.trim=function(t){return t.replace(/^\s+|\s+$/g,"")},FlowChart.private.getClientTouchesXY=function(t,e){return-1!=t.type.indexOf("touch")?t.touches.length<e+1?{x:null,y:null}:{x:t.touches[e].clientX,y:t.touches[e].clientY}:{x:t.clientX,y:t.clientY}},FlowChart.private.setDefaultPropertiesToShape=function(t){t||console.error("shape is not initialized!"),FlowChart.isNEU(t.templateId)&&console.error("shape.templateId cannot be null or empty!");var e=FlowChart.ShapeTemplates[t.templateId];e.widthFitContent||null!=t.width||(t.width=e.width),e.heightFitContent||null!=t.height||(t.height=e.height),null==t.x&&(t.x=0),null==t.y&&(t.y=0),null==t.fill&&(t.fill=e.fill),null==t.stroke&&(t.stroke=e.stroke)},FlowChart.private.roundPathCorners=function(t,e,r){function i(t,e,r){var i=e.x-t.x,a=e.y-t.y,h=Math.sqrt(i*i+a*a);return o(t,e,Math.min(1,r/h))}function o(t,e,r){return{x:t.x+(e.x-t.x)*r,y:t.y+(e.y-t.y)*r}}function a(t,e){t.length>2&&(t[t.length-2]=e.x,t[t.length-1]=e.y)}function h(t){return{x:parseFloat(t[t.length-2]),y:parseFloat(t[t.length-1])}}if(Array.isArray(t)&&t.length&&!Array.isArray(t[0])){for(var s=[],l=0;l<t.length;l++){var n=t[l];0==l?s.push(["M",n.x,n.y]):s.push(["L",n.x,n.y])}t=s}if(Array.isArray(t)){if(Array.isArray(t)){var c=[];for(l=0;l<t.length;l++)c[l]=t[l].slice(0);t=c}}else t=(t=t.split(/[,\s]/).reduce((function(t,e){var r=e.match("([a-zA-Z])(.+)");return r?(t.push(r[1]),t.push(r[2])):t.push(e),t}),[])).reduce((function(t,e){return parseFloat(e)==e&&t.length?t[t.length-1].push(e):t.push([e]),t}),[]);var p=[];if(t.length>1){var d=h(t[0]),u=null;"Z"==t[t.length-1][0]&&t[0].length>2&&(u=["L",d.x,d.y],t[t.length-1]=u),p.push(t[0]);for(var f=1;f<t.length;f++){var y=p[p.length-1],w=t[f],C=w==u?t[1]:t[f+1];if(C&&y&&y.length>2&&"L"==w[0]&&C.length>2&&"L"==C[0]){var v,g,m=h(y),N=h(w),x=h(C);r?(v=o(N,y.origPoint||m,e),g=o(N,C.origPoint||x,e)):(v=i(N,m,e),g=i(N,x,e)),a(w,v),w.origPoint=N,p.push(w);var I=o(v,N,.5),S=o(N,g,.5),F=["C",I.x,I.y,S.x,S.y,g.x,g.y];F.origPoint=N,p.push(F)}else p.push(w)}if(u){var b=h(p[p.length-1]);p.push(["Z"]),a(p[0],b)}}else p=t;return p.reduce((function(t,e){return t+e.join(" ")+" "}),"")},FlowChart.private.arrow=function(t){var e=t[t.length-1],r=e,i={x:e.x-15,y:e.y-8},o={x:e.x-15,y:e.y+8},a=t[t.length-2],h=180*-Math.atan2(a.y-e.y,a.x-e.x)/Math.PI;return i=FlowChart.private.rotate(e,i,h+180),o=FlowChart.private.rotate(e,o,h+180),`M${r.x},${r.y} ${i.x},${i.y} ${o.x},${o.y}`},FlowChart.private.getViewBox=function(t){var e=null;return t?(e=(e="["+(e=t.getAttribute("viewBox"))+"]").replace(/\ /g,","),e=JSON.parse(e)):null},FlowChart.private.centerPointInPercent=function(t,e,r){var i=t.getBoundingClientRect(),o=e-i.left,a=r-i.top;return[o/(i.width/100),a/(i.height/100)]},FlowChart.private.uid=function(t){var e=[],r=0;for(const e of t.parentNode.children){if(e===t)break;r++}for(e.push(r);t;)e.push(t.tagName),t=t.parentNode;return e.reverse(),e.join(">")},FlowChart.private.getPortPosition=function(t,e){return t.x==e.width&&0==t.y?FlowChart.position.topRight:t.x==e.width&&t.y==e.height?FlowChart.position.bottomRight:0==t.x&&t.y==e.height?FlowChart.position.bottomLeft:0==t.x&&0==t.y?FlowChart.position.topLeft:t.x>0&&t.x<e.width&&0==t.y?FlowChart.position.top:t.x==e.width&&t.y>0&&t.y<e.height?FlowChart.position.right:t.x>0&&t.x<e.width&&t.y==e.height?FlowChart.position.bottom:0==t.x&&t.y>0&&t.y<e.height?FlowChart.position.left:(console.error("The port position is not supported!"),null)},FlowChart.private.replaceRightLeftKeyCodes=function(t){return t.replace("AltLeft","alt").replace("AltRight","alt").replace("ControlLeft","control").replace("ControlRight","control").replace("ShiftLeft","shift").replace("ShiftRight","shift").toLowerCase()},FlowChart.private.menuPosition=function(t,e,r){var i=t.getBoundingClientRect(),o=r.getBoundingClientRect(),a=e.getBoundingClientRect(),h=i.left-o.left,s=i.top-o.top;return i.top+a.height>o.top+o.height&&(s-=a.height),i.left-a.width<o.left&&(h+=a.width),{x:h,y:s}},FlowChart.private.printableKeyCode=function(t){return t>47&&t<58||32==t||13==t||t>64&&t<91||t>95&&t<112||t>185&&t<193||t>218&&t<223},FlowChart.private.getFirstPointIndexByMousePosition=function(t,e,r){var i=e.createSVGPoint();i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse());for(var o=Number.MAX_VALUE,a=0,h=0;h<r.points.length-1;h++){var s=r.points[h],l=r.points[h+1],n=Math.hypot(s.x-l.x,s.y-l.y),c=Math.hypot(i.x-s.x,i.y-s.y),p=Math.hypot(i.x-l.x,i.y-l.y);c+p-n<o&&(o=c+p-n,a=h)}return a},FlowChart.private.setLabelXY=function(t,e){for(var r=e.length/100*t.position,i=0,o=0,a=null==t.movex?0:t.movex,h=null==t.movey?0:t.movey,s=0;s<e.points.length-1;s++){var l=e.points[s],n=e.points[s+1],c=Math.hypot(n.x-l.x,n.y-l.y);if(i+c>=r){o=s;break}i+=c}l=e.points[o],n=e.points[o+1];var p=FlowChart.direction.horizontal;e.points[o].x==e.points[o+1].x&&(p=FlowChart.direction.vertical),p==FlowChart.direction.horizontal?(l.x<n.x?t.x=l.x+(r-i)+a:t.x=l.x-(r-i)+a,t.y=l.y+h):(l.y<n.y?t.y=l.y+(r-i)+h:t.y=l.y-(r-i)+h,t.x=l.x+a)},FlowChart.private.isLabel=function(t){return!(FlowChart.isNEU(t.from)||FlowChart.isNEU(t.to)||FlowChart.isNEU(t.position))},FlowChart.private.getShapeId=function(t){return FlowChart.private.isLabel(t)?`${t.from.replaceAll(",","_")}->${t.to.replaceAll(",","_")}->${t.position}`:t.id};