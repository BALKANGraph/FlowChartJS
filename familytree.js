/* eslint-disable */ var FamilyTree=class{_;get element(){return this._.element}get options(){return this._.options}get focusId(){return this._.focusId}set focusId(t){this._.focusId=t}get people(){return this._.people}constructor(t,e){this._=new FamilyTree.private(this,t,e)}load(t,e){this._.load(t,e)}onPeopleChanged(t){return this._.on("people-changed",(function(e,i){return t.call(e,i)}))}onFocusChanged(t){return this._.on("focus-changed",(function(e,i){return t.call(e,i)}))}};FamilyTree.private=class{familyTree;public;graph;chart;options;element;initialized;people;uid;static countFamilyTrees=0;constructor(t,e,i){var a=this;this.familyTree=t,this.people=[],this.element=e,this.options=i,this.element.classList.add("bft-familytree"),this.initialized=!1,this.uid=window.location.pathname+"/"+FlowChart.private.countFamilyTrees,FlowChart.private.countFamilyTrees++,this.focusId=null,this.chart=new FlowChart(this.element,{colors:["#DC4FAD","#F57C00","#008A17","#039BE5","#4617B4","#8C0095","#004B8B"],mode:this.options.mode,scaleMax:100,useSession:!1,logoSvg:FamilyTree.logo}),this.chart.statusBar._.useRefreshHint=!1,this.chart.statusBar.content="",this.chart.menuBar.removeItem("undo"),this.chart.menuBar.removeItem("redo"),this.chart.menuBar.show(),this.chart.onFieldChange((function(t){for(var e of a.people)e.id==t.shape.id&&(e[t.fieldName]=t.newValue);FamilyTree.events.publish("people-changed",[a.familyTree,{}])})),this.chart.onSelectedPortChange((function(t){return!1})),this.chart.onShapeDoubleClick((function(t){})),this.chart.onSvgClick((function(t){})),this.chart.onChanged((function(t){})),this.chart.onShapeClick((function(t){a.onShapeClickHandler(t)})),this.chart.onSelectedShapesChanged((function(t){a.onSelectedChangedHandler()})),this.chart.onLinkPoints((function(t){a.onLinkPoints(t)}))}addChild(t,e){this.people.push(t),FamilyTree.events.publish("people-changed",[this.familyTree,{}]),this.load(this.focusId,null,e)}addSpouse(t,e){for(var i of(t.spouses&&t.spouses.length||console.error("spouse.spouses is empty"),t.spouses))for(var a of this.people)a.id==i&&(null==a.spouses&&(a.spouses=[]),a.spouses.push(t.id));this.people.push(t),FamilyTree.events.publish("people-changed",[this.familyTree,{}]),this.load(this.focusId,null,e)}addSibling(t,e){for(var i of(t.siblings&&t.siblings.length||console.error("sibling.siblings is empty"),t.siblings))for(var a of this.people)a.id==i&&(null==a.siblings&&(a.siblings=[]),a.siblings.push(t.id));this.people.push(t),FamilyTree.events.publish("people-changed",[this.familyTree,{}]),this.load(this.focusId,null,e)}addParent(t,e,i){for(var a of this.people)a.id==t&&(null==a.parents&&(a.parents=[]),a.parents.push(e.id));this.people.push(e),FamilyTree.events.publish("people-changed",[this.familyTree,{}]),this.load(this.focusId,null,i)}addChildWithParents(t,e){this.people.push(t),FamilyTree.events.publish("people-changed",[this.familyTree,{}]),this.load(this.focusId,null,e)}addLabels(){for(var t of this.chart.links){var e=this.chart.nodes.get(t.from),i=this.chart.nodes.get(t.to),a="";a=e.parents.includes(i.id)?"parent":a,a=e.spouses.includes(i.id)?"spouse":a,a=e.siblings.includes(i.id)?"sibling":a,(a=i.parents.includes(e.id)?"child":a)&&this.chart.labels.add({from:t.from,to:t.to,position:0,iconName:a,templateId:"familyLabel"})}}remove(t){for(var e=!1,i=this.people.length-1;i>=0;i--){var a=this.people[i];if(a.id==t)e=!0,this.people.splice(i,1);else{var l;if(a.spouses)-1!=(l=a.spouses.indexOf(t))&&(e=!0,a.spouses.splice(l,1));if(a.siblings)-1!=(l=a.siblings.indexOf(t))&&(e=!0,a.siblings.splice(l,1));if(a.parents)-1!=(l=a.parents.indexOf(t))&&(e=!0,a.parents.splice(l,1))}}e&&(FamilyTree.events.publish("people-changed",[this.familyTree,{}]),this.load(this.focusId,null,(function(){})))}load(t,e,i){e&&(this.people=e);var a=JSON.parse(JSON.stringify(this.people)),l={focusTemplate:this.options.focusTemplate,primaryTemplate:this.options.primaryTemplate,secondaryTemplate:this.options.secondaryTemplate},s={};for(var n in l){var o=FlowChart.shapeTemplates[l[n]];s[l[n]]={width:o.width,height:o.height}}var r=this.chart.nodes.get(t),h=this,d={templates:l,sizeByTemplate:s,data:JSON.parse(JSON.stringify(a)),focusId:t};FamilyTree.layout(d,(function(l){h.graph=l;for(var s=a.length-1;s>=0;s--){var n=a[s],o=h.graph.nodesWithPosition[n.id];o?(n.x=o.x,n.y=o.y,n.templateId=o.templateId,n.level=o.level,n.memberType=o.memberType,null==n.siblings&&(n.siblings=[]),null==n.spouses&&(n.spouses=[]),null==n.parents&&(n.parents=[]),null==n.children&&(n.children=[])):a.splice(s,1)}var d=[],p=[],c=[];if(!e){var y=h.graph.nodesWithPosition[t],f=y.x-r.x,u=y.y-r.y;for(var n of a){var m=h.chart.nodes.get(n.id);n.x-=f,n.y-=u,m&&(d.push({x:m.x,y:m.y}),p.push({x:n.x,y:n.y}),c.push(n.id))}for(var g in h.graph.childrenLevels)h.graph.childrenLevels[g].top-=u,h.graph.childrenLevels[g].bottom-=u,h.graph.childrenLevels[g].left-=f,h.graph.childrenLevels[g].right-=f;for(var g in h.graph.parentsLevels)h.graph.parentsLevels[g].top-=u,h.graph.parentsLevels[g].bottom-=u,h.graph.parentsLevels[g].left-=f,h.graph.parentsLevels[g].right-=f}if(h.focusId=t,FamilyTree.events.publish("focus-changed",[h.familyTree,{}]),!e)for(var n of a){var v=!1;for(s=0;s<c.length;s++){var F=c[s],b=d[s];if(n.id==F){n.x=b.x,n.y=b.y,null!=b.width&&(n.width=b.width),null!=b.height&&(n.height=b.height),v=!0;break}}if(!v){var x=null;for(var w of h.graph.links)if(w.to==n.id){if(null!=x){x=null;break}x=w}if(x){var T=null;for(var C of a)if(C.id==x.from){T=C;break}c.push(n.id),T.parents.includes(n.id)&&(d.push({y:n.y+10,opacity:0}),p.push({y:n.y,opacity:1}),n.y+=10),n.parents.includes(T.id)&&(d.push({y:n.y-10,opacity:0}),p.push({y:n.y,opacity:1}),n.y-=10),T.spouses.includes(n.id)&&(d.push({x:n.x-10,opacity:0}),p.push({x:n.x,opacity:1}),n.x-=10),T.siblings.includes(n.id)&&(d.push({x:n.x+10,opacity:0}),p.push({x:n.x,opacity:1}),n.x+=10),n.opacity=0}}}if(h.chart.load({nodes:a,links:h.graph.links}),h.addLabels(),!e){var k=[];for(var B of c){n=h.chart.nodes.get(B);k.push(n)}h.chart._.animateShapes(k,d,p,(function(){i&&i()}))}}))}on(t,e){return FamilyTree.events.on(t,e,this.uid),this.chart}},FamilyTree.events=class{static topics={};static on(t,e,i){Array.isArray(FamilyTree.events.topics[t])||(FamilyTree.events.topics[t]=[]),FamilyTree.events.topics[t].push({listener:e,uid:i})}static removeAll(t){Array.isArray(FamilyTree.events.topics[t])||(FamilyTree.events.topics[t]=[]),FamilyTree.events.topics[t]=[]}static has(t,e){if(Array.isArray(FamilyTree.events.topics[t])&&FamilyTree.events.topics[t].length>0){if(FamilyTree.isNEU(e))return!0;for(var i=0;i<FamilyTree.events.topics[t].length;i++)if(FamilyTree.events.topics[t][i].uid==e)return!0}return!1}static removeForEventId(t){for(var e in FamilyTree.events.topics)if(Array.isArray(FamilyTree.events.topics[e]))for(var i=FamilyTree.events.topics[e].length-1;i>=0;i--)FamilyTree.events.topics[e][i].uid==t&&FamilyTree.events.topics[e].splice(i,1)}static publish(t,e){if(FamilyTree.events.topics[t]){for(var i=[],a=0;a<FamilyTree.events.topics[t].length;a++){var l=FamilyTree.events.topics[t][a];null!=l._&&null!=l._.uid&&l._.uid!=e[0]._.uid||i.push(l.listener)}if(i.length>0){var s=!0;for(a=0;a<i.length&&(1==e.length?s=i[a](e[0])&&s:2==e.length?s=i[a](e[0],e[1])&&s:3==e.length?s=i[a](e[0],e[1],e[2])&&s:4==e.length?s=i[a](e[0],e[1],e[2],e[3])&&s:5==e.length&&(s=i[a](e[0],e[1],e[2],e[3],e[4])&&s),!1!==s);a++);return s}}}},FlowChart.shapeTemplates.baseFamily=class extends FlowChart.shapeTemplates.base{},FlowChart.shapeTemplates.baseFamily.svg=function(t){return`<rect rx="7" ry="7" x="0" y="0" width="${t.width}" height="${t.height}" style="stroke:${t.stroke}; fill:${t.fill}; stroke-width:${t.strokeWidth};" ></rect>`},FlowChart.shapeTemplates.baseFamily.minHeight=1,FlowChart.shapeTemplates.baseFamily.minWidth=1,FlowChart.linkTemplates.familyLink=class extends FlowChart.linkTemplates.rounded{},FlowChart.linkTemplates.familyLink.markerEnd="",FlowChart.linkTemplates.familyButtonLink=class extends FlowChart.linkTemplates.rounded{},FlowChart.linkTemplates.familyButtonLink.markerEnd="",FlowChart.linkTemplates.familyButtonLink.stroke="#FFCA28",FlowChart.linkTemplates.familyButtonLink.strokeWidth=4,FlowChart.shapeTemplates.baseFamily.displayInShapeBar=!1,FlowChart.shapeTemplates.baseFamily.displayInPortShapeBar=!1,FlowChart.shapeTemplates.baseFamily.displayName="Base Family",FlowChart.shapeTemplates.baseFamily.resizable=!1,FlowChart.shapeTemplates.baseFamily.movable=!1,FlowChart.shapeTemplates.baseFamily.html=function(t){return`<div style="padding: 10px;">\n                        <div data-field="text"> ${t.id}</div>                       \n                    </div>`},FlowChart.shapeTemplates.familyFocus=class extends FlowChart.shapeTemplates.baseFamily{},FlowChart.shapeTemplates.familyFocus.width=200,FlowChart.shapeTemplates.familyFocus.height=200,FlowChart.shapeTemplates.familyFocus.svg=function(t){return`<rect rx="7" ry="7" x="0" y="0" width="${t.width}" height="${t.height}" style="stroke:${t.stroke}; fill:${t.fill}; stroke-width:${t.strokeWidth};" ></rect>`},FlowChart.shapeTemplates.familyFocus.html=function(t){var e=t.BIRT;null==e&&(e="&nbsp;");var i=t.DEAT;null==i&&(i="&nbsp;");var a="";t.BIRT&&t.DEAT&&(a="-");var l=t.OCCU;null==l&&(l="&nbsp;");var s=t.NAME;null==s&&(s="&nbsp;");return`<table style="width: 100%; height: 100%;">\n  <tr>  \n    <td>\n      <div data-field="NAME" data-title="Name" style="overflow: hidden; font-size: 16px;font-weight: bold;"> ${s}</div> \n    </td>\n  </tr>\n  <tr>\n    <td data-drop-field="photo" style="height: 80px; text-align: center;">\n      ${t.photo?`<img border="0" height="100%" style="border-radius:5px;" src="${t.photo}" />`:FlowChart.icon.user(50,50,"#fff",0,0)}\n    </td>      \n  </tr>\n    <tr>  \n    <td>\n      <div data-field="OCCU" data-title="Occupation" style="overflow: hidden; font-size: 14px;">${l}</div> \n    </td>\n  </tr>\n  <tr>\n    <td style="vertical-align: bottom;">\n      <span data-field="BIRT" data-title="Birth date" style=" display: inline-block; overflow: hidden; font-size: 12px; padding: 3px 0;">${e}</span>\n      <span style="display: inline-block; overflow: hidden; font-size: 12px; padding: 3px 0;">${a}</span>      \n      <span data-field="DEAT" data-title="Death date" style=" display: inline-block; overflow: hidden; font-size: 12px; padding: 3px 0;">${i}</span>\n    </td>\n  </tr>\n</table>`},FlowChart.shapeTemplates.familyPrimary=class extends FlowChart.shapeTemplates.baseFamily{},FlowChart.shapeTemplates.familyPrimary.width=280,FlowChart.shapeTemplates.familyPrimary.strokeWidth=4,FlowChart.shapeTemplates.familyPrimary.height=80,FlowChart.shapeTemplates.familyPrimary.html=function(t){var e=t.BIRT;null==e&&(e="&nbsp;");var i=t.DEAT;null==i&&(i="&nbsp;");var a="";t.BIRT&&t.DEAT&&(a="-");var l=t.OCCU;null==l&&(l="");var s=t.NAME;null==s&&(s="name");return`\n  <table border="0" cellpadding="0" cellspacing="0"  style="width: 100%; height: 100%;" title="${l}">\n  <tr>\n    <td data-drop-field="photo" rowspan="2"  width="28.571%">\n      ${t.photo?`<img border="0" width="100%" height="100%" style="border-radius:5px; display: block;" src="${t.photo}" />`:FlowChart.icon.user(50,50,"#fff",0,0)}\n    </td>\n    <td style="vertical-align: middle;">\n      <div data-field="NAME" data-title="Name" style="display: inline-block; overflow: hidden; font-size: 16px;font-weight: bold; padding: 0 3px;">${s}</div>\n    </td>\n  </tr>\n  <tr>\n    <td style="vertical-align: bottom; height: 23px;">\n      <span data-field="BIRT" data-title="Birth date" style="min-height: 16px; display: inline-block; overflow: hidden; font-size: 12px; padding: 3px 0;">${e}</span>\n      <span style="display: inline-block; overflow: hidden; font-size: 12px; padding: 3px 0;">${a}</span>      \n      <span data-field="DEAT" data-title="Death date" style="min-height: 16px; display: inline-block; overflow: hidden; font-size: 12px; padding: 3px 0;">${i}</span>\n    </td>\n  </tr>\n</table>\n`},FlowChart.shapeTemplates.familySecondary=class extends FlowChart.shapeTemplates.baseFamily{},FlowChart.shapeTemplates.familySecondary.width=250,FlowChart.shapeTemplates.familySecondary.height=60,FlowChart.shapeTemplates.familySecondary.minHeight=1,FlowChart.shapeTemplates.familySecondary.minWidth=1,FlowChart.shapeTemplates.familySecondary.html=function(t){var e=t.OCCU;null==e&&(e="");var i=t.NAME;null==i&&(i="Name");return`\n  <table border="0" cellpadding="0" cellspacing="0"  style="width: 100%; height: 100%;" title="${e}">\n  <tr>\n    <td data-drop-field="photo" width="24%">\n      ${t.photo?`<img border="0" width="100%" height="100%" style="border-radius:5px; display: block;" src="${t.photo}" />`:FlowChart.icon.user(50,50,"#fff",0,0)}\n    </td>\n    <td style=" vertical-align: middle;">\n      <div data-field="name" data-title="Edit name" style="overflow: hidden; font-size: 16px;font-weight: bold; padding: 0 3px;">${i}</div>\n    </td>\n  </tr>\n</table>\n`},FlowChart.shapeTemplates.familyButton=class extends FlowChart.shapeTemplates.base{},FlowChart.shapeTemplates.familyButton.svg=function(t){var e="";t.icon&&(e=t.icon);var i=Math.max(t.width,t.height)/2;return`<circle cx="${i}" cy="${i}" r="${i}" style="stroke:${t.stroke}; fill:${t.fill}; stroke-width:${t.strokeWidth};">\n  </circle>`+e},FlowChart.shapeTemplates.familyButton.selectable=!1,FlowChart.shapeTemplates.familyButton.minWidth=0,FlowChart.shapeTemplates.familyButton.minHeight=0,FlowChart.shapeTemplates.familyButton.width=50,FlowChart.shapeTemplates.familyButton.height=50,FlowChart.shapeTemplates.familyButton.displayName="FlowChart.shapeTemplates.familyButton",FlowChart.shapeTemplates.familyButton.resizable=!1,FlowChart.shapeTemplates.familyButton.static=!0,FlowChart.shapeTemplates.familyButton.fill="#FFCA28",FlowChart.shapeTemplates.familyButton.stroke="#FFCA28",FlowChart.shapeTemplates.familyButton.html=function(t){return`<div style="width: 100%;height: 100%;" title="${t.title}"></div>`},FlowChart.shapeTemplates.familyLabel=class extends FlowChart.shapeTemplates.label{},FlowChart.shapeTemplates.familyLabel.width=24,FlowChart.shapeTemplates.familyLabel.height=24,FlowChart.shapeTemplates.familyLabel.fill="#aeaeae",FlowChart.shapeTemplates.familyLabel.svg=function(t){return`<rect rx="${t.width}" ry="${t.height}" class="bfc-label" x="0" y="0" width="${t.width}" height="${t.height}" style="stroke:${t.stroke}; fill:${t.fill}; stroke-width:${t.strokeWidth};" ></rect>`+FamilyTree.icon[t.iconName](18,18,"#fff",3,3)},FlowChart.shapeTemplates.familyLabel.html=function(t){return""},FamilyTree.private.prototype.onShapeClickHandler=function(t){var e=this,i=this.chart.nodes.get(t.shapeId),a=this.chart.selectedShapes.first;if("btnFocus"==i.id){if(i.nodeId==this.focusId)return;return this.selectedSpouseLink=null,void this.load(i.nodeId,null,(function(){}))}if("btnPhoto"!=i.id)if("btnDelete"!=i.id)if("btnChild"!=i.id)if("btnSpouse"!=i.id)if("btnSibling"!=i.id)if("btnParent"!=i.id)if("btnChildFromSpouse"!=i.id)"btnEdit"!=i.id&&("btnCancel"!=i.id||this.chart.selectedShapes.clear());else{var l;a=this.chart.nodes.get(a.id);for(var s of a.spouses)if(this.graph.childTree[s]){l=s;break}h={id:this.chart.generateId(),parents:[l,a.id]};this.addChildWithParents(h,(function(){var t=e.chart.nodes.get(h.id);e.chart.makeShapeVisible(t),e.chart.nodes.get(i.nodeId).selected=!0,e.chart.editor.editFirstFieldIfAny(t)}))}else{var n={id:this.chart.generateId()};this.addParent(a.id,n,(function(){var t=e.chart.nodes.get(n.id);e.chart.makeShapeVisible(t),e.chart.nodes.get(i.nodeId).selected=!0,e.chart.editor.editFirstFieldIfAny(t)}))}else{var o={id:this.chart.generateId(),siblings:[a.id]};this.addSibling(o,(function(){var t=e.chart.nodes.get(o.id);e.chart.makeShapeVisible(t),e.chart.nodes.get(i.nodeId).selected=!0,e.chart.editor.editFirstFieldIfAny(t)}))}else{var r={id:this.chart.generateId(),spouses:[a.id]};this.addSpouse(r,(function(){var t=e.chart.nodes.get(r.id);e.chart.makeShapeVisible(t),e.chart.nodes.get(i.nodeId).selected=!0,e.chart.editor.editFirstFieldIfAny(t)}))}else{var h={id:this.chart.generateId(),parents:[a.id]};this.addChild(h,(function(){var t=e.chart.nodes.get(h.id);e.chart.makeShapeVisible(t),e.chart.nodes.get(i.nodeId).selected=!0,e.chart.editor.editFirstFieldIfAny(t)}))}else this.remove(i.nodeId);else FamilyTree.private.photoDialog((function(t){e.chart.nodes.get(i.nodeId).photo=t}))},FamilyTree.private.photoDialog=function(t){var e=document.createElement("input");e.type="file",e.id="fileElement",e.accept="image/*",e.style.display="none",document.body.appendChild(e),e.addEventListener("change",(function(){var e=this.files,i=window.URL.createObjectURL(e[0]);FlowChart.private.createImageElementForUpload(i,t)}),!1),e&&e.click()},FamilyTree.private.prototype.onSelectedChangedHandler=function(){if(this.clearSelectedButtons(),this.chart.selectedShapes.length){if(this.chart.selectedShapes.length>1)for(var t=this.chart.selectedShapes.length-2;t>=0;t--)this.chart.selectedShapes[t].select=!1;var e=this.chart.selectedShapes.first.spouses;if(e)for(var i of e)if(this.graph.childTree[i]){this.chart.nodes.get(i);break}this.addButtons(this.chart.selectedShapes.first)}},FamilyTree.private.prototype.addButtons=function(t){var e=this;for(var i of this.chart.labels)i.from==t.id&&(i.element.style.display="none");var a=[],l=[],s=[],n=this.getParentButton(t);n&&(a.push(n.newNode),l.push(n.end),s.push(n.start)),(n=this.getChildButton(t))&&(a.push(n.newNode),l.push(n.end),s.push(n.start)),(n=this.getSibblingButton(t))&&(a.push(n.newNode),l.push(n.end),s.push(n.start)),(n=this.getSpouseButton(t))&&(a.push(n.newNode),l.push(n.end),s.push(n.start)),(n=this.getButtonPhoto(t))&&(a.push(n.newNode),l.push(n.end),s.push(n.start)),this.focusId!=t.id&&(n=this.getButtonDelete(t))&&(a.push(n.newNode),l.push(n.end),s.push(n.start)),this.focusId!=t.id&&(n=this.getButtonFocus(t))&&(a.push(n.newNode),l.push(n.end),s.push(n.start)),(n=this.getButtonChildFromSpouse(t))&&(a.push(n.newNode),l.push(n.end),s.push(n.start)),this.chart._.animateShapes(a,s,l,(function(){if(btnNode=e.chart.nodes.get("btnDelete"),btnNode){var t=btnNode.width/2-16,i=btnNode.height/2-16;btnNode.icon=FlowChart.icon.delete(32,32,"#FFCA28",t,i),btnNode.fill="#fff"}if(btnNode=e.chart.nodes.get("btnFocus"),btnNode){t=btnNode.width/2-16,i=btnNode.height/2-16;btnNode.icon=FlowChart.icon.fit(32,32,"#FFCA28",t,i),btnNode.fill="#fff"}if(btnNode=e.chart.nodes.get("btnPhoto"),btnNode){t=btnNode.width/2-16,i=btnNode.height/2-16;btnNode.icon=`<svg x="${t}" y="${i}" width="32" height="32" viewBox="0 0 24 24">\n      <path fill="#FFCA28" fill-rule="evenodd" clip-rule="evenodd" d="M9.77778 21H14.2222C17.3433 21 18.9038 21 20.0248 20.2646C20.51 19.9462 20.9267 19.5371 21.251 19.0607C22 17.9601 22 16.4279 22 13.3636C22 10.2994 22 8.76721 21.251 7.6666C20.9267 7.19014 20.51 6.78104 20.0248 6.46268C19.3044 5.99013 18.4027 5.82123 17.022 5.76086C16.3631 5.76086 15.7959 5.27068 15.6667 4.63636C15.4728 3.68489 14.6219 3 13.6337 3H10.3663C9.37805 3 8.52715 3.68489 8.33333 4.63636C8.20412 5.27068 7.63685 5.76086 6.978 5.76086C5.59733 5.82123 4.69555 5.99013 3.97524 6.46268C3.48995 6.78104 3.07328 7.19014 2.74902 7.6666C2 8.76721 2 10.2994 2 13.3636C2 16.4279 2 17.9601 2.74902 19.0607C3.07328 19.5371 3.48995 19.9462 3.97524 20.2646C5.09624 21 6.65675 21 9.77778 21ZM12 9.27273C9.69881 9.27273 7.83333 11.1043 7.83333 13.3636C7.83333 15.623 9.69881 17.4545 12 17.4545C14.3012 17.4545 16.1667 15.623 16.1667 13.3636C16.1667 11.1043 14.3012 9.27273 12 9.27273ZM12 10.9091C10.6193 10.9091 9.5 12.008 9.5 13.3636C9.5 14.7192 10.6193 15.8182 12 15.8182C13.3807 15.8182 14.5 14.7192 14.5 13.3636C14.5 12.008 13.3807 10.9091 12 10.9091ZM16.7222 10.0909C16.7222 9.63904 17.0953 9.27273 17.5556 9.27273H18.6667C19.1269 9.27273 19.5 9.63904 19.5 10.0909C19.5 10.5428 19.1269 10.9091 18.6667 10.9091H17.5556C17.0953 10.9091 16.7222 10.5428 16.7222 10.0909Z" fill="#1C274C"/>\n    </svg>`,btnNode.fill="#fff"}e.chart._.makeShapesVisible(a)}))},FamilyTree.private.prototype.clearSelectedButtons=function(){for(var t of this.chart.labels)t.element.style.display="";this.selectedSpouseLink&&(this.selectedSpouseLink.stroke="#aeaeae");var e=[];for(var i of["btnParent","btnPhoto","btnChild","btnSibling","btnSpouse","btnEdit","btnDelete","btnFocus","btnCancel","btnChildFromSpouse"]){var a=this.chart.nodes.get(i);a&&e.push(a)}this.chart.nodes.removeRange(e)},FamilyTree.private.prototype.getParentButton=function(t){if((this.graph.parentTree[t.id]||t.id==this.focusId)&&t.parents.length<2){var e={x:t.x,y:t.top-FlowChart.shapeTemplates.familyButton.height/2-20},i=this.chart.nodes.add({id:"btnParent",templateId:"familyButton",nodeId:t.id,layer:10,title:"Add parent",x:e.x,y:e.y,opacity:0,icon:FamilyTree.icon.parent(40,40,"#fff",FlowChart.shapeTemplates.familyButton.width/2-20,FlowChart.shapeTemplates.familyButton.height/2-20)});return this.chart.links.add({from:t.id,to:i.id,fromPort:"top",toPort:"bottom",templateId:"familyButtonLink",opacity:0}),{newNode:i,start:{opacity:0,x:e.x,y:e.y+20},end:{opacity:1,x:e.x,y:e.y}}}return null},FamilyTree.private.prototype.getChildButton=function(t){if(this.graph.childTree[t.id]||t.id==this.focusId){var e={x:t.x,y:t.bottom+FlowChart.shapeTemplates.familyButton.height/2+20},i=this.chart.nodes.add({id:"btnChild",templateId:"familyButton",nodeId:t.id,layer:10,title:"Add child",x:e.x,y:e.y,icon:FamilyTree.icon.child(40,40,"#fff",FlowChart.shapeTemplates.familyButton.width/2-20,FlowChart.shapeTemplates.familyButton.height/2-20),opacity:0});return this.chart.links.add({from:t.id,to:i.id,fromPort:"bottom",toPort:"top",templateId:"familyButtonLink"}),{newNode:i,start:{opacity:0,x:e.x,y:e.y-20},end:{opacity:1,x:e.x,y:e.y}}}return null},FamilyTree.private.prototype.getSibblingButton=function(t){if(t.id==this.focusId){var e={x:t.left-FlowChart.shapeTemplates.familyButton.width/2-20,y:t.y},i=this.chart.nodes.add({id:"btnSibling",templateId:"familyButton",title:"Add sibling",nodeId:t.id,layer:10,x:e.x,y:e.y,icon:FamilyTree.icon.sibling(40,40,"#fff",FlowChart.shapeTemplates.familyButton.width/2-20,FlowChart.shapeTemplates.familyButton.height/2-20),opacity:0});return this.chart.links.add({from:t.id,to:i.id,fromPort:"left",toPort:"right",templateId:"familyButtonLink"}),{newNode:i,start:{opacity:0,x:e.x+20,y:e.y},end:{opacity:1,x:e.x,y:e.y}}}return null},FamilyTree.private.prototype.getSpouseButton=function(t){if(this.graph.childTree[t.id]||t.id==this.focusId){var e={x:t.right+FlowChart.shapeTemplates.familyButton.width/2+20,y:t.y},i=this.chart.nodes.add({id:"btnSpouse",templateId:"familyButton",nodeId:t.id,layer:10,title:"Add spouse",x:e.x,y:e.y,icon:FamilyTree.icon.spouse(40,40,"#fff",FlowChart.shapeTemplates.familyButton.width/2-20,FlowChart.shapeTemplates.familyButton.height/2-20),opacity:0});return this.chart.links.add({from:t.id,to:i.id,fromPort:"right",toPort:"left",templateId:"familyButtonLink"}),{newNode:i,start:{opacity:0,x:e.x-20,y:e.y},end:{opacity:1,x:e.x,y:e.y}}}return null},FamilyTree.private.prototype.getButtonPhoto=function(t){var e={x:t.left,y:t.top},i=this.chart.nodes.add({id:"btnPhoto",nodeId:t.id,templateId:"familyButton",layer:10,title:"Photo",x:e.x,y:e.y,stroke:"#FFCA28",opacity:0});return{newNode:i,start:{opacity:0,width:0,height:0},end:{opacity:1,width:i.width,height:i.height}}},FamilyTree.private.prototype.getButtonEdit=function(t){var e={x:t.right,y:t.bottom},i=this.chart.nodes.add({id:"btnEdit",nodeId:t.id,templateId:"familyButton",layer:10,title:"Edit",x:e.x,y:e.y,stroke:"#FFCA28",opacity:0});return{newNode:i,start:{opacity:0,width:0,height:0},end:{opacity:1,width:i.width,height:i.height}}},FamilyTree.private.prototype.getButtonDelete=function(t){var e={x:t.left,y:t.bottom},i=this.chart.nodes.add({id:"btnDelete",nodeId:t.id,templateId:"familyButton",layer:10,title:"Delete",x:e.x,y:e.y,stroke:"#FFCA28",opacity:0});return{newNode:i,start:{opacity:0,width:0,height:0},end:{opacity:1,width:i.width,height:i.height}}},FamilyTree.private.prototype.getButtonFocus=function(t){var e={x:t.right,y:t.top},i=this.chart.nodes.add({id:"btnFocus",nodeId:t.id,templateId:"familyButton",layer:10,title:"Fucus",x:e.x,y:e.y,stroke:"#FFCA28",opacity:0});return{newNode:i,start:{opacity:0,width:0,height:0},end:{opacity:1,width:i.width,height:i.height}}},FamilyTree.private.prototype.getButtonCancel=function(t){var e={x:t.right,y:t.top},i=this.chart.nodes.add({id:"btnCancel",nodeId:t.id,templateId:"familyButton",layer:10,title:"Cancel",x:e.x,y:e.y,stroke:"#FFCA28",opacity:0});return{newNode:i,start:{opacity:0,width:0,height:0},end:{opacity:1,width:i.width,height:i.height}}},FamilyTree.private.prototype.getButtonChildFromSpouse=function(t){var e=null;for(var i of t.spouses)if(this.graph.childTree[i]){e=this.chart.nodes.get(i);break}if(e){this.selectedSpouseLink=this.chart.links.get(e.id,t.id),this.selectedSpouseLink.stroke="#FFCA28";var a={x:t.x,y:t.bottom+FlowChart.shapeTemplates.familyButton.height/2+20},l=this.chart.nodes.add({id:"btnChildFromSpouse",nodeId:t.id,templateId:"familyButton",layer:10,title:"Add child from spouse",x:a.x,y:a.y+20,icon:`<svg x="${FlowChart.shapeTemplates.familyButton.width/2-20}" y="${FlowChart.shapeTemplates.familyButton.height/2-20}" fill="#fff" width="40" height="40" viewBox="-64 0 512 512" ><path d="M120 72c0-39.765 32.235-72 72-72s72 32.235 72 72c0 39.764-32.235 72-72 72s-72-32.236-72-72zm254.627 1.373c-12.496-12.497-32.758-12.497-45.254 0L242.745 160H141.254L54.627 73.373c-12.496-12.497-32.758-12.497-45.254 0-12.497 12.497-12.497 32.758 0 45.255L104 213.254V480c0 17.673 14.327 32 32 32h16c17.673 0 32-14.327 32-32V368h16v112c0 17.673 14.327 32 32 32h16c17.673 0 32-14.327 32-32V213.254l94.627-94.627c12.497-12.497 12.497-32.757 0-45.254z"/></svg>`,stroke:"#FFCA28",opacity:0});return this.chart.links.add({from:t.id,to:l.id,fromPort:"bottom",toPort:"top",templateId:"familyButtonLink"}),{newNode:l,start:{opacity:0,x:a.x,y:a.y-20},end:{opacity:1,x:a.x,y:a.y}}}return null},FamilyTree.private.prototype.onLinkPoints=function(t){var e={};if(this.graph&&this.graph.nodesWithPosition&&this.graph.nodesWithPosition[t.fromShape.id]&&this.graph.nodesWithPosition[t.toShape.id]){var i=t.fromShape,a=t.toShape,l=[];l=[{x:i.x,y:i.top},{x:i.x,y:a.bottom+25},{x:a.x,y:a.bottom+25},{x:a.x,y:a.bottom}];var s=i.siblings.includes(a.id),n=i.spouses.includes(a.id);if(s)l=[{x:i.left,y:i.y},{x:i.left-25,y:i.y},{x:i.left-25,y:a.y},{x:a.right,y:a.y}];else if(n)l=(i.id!=this.focusId&&this.graph.parentTree[i.id],[{x:i.right,y:i.y},{x:i.right+25,y:i.y},{x:i.right+25,y:a.y},{x:a.left,y:a.y}]);else if(this.graph.parentTree[a.id]){var o=this.graph.parentsLevels[this.graph.parentTree[a.id].level];l=[{x:i.x,y:i.top},{x:i.x,y:o.bottom+25},{x:a.x,y:o.bottom+25},{x:a.x,y:a.bottom}]}else if(this.graph.childTree[a.id]){var r=this.graph.childTree[a.id],h=this.graph.childTree[r.parent],d=this.graph.nodesWithPosition[r.parent];for(var p of h.children){(u=this.graph.nodesWithPosition[p]).x<d.x&&0}var c=0;for(var p of h.children){var y=null;for(var f of this.chart.nodes.get(p).parents){if(f!=r.parent)if(v=this.chart.nodes.get(f)){y=v.id;break}}var u=this.graph.nodesWithPosition[p];e[F=`${r.parent}~${y}`]||(e[F]={isLeft:u.x<d.x,index:c},c++)}var m=this.chart.nodes.get(r.parent),g=null;for(var f of a.parents){var v;if(f!=r.parent)if(v=this.chart.nodes.get(f)){g=v;break}}o=this.graph.childrenLevels[r.level];var F,b=e[F=`${r.parent}~${g?g.id:"null"}`];if(g||(l=[{x:i.x,y:i.bottom},{x:i.x,y:o.top-25},{x:a.x,y:o.top-25},{x:a.x,y:a.top}]),g&&m){var x=m.right+(g.left-m.right)/2,w=o.top-25;x>a.x?(w+=8*b.index,x+=8*b.index):(w-=8*b.index,x+=8*b.index),l=[{x:x,y:g.y},{x:x,y:w},{x:a.x,y:w},{x:a.x,y:a.top}]}}"spouse"==a.memberType?l=[{x:i.right,y:i.y},{x:i.right+25,y:i.y},{x:i.right+25,y:a.y},{x:a.left,y:a.y}]:"sibling"==a.memberType&&(l=[{x:i.left,y:i.y},{x:i.left-25,y:i.y},{x:i.left-25,y:a.y},{x:a.right,y:a.y}]),t.points=l}},FamilyTree.icon={},FamilyTree.icon.parent=function(t,e,i,a,l){return`<svg x="${a}" y="${l}" fill="${i}" height="${t}" width="${e}"  \n\t viewBox="0 0 449.358 449.358" >\n<g>\n\t<path d="M301.94,102.856c22.987,0,41.613-18.628,41.613-41.613c0-22.986-18.626-41.613-41.613-41.613\n\t\tc-22.988,0-41.614,18.627-41.614,41.613C260.327,84.228,278.952,102.856,301.94,102.856z"/>\n\t<path d="M111.319,102.856c22.986,0,41.612-18.628,41.612-41.613c0-22.986-18.626-41.613-41.612-41.613\n\t\tc-22.988,0-41.614,18.627-41.614,41.613C69.705,84.228,88.331,102.856,111.319,102.856z"/>\n\t<path d="M430.84,237.059c1.314-5.792-0.644-12.088-5.595-16.046l-37.676-30.12l-34.865-84.748\n\t\tc-2.13-5.178-6.667-8.623-11.782-9.606c-9.633,10.629-23.541,17.317-38.982,17.317c-15.441,0-29.349-6.688-38.983-17.317\n\t\tc-5.117,0.982-9.656,4.427-11.787,9.606l-44.544,108.277l-44.544-108.277c-2.13-5.178-6.666-8.624-11.782-9.606\n\t\tc-9.633,10.63-23.541,17.317-38.982,17.317c-15.441,0-29.349-6.688-38.983-17.317c-5.118,0.982-9.657,4.427-11.788,9.606\n\t\tL1.207,250.389c-3.362,8.172,0.538,17.523,8.71,20.884c1.992,0.819,4.053,1.207,6.082,1.207c6.292,0,12.26-3.737,14.803-9.917\n\t\tl30.068-73.09v20.243l-29.849,93.252c-5.02,15.683,6.68,31.713,23.146,31.713h6.702v73.99c0,11.883,9.846,21.467,21.824,21.041\n\t\tc11.409-0.406,20.286-10.129,20.286-21.546v-73.485h16.671v73.99c0,11.883,9.844,21.466,21.822,21.041\n\t\tc11.41-0.405,20.288-10.13,20.288-21.547v-73.484h6.702c16.467,0,28.167-16.03,23.146-31.713l-29.849-93.252v-20.244l24.062,58.492\n\t\tc3.47,8.436,11.69,13.943,20.812,13.943h0c9.124,0,17.345-5.509,20.814-13.948l24.042-58.486v219.199\n\t\tc0,11.883,9.845,21.467,21.824,21.041c11.409-0.406,20.287-10.129,20.287-21.546V294.542c0-4.44,3.35-8.316,7.781-8.603\n\t\tc4.855-0.314,8.889,3.53,8.889,8.317v114.418c0,11.883,9.845,21.467,21.823,21.041c11.41-0.406,20.287-10.13,20.287-21.547V189.474\n\t\tl7.166,17.419c1.033,2.51,2.687,4.716,4.807,6.411l38.057,30.425c-4.899,4.959-7.93,11.767-7.93,19.271v158.417\n\t\tc0,4.073,3.138,7.624,7.209,7.746c4.212,0.126,7.667-3.251,7.667-7.435v-158.36c0-6.537,4.842-12.26,11.35-12.873\n\t\tc7.469-0.704,13.773,5.178,13.773,12.504v18.697c0,4.073,3.138,7.624,7.209,7.746c4.212,0.126,7.667-3.251,7.667-7.434V263\n\t\tC449.358,250.993,441.602,240.77,430.84,237.059z"/>\n</g>\n</svg>`},FamilyTree.icon.child=function(t,e,i,a,l){return`<svg x="${a}" y="${l}" fill="${i}" height="${t}" width="${e}"  \n       viewBox="-64 0 512 512" ><path d="M120 72c0-39.765 32.235-72 72-72s72 32.235 72 72c0 39.764-32.235 72-72 72s-72-32.236-72-72zm254.627 1.373c-12.496-12.497-32.758-12.497-45.254 0L242.745 160H141.254L54.627 73.373c-12.496-12.497-32.758-12.497-45.254 0-12.497 12.497-12.497 32.758 0 45.255L104 213.254V480c0 17.673 14.327 32 32 32h16c17.673 0 32-14.327 32-32V368h16v112c0 17.673 14.327 32 32 32h16c17.673 0 32-14.327 32-32V213.254l94.627-94.627c12.497-12.497 12.497-32.757 0-45.254z"/></svg>`},FamilyTree.icon.sibling=function(t,e,i,a,l){return`<svg x="${a}" y="${l}" fill="${i}" height="${t}" width="${e}"  viewBox="0 0 457.254 457.254">\n<g>\n\t<circle cx="333.6" cy="69.265" r="47.409"/>\n\t<path d="M454.413,260.338l-72.963-125.237c-3.495-5.999-10.592-10.239-15.94-10.239c-1.283,0-60.824,0-62.106,0\n\t\tc-5.348,0-12.445,4.24-15.94,10.239l-54.973,94.358l-61.025-104.746c-3.884-6.668-10.897-10.364-18.098-10.351\n\t\tc-0.132-0.008-0.263-0.02-0.397-0.02H94.3c-0.134,0-0.265,0.012-0.397,0.02c-7.201-0.014-14.213,3.682-18.098,10.351L2.841,249.949\n\t\tc-5.804,9.961-2.433,22.741,7.528,28.545c3.306,1.926,6.921,2.841,10.489,2.841c7.185,0,14.178-3.714,18.056-10.369l32.182-55.239\n\t\tv23.65L56.693,343.162c-1.213,8.742,5.578,16.541,14.404,16.541h0v63.527c0,11.944,9.288,22.117,21.224,22.542\n\t\tc12.532,0.446,22.833-9.581,22.833-22.014v-64.056h17.404v63.527c0,11.945,9.288,22.118,21.226,22.542\n\t\tc12.532,0.445,22.83-9.581,22.83-22.014v-64.056h0c8.826,0,15.617-7.799,14.404-16.541l-14.404-103.787v-22.89l31.74,54.481\n\t\tc1.08,1.852,8.574,14.946,13.673,17.917c3.306,1.925,6.921,2.841,10.489,2.841c7.185,0,14.178-3.713,18.056-10.369l31.275-53.683\n\t\tl-0.301,184.769c0,12.166,9.861,22.028,22.027,22.028c0.051,0,0.1-0.007,0.151-0.008c0.051,0,0.1,0.008,0.152,0.008\n\t\tc12.166,0,22.029-9.862,22.029-22.028l-0.302-111.487c0-4.635,3.497-8.682,8.123-8.981c5.068-0.328,9.281,3.685,9.281,8.683\n\t\tl0,111.256c0,11.944,9.288,22.117,21.224,22.543c12.532,0.446,22.833-9.581,22.833-22.014V227.671l31.275,53.683\n\t\tc3.878,6.656,10.871,10.369,18.056,10.369c3.568,0,7.184-0.916,10.489-2.841C456.846,283.078,460.216,270.298,454.413,260.338z"/>\n\t<path d="M49.541,105.344l11.735-1.046c6.748-0.601,11.504-6.909,10.183-13.555c-2.014-10.156-2.71-24.251,5.722-32.967\n\t\tc-0.009,0.367-0.028,0.731-0.028,1.099c0,26.182,21.226,47.408,47.408,47.408c26.181,0,47.407-21.226,47.407-47.408\n\t\tc0-0.368-0.019-0.732-0.029-1.099c8.433,8.717,7.736,22.811,5.721,32.967c-1.318,6.646,3.436,12.954,10.184,13.555l11.734,1.046\n\t\tc6.203,0.553,11.701-3.961,12.365-10.153c1.615-15.035,1.334-37.592-7.169-46.549c-12.551-13.221-28.074-13.355-38.102-11.532\n\t\tc-7.886-15.229-23.777-25.644-42.11-25.644c-18.333,0-34.225,10.414-42.112,25.644c-10.027-1.822-25.553-1.689-38.102,11.532\n\t\tc-8.501,8.957-8.782,31.515-7.171,46.549C37.842,101.383,43.339,105.897,49.541,105.344z"/>\n</g>\n</svg>`},FamilyTree.icon.spouse=function(t,e,i,a,l){return`<svg x="${a}" y="${l}" fill="${i}" height="${t}" width="${e}"\n        viewBox="0 0 465.227 465.227">\n     <g>\n       <path d="M184.324,102.514l-73.268,0.42c-6.975-0.153-13.649,3.913-16.462,10.751L30.126,270.394\n         c-3.652,8.878,0.584,19.036,9.462,22.689c2.164,0.891,4.403,1.312,6.606,1.312c6.836,0,13.32-4.06,16.082-10.774l32.667-79.406\n         v238.139c0,12.91,10.695,23.322,23.709,22.859c12.395-0.441,22.039-11.004,22.039-23.407V318.36c0-4.823,3.641-9.035,8.454-9.346\n         c5.274-0.341,9.657,3.836,9.657,9.036v124.304c0,12.91,10.695,23.322,23.708,22.859c12.395-0.44,22.041-11.005,22.041-23.408\n         V122.741C204.552,111.57,195.496,102.514,184.324,102.514z"/>\n       <path d="M283.375,45.208C283.375,20.236,263.141,0,238.168,0c-22.384,0-40.949,16.26-44.562,37.613\n         c-4.91-19.656-22.676-34.214-43.856-34.214c-24.974,0-45.209,20.236-45.209,45.208c0,24.971,20.235,45.209,45.209,45.209\n         c22.384,0,40.949-16.262,44.561-37.613c4.91,19.656,22.675,34.215,43.857,34.215C263.141,90.418,283.375,70.18,283.375,45.208z"/>\n       <path d="M435.601,350.543c-3.238-11.554-15.233-18.296-26.787-15.054l-52.495,14.72l-1.793-10.052l18.349-5.475\n         c17.143-5.115,24.342-25.439,14.244-40.205l-60.043-87.807l-6.289-21.077l54.009,66.751c3.435,4.246,8.457,6.449,13.523,6.449\n         c3.84,0,7.705-1.266,10.923-3.87c7.463-6.039,8.618-16.984,2.579-24.447L295.236,98.746c-4.65-5.749-12.21-7.737-18.851-5.594\n         c-1.351,0.117-41.855,12.051-41.855,12.051c-9.238,2.756-15.557,11.271-15.516,20.913l0.926,218.249\n         c-0.355,17.885,16.805,30.939,33.947,25.823l5.43-1.62v73.669c0,12,9.728,21.728,21.728,21.728s21.729-9.728,21.729-21.728v-86.636\n         l9.839-2.936l5.127,28.746c1.076,6.033,4.649,11.332,9.841,14.589c3.494,2.193,7.503,3.324,11.551,3.324\n         c1.964,0,3.938-0.266,5.865-0.807l75.548-21.185C432.101,374.091,438.841,362.098,435.601,350.543z"/>\n     </g>\n     </svg>`},void 0===FamilyTree&&(FamilyTree={}),FamilyTree.VERSION="2.00.00","undefined"!=typeof module&&(module.exports=FamilyTree),FamilyTree.remote={},FamilyTree.layout=function(t,e){t.v="2.00.00",FamilyTree.remote.findRegion((function(i){fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>t.json())).then((function(t){e(t)})).catch((function(t){console.error(t)}))}))},FamilyTree.remote.findRegion=function(t){var e=localStorage.getItem("func-url-familytreejs2");if(e)t(e);else{var i=[];for(var a of["defunc2","cusfunc2","bsfunc2","acfunc2","kcfunc2","safunc2","wifunc2"]){var l=new AbortController;fetch(`https://${a}.azurewebsites.net/api/FamilyTreeJS2`,{method:"GET",signal:l.signal}).then((function(e){for(var a of i)a.abort("cancel_request");localStorage.setItem("func-url-familytreejs2",e.url),t(e.url)})).catch((function(t){"cancel_request"!=t&&console.error(t)})),i.push(l)}}},FamilyTree.logo='<svg style="position: absolute; bottom: 8px; right: 7px; font-family: Verdana;" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="195" height="27">      \n            <text fill="#039be5" style="font-size: 14px;font-weight:bold;" x="0" y="24">BALKAN</text>\n            <text fill="#f57c00" style="font-size: 14px;" x="70" y="24">FamilyTree Maker</text>\n        </svg>';